#LyX 2.3 created this file. For more info see http://www.lyx.org/
\lyxformat 544
\begin_document
\begin_header
\save_transient_properties true
\origin unavailable
\textclass article
\use_default_options true
\maintain_unincluded_children false
\language british
\language_package default
\inputencoding auto
\fontencoding global
\font_roman "default" "default"
\font_sans "default" "default"
\font_typewriter "default" "default"
\font_math "auto" "auto"
\font_default_family sfdefault
\use_non_tex_fonts false
\font_sc false
\font_osf false
\font_sf_scale 100 100
\font_tt_scale 100 100
\use_microtype false
\use_dash_ligatures false
\graphics default
\default_output_format default
\output_sync 0
\bibtex_command default
\index_command default
\paperfontsize 11
\spacing onehalf
\use_hyperref true
\pdf_bookmarks true
\pdf_bookmarksnumbered false
\pdf_bookmarksopen false
\pdf_bookmarksopenlevel 1
\pdf_breaklinks false
\pdf_pdfborder true
\pdf_colorlinks true
\pdf_backref false
\pdf_pdfusetitle true
\papersize default
\use_geometry true
\use_package amsmath 1
\use_package amssymb 1
\use_package cancel 1
\use_package esint 1
\use_package mathdots 1
\use_package mathtools 1
\use_package mhchem 1
\use_package stackrel 1
\use_package stmaryrd 1
\use_package undertilde 1
\cite_engine basic
\cite_engine_type default
\biblio_style plain
\use_bibtopic false
\use_indices false
\paperorientation portrait
\suppress_date false
\justification true
\use_refstyle 1
\use_minted 0
\index Index
\shortcut idx
\color #008000
\end_index
\leftmargin 2cm
\topmargin 2.5cm
\rightmargin 2.5cm
\bottommargin 3cm
\secnumdepth 3
\tocdepth 3
\paragraph_separation skip
\defskip smallskip
\is_math_indent 0
\math_numbering_side default
\quotes_style english
\dynamic_quotes 0
\papercolumns 1
\papersides 1
\paperpagestyle default
\tracking_changes false
\output_changes false
\html_math_output 0
\html_css_as_file 0
\html_be_strict false
\end_header

\begin_body

\begin_layout Title
User Manual for 
\emph on
Survey2GIS 
\emph default
(Version 1.5.2)
\size large

\begin_inset Newline newline
\end_inset

– software for converting survey data to GIS file formats –
\end_layout

\begin_layout Author
written by the 
\emph on
survey-tools.org
\emph default
 development team (
\begin_inset Flex URL
status open

\begin_layout Plain Layout

http://www.survey-tools.org
\end_layout

\end_inset

)
\end_layout

\begin_layout Standard
\begin_inset CommandInset toc
LatexCommand tableofcontents

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Newpage newpage
\end_inset


\end_layout

\begin_layout Section
Introduction
\end_layout

\begin_layout Standard
\begin_inset Box Doublebox
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
thickness "0.4pt"
separation "3pt"
shadowsize "4pt"
framecolor "black"
backgroundcolor "none"
status open

\begin_layout Plain Layout
Prologue: This software is meant to process data coming from a 
\emph on
topographic survey
\emph default
.
 The purpose of the latter is to capture and map geometric aspects of the
 real world, 
\emph on
as visible
\emph default
 on the surface.
 Accordingly, this software has been designed to process 
\begin_inset Quotes eld
\end_inset

geometries
\begin_inset Quotes erd
\end_inset

 (points, lines and polygons) that represent the cross-sections of real-world
 features, 
\emph on
as visible
\emph default
 on a (more or less horizontal) cutting plane (i.
\begin_inset space \thinspace{}
\end_inset

e.
 a natural or excavated surface).
 Limited support for vertical cross-sections has been added in version 1.5
 of this software (see 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Planum-and-profile"
plural "false"
caps "false"
noprefix "false"

\end_inset

).
 
\emph on
Survey2GIS
\emph default
 has not been designed to act as a tool for constructing or drawing 
\emph on
assumed
\emph default
 geometries.
 Its design philosophy is in alignment with the (prevailingly 2D) GIS concepts
 of 
\emph on
layers
\emph default
 and
\emph on
 topological quality
\emph default
.
 If the geometric output produced by this software does not match expectations,
 then users are urged to review section 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Topologische-Säuberung"

\end_inset

 of this manual, before looking for errors in the data, processing settings
 or the software itself.
\end_layout

\end_inset


\end_layout

\begin_layout Standard
This user manual describes 
\emph on
Survey2GIS
\emph default
, a flexible tool capable of processing survey data into high quality GIS
 vector data.
 The input data must be in plain text format and contain one single point
 
\emph on
measurement
\emph default
 (=record) per line.
 Such data may be downloaded from a total station or GPS, but may also be
 manually created using a simple text editor.
 Digital surveying devices take point measurements and store them in internal
 memory, from where they can be downloaded, using the software supplied
 by the manufacturer, and saved into a plain text file suitable for processing
 by 
\emph on
Survey2GIS
\emph default
.
\end_layout

\begin_layout Standard
Broadly speaking, using 
\emph on
Survey2GIS 
\emph default
is then a two-step process:
\end_layout

\begin_layout Enumerate
The user writes a simple parser definition text file that describes the
 structure of the survey data file(s).
\end_layout

\begin_layout Enumerate
The user runs 
\emph on
Survey2GIS
\emph default
 with the parser file and one or more survey data files as input.
\end_layout

\begin_layout Standard
The parser file syntax is described in details in section 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Parser-Schemata"

\end_inset

 of this document.
\end_layout

\begin_layout Standard
In order to produce complex shapes (
\begin_inset Quotes eld
\end_inset

geometries
\begin_inset Quotes erd
\end_inset

), such as line strings or polygons, from one ore more survey data files,
 individual point measurements (i.
\begin_inset space \thinspace{}
\end_inset

e.
 the vertices of the geometries) have to be merged in a precisely controlled
 manner.
 In addition, each geometry may be associated with an 
\emph on
attribute
\emph default
 record in the GIS output data to store descriptive data such as unique
 identifiers and custom object codes.
 To assure that all of this works flawlessly, the surveyor must take care
 that each measurement is attributed with a special code/tag which will
 later allow 
\emph on
Survey2GIS
\emph default
 to decide which records to merge into line or polygon geometries.
 The hardware used for surveying, the field work and the data processing
 must be aligned accordingly for an efficient and seamless workflow.
\end_layout

\begin_layout Standard
The role of 
\emph on
Survey2GIS
\emph default
 is to act as translator between the raw survey data and the more complex
 objects (
\begin_inset Quotes eld
\end_inset

features
\begin_inset Quotes erd
\end_inset

) used in GIS-based data processing.
 The primary goals of this software's design are flexibility, robustness
 and high quality of output data.
 Although good data processing requires a rigorous approach to quality control,
 there is no need for the 
\emph on
Survey2GIS
\emph default
 user/surveyor to follow one specific surveying method.
 Instead, one of several basic processing modes may be chosen and the structure
 of the survey data may be adapted in various ways to suit individual needs.
\end_layout

\begin_layout Standard
\begin_inset Box Boxed
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
thickness "0.4pt"
separation "3pt"
shadowsize "4pt"
framecolor "black"
backgroundcolor "none"
status open

\begin_layout Plain Layout
Note: The GIS vector model, even though it may be capable of storing and
 visualizing 3D coordinates, is not a real 3D model.
 Most importantly, GIS use a basic top-down 2D model to represent vectorial
 layers and the topological relationships (
\begin_inset Quotes eld
\end_inset

overlaps
\begin_inset Quotes erd
\end_inset

, 
\begin_inset Quotes eld
\end_inset

contains
\begin_inset Quotes erd
\end_inset

, 
\begin_inset Quotes eld
\end_inset

borders
\begin_inset Quotes erd
\end_inset

, etc.) between objects/features.
 This means that GIS are 
\emph on
not
\emph default
 well-suited for accurately representing real-world objects with pronounced
 vertical structuring, such as complex buildings.
 The intended use case for 
\emph on
Survey2GIS
\emph default
 is 
\emph on
topological
\emph default
 surveying, i.
\begin_inset space \thinspace{}
\end_inset

e.
 measuring points, linear structures and areas on the terrain surface.
 Some limited support for 
\begin_inset Quotes eld
\end_inset

vertical
\begin_inset Quotes erd
\end_inset

 data, to be used in 2D GIS, is available (see 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Planum-and-profile"
plural "false"
caps "false"
noprefix "false"

\end_inset

).
\end_layout

\end_inset


\end_layout

\begin_layout Subsection
Provided functionality
\end_layout

\begin_layout Standard
The following functionality is currently provided by 
\emph on
Survey2GIS
\emph default
:
\end_layout

\begin_layout Itemize
Line-wise reading of point coordinate measurements and encoded attribute
 data from one or more input text files.
\end_layout

\begin_layout Itemize
Multiplexing of point readings into geometric objects (line strings and
 polygons).
\end_layout

\begin_layout Itemize
Freely definable fields (schema) for storing attribute data in the GIS output
 data.
\end_layout

\begin_layout Itemize
Detailed validation and recording (protocol) of all measurements and their
 processing, including topological cleaning.
\end_layout

\begin_layout Itemize
Merging of all input files and export of geometry and attribute data into
 standard GIS file formats.
\end_layout

\begin_layout Itemize
Re-orientation and reprojection of coordinate data.
\end_layout

\begin_layout Standard
Some of the software's noteworthy features are:
\end_layout

\begin_layout Itemize
Open source and freely available.
 No proprietary technology, no annoying copy protection or usage restrictions.
\end_layout

\begin_layout Itemize
Runs under Linux, Mac OS X (macOS) and Windows operating systems.
\end_layout

\begin_layout Itemize
Minimal hardware requirements; ideal for use on small field laptops.
\end_layout

\begin_layout Itemize
Can be used through the command line or a graphical user interface (GUI).
\end_layout

\begin_layout Itemize
Processes and produces 2D or 3D data.
\end_layout

\begin_layout Itemize
Simple to translate into any language, including different numeric notations
 (decimal point and grouping characters).
 The software can always be switched back to 
\begin_inset Quotes eld
\end_inset

English
\begin_inset Quotes erd
\end_inset

 for use in multi-lingual environments.
\end_layout

\begin_layout Itemize
Freely definable parser schema allows to adjust the processing for any input
 data field structure.
\end_layout

\begin_layout Itemize
Processing of several input data files at the same time and merging of their
 data into a single output file.
\end_layout

\begin_layout Itemize
Complete recording of all hints, warnings and error message issued during
 processing; on screen and into a text file.
\end_layout

\begin_layout Itemize
Invalid input data will be discarded from the output, but processing will
 continue in most cases.
\end_layout

\begin_layout Itemize
Handling of missing and 
\begin_inset Quotes eld
\end_inset

no data
\begin_inset Quotes erd
\end_inset

 records.
\end_layout

\begin_layout Itemize
Topological data validation and cleaning to produce high quality GIS data
 suitable for spatial analysis.
\end_layout

\begin_layout Subsection
Structure of input data
\end_layout

\begin_layout Standard
Input data may be supplied as one or several text files (alternatively from
 the operating system's standard 
\begin_inset Quotes eld
\end_inset

in
\begin_inset Quotes erd
\end_inset

 stream: see 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Input-and-output"
plural "false"
caps "false"
noprefix "false"

\end_inset

).
 These text files contain at least one line (record) of data, with each
 line storing the coordinates of exactly one point measurement, along with
 additional attribute data (identifiers, custom object codes, etc.).
 Attribute data may be preserved or discarded in the output, according to
 the needs of the end user.
 A minimal record does, however, need at least an 
\emph on
X
\emph default
 and a 
\emph on
Y
\emph default
 coordinate value.
\end_layout

\begin_layout Standard
There is no provision in 
\emph on
Survey2GIS
\emph default
 for handling various legacy text encodings, such as DOS and Windows 
\begin_inset Quotes eld
\end_inset

codepages
\begin_inset Quotes erd
\end_inset

 or extended ASCII tables.
 This software assumes that input text is either plain ASCII or UTF-8 encoded.
 The user must take care that any software used to further process the data
 produced by 
\emph on
Survey2GIS
\emph default
 can correctly interpret the text encoding (see 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Handling-special-(accent)"

\end_inset

 for more on this topic).
\end_layout

\begin_layout Subsection
Installation
\end_layout

\begin_layout Standard
There is no installation routine in the form of a 
\begin_inset Quotes eld
\end_inset

setup
\begin_inset Quotes erd
\end_inset

 program.
 Simply locate the version for your operating system in the 
\begin_inset Quotes eld
\end_inset

bin
\begin_inset Quotes erd
\end_inset

 folder and run it.
 There is a 
\begin_inset Quotes eld
\end_inset

README
\begin_inset Quotes erd
\end_inset

 file for each operating system that contains further details.
\end_layout

\begin_layout Standard
Users who do not wish to use proprietary software to download data from
 their survey devices may find 
\emph on
TotalOpenStation
\emph default
 (
\begin_inset Flex URL
status collapsed

\begin_layout Plain Layout

http://tops.iosa.it
\end_layout

\end_inset

), a free tool for serial communication with selected total stations and
 GPS models, a useful companion to 
\emph on
Survey2GIS
\emph default
.
\end_layout

\begin_layout Standard
Windows users should also consider installing a capable text editor (such
 as 
\emph on
NotePad++
\emph default
: 
\begin_inset Flex URL
status collapsed

\begin_layout Plain Layout

http://notepad-plus-plus.org
\end_layout

\end_inset

), to facilitate the manual editing and cleaning of large data and log files.
\end_layout

\begin_layout Subsection
Basic usage
\end_layout

\begin_layout Standard
This software may be used from the command line or through a graphical user
 interface (GUI).
 The same capabilities are available in both modes.
 The GUI is described further in section 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Graphische-Benutzeroberfläche-(G"

\end_inset

.
 To use 
\emph on
Survey2GIS
\emph default
 from the Windows command line, start 
\emph on
cmd.exe
\emph default
 first, then change into the folder where the software resides (replace
 all items in pointed brackets 
\begin_inset Quotes eld
\end_inset

<>
\begin_inset Quotes erd
\end_inset

 with the actual path entries), by typing:
\end_layout

\begin_layout LyX-Code
cd /D <drive>:
\backslash
<survey2gis folder>
\end_layout

\begin_layout Standard
For a first test run, create a folder named 
\begin_inset Quotes eld
\end_inset

output
\begin_inset Quotes erd
\end_inset

 within the the program's folder (or another convenient location with write
 access).
 The data produced by 
\emph on
Survey2GIS
\emph default
 will be written into this folder.
 In addition, copy the files 
\begin_inset Quotes eld
\end_inset

parser_desc_end.txt
\begin_inset Quotes erd
\end_inset

 and 
\begin_inset Quotes eld
\end_inset

sample_data_end.dat
\begin_inset Quotes erd
\end_inset

 from the 
\begin_inset Quotes eld
\end_inset

samples
\begin_inset Quotes erd
\end_inset

 subfolder (shipped as part of the 
\emph on
Survey2GIS
\emph default
 package) into the installation folder.
 The software can then be run by issuing the following command:
\end_layout

\begin_layout LyX-Code
survey2gis -p parser_desc_end.txt -o output -n test_data sample_data_end.dat
\end_layout

\begin_layout Standard
Details of the above command line:
\end_layout

\begin_layout Itemize
Option 
\emph on
-p
\emph default
 (
\emph on
parser
\emph default
) specifies the file that has the information about the input data's structure
 (schema).
 Details about the syntax of this file can be found in section 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Einstellungen-fuer-Parser]"

\end_inset

.
\end_layout

\begin_layout Itemize
Option 
\emph on
-o
\emph default
 (
\emph on
output
\emph default
) specifies the folder into which all output files will be written.
 In this example, its name happens to be 
\begin_inset Quotes eld
\end_inset

output
\begin_inset Quotes erd
\end_inset

, as well.
 The default for 
\emph on
Survey2GIS
\emph default
 is to write the data in 
\emph on
Shapefile
\emph default
 format (see 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Ausgabeformate"
plural "false"
caps "false"
noprefix "false"

\end_inset

 for choices).
\end_layout

\begin_layout Itemize
Option 
\emph on
-n
\emph default
 (
\emph on
name
\emph default
) specifies the user-definable (base) part of the output files' names.
 E.
\begin_inset space \thinspace{}
\end_inset

g.
 in the case of Shapefiles, there will be several output files, with the
 extensions 
\begin_inset Quotes pld
\end_inset

.shp
\begin_inset Quotes prd
\end_inset

, 
\emph on

\begin_inset Quotes pld
\end_inset

.
\emph default
shx
\begin_inset Quotes prd
\end_inset

 and 
\begin_inset Quotes pld
\end_inset

.dbf
\begin_inset Quotes prd
\end_inset

 added to the base name (see 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:ESRI-Shapefile-(SHP/SHX/DBF)"

\end_inset

).
\end_layout

\begin_layout Itemize
The final item specified on the command line is not an option, but the name
 of an input file.
 The file 
\begin_inset Quotes pld
\end_inset

sample_data_end.dat
\begin_inset Quotes prd
\end_inset

 contains one simple survey dataset with point, line and polygon records.
 This is a plain text file that can be viewed and edited using any text
 editor.
 It would be possible to specify further input file names on the command
 lines.
 The contents of all input files would then be merged by 
\emph on
Survey2GIS
\emph default
 and written to just one output dataset.
\end_layout

\begin_layout Standard
The result of the above command line should be three Shapefile sets containing
 the point, line and polygon records from 
\begin_inset Quotes eld
\end_inset

sample_data_end.dat
\begin_inset Quotes erd
\end_inset

 respectively.
\end_layout

\begin_layout Standard
A summary of all command line options is available via the option 
\emph on
-h
\emph default
 (
\emph on
help
\emph default
):
\end_layout

\begin_layout LyX-Code
survey2gis -h
\end_layout

\begin_layout Standard
A detailed discussion of all options is available in section 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Programmoptionenl"

\end_inset

.
\end_layout

\begin_layout Standard
\begin_inset Newpage newpage
\end_inset


\end_layout

\begin_layout Section
Program startup and options
\begin_inset CommandInset label
LatexCommand label
name "sec:Programmoptionenl"

\end_inset


\end_layout

\begin_layout Standard
The software is controlled by a number of options that can either be stated
 on the command line (started via 
\emph on
cmd.exe
\emph default
 on Windows systems), as described in this section, or through a graphical
 user interface (GUI), as described in section 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Graphische-Benutzeroberfläche-(G"

\end_inset

.
 Both interfaces offer the same level of control.
\end_layout

\begin_layout Standard
On the command line, the name of the executable program (
\begin_inset Quotes eld
\end_inset

survey2gis
\begin_inset Quotes erd
\end_inset

) is followed by the names (or abbreviations) of one or more options, each
 of them in turn followed by user-specified option values (=settings).
 Finally, a list of input files is supplied on the same line.
 All option and input file specifications must be separated from each other
 by a space character.
\end_layout

\begin_layout Standard
Starting the software with the option 
\begin_inset Quotes eld
\end_inset

-h
\begin_inset Quotes erd
\end_inset

 (for 
\begin_inset Quotes eld
\end_inset

help
\begin_inset Quotes erd
\end_inset

, note the space preceding the option name):
\end_layout

\begin_layout LyX-Code
survey2gis -h
\end_layout

\begin_layout Standard
\SpecialChar ldots
 will display a summary description of the software and its options on the
 screen (much shortened here; actual display may differ):
\end_layout

\begin_layout LyX-Code

\size small
Usage: survey2gis -p FILE -o DIR -n NAME [OPTION]...
 [FILE]...
\end_layout

\begin_layout LyX-Code

\size small
Read geometry and attribute descriptions from a survey protocol file
\end_layout

\begin_layout LyX-Code

\size small
in ASCII format and convert them to common GIS and CAD output formats.
\end_layout

\begin_layout LyX-Code
 
\end_layout

\begin_layout LyX-Code

\size small
Possible OPTIONs are:
\end_layout

\begin_layout LyX-Code

\size small
  -p, --parser=         name of file with parsing schema (required)
\end_layout

\begin_layout LyX-Code

\size small
  -o, --output=         directory name for output file(s) (required)
\end_layout

\begin_layout LyX-Code

\size small
  -n, --name=           base name for output file(s) (required)
\end_layout

\begin_layout LyX-Code

\size small
  -f, --format=         output format (see list below; default: "shp")
\end_layout

\begin_layout LyX-Code

\size small
                        "shp" (Esri Shapefile)
\end_layout

\begin_layout LyX-Code

\size small
                        "dxf" (AutoCAD Drawing Exchange Format)
\end_layout

\begin_layout LyX-Code
                    
\size small
  "geojson" (GeoJSON Object)
\end_layout

\begin_layout LyX-Code

\size small
                        "kml" (Keyhole Markup Language)
\end_layout

\begin_layout LyX-Code

\size small
  -L, --label=          choose field for labels (see manual for details)
\end_layout

\begin_layout LyX-Code

\size small
      --label-mode-point= label mode for points (default: "center")
\end_layout

\begin_layout LyX-Code

\size small
      --label-mode-line= label mode for lines (default: "center")
\end_layout

\begin_layout LyX-Code

\size small
      --label-mode-poly= label mode for polygons (default: "center")
\end_layout

\begin_layout LyX-Code

\size small
                        "center" (Place at center of geometry)
\end_layout

\begin_layout LyX-Code

\size small
                        "first" (Place on first vertex)
\end_layout

\begin_layout LyX-Code

\size small
                        "last" (Place on last vertex)
\end_layout

\begin_layout LyX-Code

\size small
                        "none" (Do not label)
\end_layout

\begin_layout LyX-Code

\size small
  \SpecialChar ldots

\end_layout

\begin_layout Standard
\begin_inset Newpage pagebreak
\end_inset


\end_layout

\begin_layout Standard
A minimal command line for running 
\emph on
Survey2GIS
\emph default
 to process some actual data must include:
\end_layout

\begin_layout Itemize
The specification of a parser schema file (see 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Parser-Schemata"

\end_inset

) with option 
\begin_inset Quotes eld
\end_inset

-p
\emph on

\begin_inset Quotes erd
\end_inset

,
\end_layout

\begin_layout Itemize
the name of an 
\emph on
existing folder
\emph default
 in the file system, where the output data is to be stored (option 
\begin_inset Quotes eld
\end_inset

-o
\begin_inset Quotes erd
\end_inset

),
\end_layout

\begin_layout Itemize
the base name for naming all output files, using option 
\begin_inset Quotes eld
\end_inset

-n
\emph on

\begin_inset Quotes erd
\end_inset

,
\end_layout

\begin_layout Itemize
and one or more input file names.
\end_layout

\begin_layout Standard
The parser schema describes the structure of the input data in detail.
 It must be supplied as a structured text file.
 Its syntax is described in detail in section 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Parser-Schemata"

\end_inset

.
\end_layout

\begin_layout Standard
Most option names have short and long spelling variants, which are equivalent.
 E.
\begin_inset space \thinspace{}
\end_inset

g.
 it makes no difference whether the parser file is specified using:
\end_layout

\begin_layout LyX-Code
-p parser.txt
\end_layout

\begin_layout Standard
or using the long option name:
\end_layout

\begin_layout LyX-Code
--parser=parser.txt
\end_layout

\begin_layout Standard
Long option names are separated from option values by an equal sign (
\begin_inset Quotes eld
\end_inset

=
\begin_inset Quotes erd
\end_inset

) and generally improve the legibility of command line statements.
\end_layout

\begin_layout Standard
The order in which options are given is of no importance, but input files
 should always be listed as the last items of the command line.
\end_layout

\begin_layout Standard
Option values and file names that include spaces (a practice that should
 generally be avoided), must be written in quotation marks.
 Otherwise they will be interpreted as separate tokens on the command line.
\end_layout

\begin_layout Standard
As an alternative, the 
\emph on
graphical user interface
\emph default
 (GUI: see 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Graphische-Benutzeroberfläche-(G"

\end_inset

) can be started by calling 
\emph on
Survey2GIS 
\emph default
without any options, or by adding the special option 
\begin_inset Quotes eld
\end_inset

--show-gui
\begin_inset Quotes erd
\end_inset

:
\end_layout

\begin_layout LyX-Code
survey2gis --show-gui
\end_layout

\begin_layout Subsection
Input and output files
\begin_inset CommandInset label
LatexCommand label
name "subsec:Input-and-output"

\end_inset


\end_layout

\begin_layout Standard
All items specified on the command line, that follow the list of options
 and option values, will be interpreted as the names of input data files.
 All input data files will be interpreted according to the parser schema
 file (specified with option 
\begin_inset Quotes eld
\end_inset

-p
\begin_inset Quotes erd
\end_inset

).
 The output data produced will be stored as files in the folder specified
 by the 
\begin_inset Quotes eld
\end_inset

-o
\begin_inset Quotes erd
\end_inset

 option.
 The output folder must exist and must allow write access.
 The current folder can be used as output folder by specifying the single
 dot (
\begin_inset Quotes eld
\end_inset

.
\begin_inset Quotes erd
\end_inset

) as folder name.
\end_layout

\begin_layout Standard
The output file format (see details in 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Ausgabeformate"

\end_inset

) is selected using option 
\begin_inset Quotes eld
\end_inset

-f
\begin_inset Quotes erd
\end_inset

.
 By default, this option's value is 
\begin_inset Quotes eld
\end_inset

shp
\begin_inset Quotes erd
\end_inset

, which causes 
\emph on
Survey2GIS
\emph default
 to produce GIS Shapefiles (see 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:ESRI-Shapefile-(SHP/SHX/DBF)"

\end_inset

).
 All input data will be merged into a common output dataset.
 The actual names and number of output files depends on the chosen format.
 For this reason, the option 
\begin_inset Quotes eld
\end_inset

-n
\begin_inset Quotes erd
\end_inset

 specifies a 
\emph on
base name
\emph default
 only, without any file extension.
 The base name will be automatically extended and file type extensions added
 as required.
\end_layout

\begin_layout Standard
\begin_inset Box Boxed
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
thickness "0.4pt"
separation "3pt"
shadowsize "4pt"
framecolor "black"
backgroundcolor "none"
status open

\begin_layout Plain Layout
Important: This also means that an existing file will be 
\emph on
overwritten automatically
\emph default
, if its name clashes with one of those produced by 
\emph on
Survey2GIS
\emph default
!
\end_layout

\end_inset


\end_layout

\begin_layout Standard
The minus (
\begin_inset Quotes eld
\end_inset

-
\begin_inset Quotes erd
\end_inset

) character has a special purpose.
 If it is given instead of a file name, then 
\emph on
Survey2GIS
\emph default
 will wait for input data to arrive through the operating system's standard
 input stream.
 On Mac OS X (macOS) and Linux systems, this stream is known as 
\emph on
stdin.
 
\emph default
By default, it is linked with the keyboard input stream, so that the user
 may directly type input data to be forwarded to 
\emph on
Survey2GIS
\emph default
.
 To complete keyboard input, the user has to type the special sequence 
\begin_inset Quotes eld
\end_inset

^Z
\begin_inset Quotes erd
\end_inset

 on Windows systems (press keys 
\begin_inset Quotes eld
\end_inset

CTRL
\begin_inset Quotes erd
\end_inset

 and 
\begin_inset Quotes erd
\end_inset

Z
\begin_inset Quotes erd
\end_inset

 simultaneously), and 
\begin_inset Quotes eld
\end_inset

^C
\begin_inset Quotes erd
\end_inset

 (
\begin_inset Quotes eld
\end_inset

CTRL
\begin_inset Quotes erd
\end_inset

 and 
\begin_inset Quotes eld
\end_inset

C
\begin_inset Quotes erd
\end_inset

) on Mac OS X and Linux, on an otherwise blank line.
\end_layout

\begin_layout Subsection
Language settings
\begin_inset CommandInset label
LatexCommand label
name "subsec:Spracheinstellungen"

\end_inset


\end_layout

\begin_layout Standard
All messages and GUI elements of 
\emph on
Survey2GIS
\emph default
 are 
\begin_inset Quotes eld
\end_inset

internationalized
\begin_inset Quotes erd
\end_inset

.
 On startup, 
\emph on
Survey2GIS
\emph default
 will check the language settings of the operating system on which it is
 running and display messages in the system's language, provided that a
 matching translation is available.
 If no translation exists, then 
\emph on
Survey2GIS
\emph default
 will fall back to English.
 In any case, option 
\begin_inset Quotes eld
\end_inset

-e
\begin_inset Quotes erd
\end_inset

 will force 
\emph on
Survey2GIS
\emph default
 to run in English mode, disregarding any operating system settings.
\end_layout

\begin_layout Standard
Internationalization also includes different numerical notations.
 E.
\begin_inset space \thinspace{}
\end_inset

g.
 the number 
\begin_inset Quotes eld
\end_inset

tenthousandpointzero
\begin_inset Quotes erd
\end_inset

 would be written like this in a German or Dutch environment:
\end_layout

\begin_layout LyX-Code
10.000,00
\end_layout

\begin_layout Standard
Whereas in an English speaking location, it would be:
\end_layout

\begin_layout LyX-Code
10,000.00
\end_layout

\begin_layout Standard
The numerical notation, including representations of the decimal point and
 grouping character, will be set to the 
\emph on
English standard
\emph default
 by default, as this is how most hardware produces output.
 However, 
\emph on
Survey2GIS
\emph default
 offers settings for the specification of decimal point and grouping characters
 (using options 
\begin_inset Quotes eld
\end_inset

-i
\begin_inset Quotes erd
\end_inset

 and 
\begin_inset Quotes eld
\end_inset

-g
\begin_inset Quotes erd
\end_inset

, respectively).
\end_layout

\begin_layout Standard
\begin_inset Box Boxed
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
thickness "0.4pt"
separation "3pt"
shadowsize "4pt"
framecolor "black"
backgroundcolor "none"
status open

\begin_layout Plain Layout
It is of crucial importance that the numerical notation is correctly set
 to that of the 
\emph on
input data
\emph default
.
 Many devices and programs use English notation by default.
 Typical symptoms of a mismatch include wrongly placed geometries in the
 output data, as well as stepped and deformed line segments and polygon
 boundaries.
\end_layout

\end_inset

 
\begin_inset Newpage pagebreak
\end_inset


\end_layout

\begin_layout Subsection
List of options
\begin_inset CommandInset label
LatexCommand label
name "subsec:List-of-options"

\end_inset


\end_layout

\begin_layout Standard
The following is a complete but terse description of all options accepted
 b
\emph on
y Survey2GIS
\emph default
.
 Links to more details on how these options influence processing are provided
 where appropriate.
 Options are listed in the same order in which they appear in the command
 line usage summary (invoked by running 
\begin_inset Quotes eld
\end_inset

survey2gis --help
\begin_inset Quotes erd
\end_inset

).
\end_layout

\begin_layout Standard
\begin_inset CommandInset line
LatexCommand rule
offset "0.5ex"
width "100col%"
height "1pt"

\end_inset


\end_layout

\begin_layout Standard
Option: 
\series bold
-p
\series default
, --parser=
\end_layout

\begin_layout Standard
Meaning: Complete path and name of the file that contains the parser schema
 for processing all input data (see 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Parser-Schemata"

\end_inset

).
\end_layout

\begin_layout Standard
Example:
\end_layout

\begin_layout LyX-Code
-p C:
\backslash
Users
\backslash
Me
\backslash
parser.txt
\end_layout

\begin_layout Standard
\begin_inset CommandInset line
LatexCommand rule
offset "0.5ex"
width "100col%"
height "1pt"

\end_inset


\end_layout

\begin_layout Standard
Option: 
\series bold
-o
\series default
, --output=
\end_layout

\begin_layout Standard
Meaning: Complete path and name of the folder in which to store all output
 data.
\end_layout

\begin_layout Standard
Example:
\end_layout

\begin_layout LyX-Code
-o c:
\backslash
Data
\end_layout

\begin_layout Standard
\begin_inset CommandInset line
LatexCommand rule
offset "0.5ex"
width "100col%"
height "1pt"

\end_inset


\end_layout

\begin_layout Standard
Option: 
\series bold
-n
\series default
, --name=
\end_layout

\begin_layout Standard
Meaning: Base name (no extension) for all output file(s).
 The files will be stored in the folder specified by 
\begin_inset Quotes eld
\end_inset

-o
\begin_inset Quotes erd
\end_inset

 (see above).
\end_layout

\begin_layout Standard
Example:
\end_layout

\begin_layout LyX-Code
-n output
\end_layout

\begin_layout Standard
\begin_inset CommandInset line
LatexCommand rule
offset "0.5ex"
width "100col%"
height "1pt"

\end_inset


\end_layout

\begin_layout Standard
Option: 
\series bold
-f, 
\series default
--format=
\end_layout

\begin_layout Standard
Meaning: Name of the format in which to store the output data (default:
 
\begin_inset Quotes eld
\end_inset

shp
\begin_inset Quotes erd
\end_inset

).
\end_layout

\begin_layout Standard
Remarks: The help text displayed via option 
\begin_inset Quotes eld
\end_inset

-h
\begin_inset Quotes erd
\end_inset

 contains the complete list of possible formats (see also 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Ausgabeformate"

\end_inset

).
 
\end_layout

\begin_layout Standard
Example:
\end_layout

\begin_layout LyX-Code
-f shp
\end_layout

\begin_layout Standard
\begin_inset CommandInset line
LatexCommand rule
offset "0.5ex"
width "100col%"
height "1pt"

\end_inset


\end_layout

\begin_layout Standard
Option: 
\series bold
-L, 
\series default
label=
\end_layout

\begin_layout Standard
Meaning: Specify the name of a 
\emph on
field 
\emph default
(see 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Einstellungen-für-[Field]"

\end_inset

) to use for creating a special labels layer.
 See section 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Planum-and-profile"

\end_inset

 for details.
\end_layout

\begin_layout Standard
Example:
\end_layout

\begin_layout LyX-Code
-L level
\end_layout

\begin_layout Standard
\begin_inset CommandInset line
LatexCommand rule
offset "0.5ex"
width "100col%"
height "1pt"

\end_inset


\end_layout

\begin_layout Standard
Option: --label-mode-point=
\end_layout

\begin_layout Standard
Meaning: Specify where to place labels for 
\emph on
point
\emph default
 geometries.
 Valid choices are: 
\begin_inset Quotes eld
\end_inset

center
\begin_inset Quotes erd
\end_inset

 (default), 
\begin_inset Quotes eld
\end_inset

first
\begin_inset Quotes erd
\end_inset

, 
\begin_inset Quotes eld
\end_inset

last
\begin_inset Quotes erd
\end_inset

 and 
\begin_inset Quotes eld
\end_inset

none.
\end_layout

\begin_layout Standard
Remarks: Only 
\begin_inset Quotes eld
\end_inset

none
\begin_inset Quotes erd
\end_inset

 will have a real effect in the case of point geometries.
 See section 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Labels"

\end_inset

 for details.
\end_layout

\begin_layout Standard
Example:
\end_layout

\begin_layout LyX-Code
--label-mode-point=none
\end_layout

\begin_layout Standard
\begin_inset CommandInset line
LatexCommand rule
offset "0.5ex"
width "100col%"
height "1pt"

\end_inset


\end_layout

\begin_layout Standard
Option: --label-mode-line=
\end_layout

\begin_layout Standard
Meaning: Specify where to place labels for 
\emph on
line
\emph default
 geometries.
 Valid choices are: 
\begin_inset Quotes eld
\end_inset

center
\begin_inset Quotes erd
\end_inset

 (default), 
\begin_inset Quotes eld
\end_inset

first
\begin_inset Quotes erd
\end_inset

, 
\begin_inset Quotes eld
\end_inset

last
\begin_inset Quotes erd
\end_inset

 and 
\begin_inset Quotes eld
\end_inset

none.
 See section 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Labels"

\end_inset

 for details.
\end_layout

\begin_layout Standard
Example:
\end_layout

\begin_layout LyX-Code
--label-mode-line=center
\end_layout

\begin_layout Standard
\begin_inset CommandInset line
LatexCommand rule
offset "0.5ex"
width "100col%"
height "1pt"

\end_inset


\end_layout

\begin_layout Standard
Option: --label-mode-poly=
\end_layout

\begin_layout Standard
Meaning: Specify where to place labels for 
\emph on
polygon
\emph default
 geometries.
 Valid choices are: 
\begin_inset Quotes eld
\end_inset

center
\begin_inset Quotes erd
\end_inset

 (default), 
\begin_inset Quotes eld
\end_inset

first
\begin_inset Quotes erd
\end_inset

, 
\begin_inset Quotes eld
\end_inset

last
\begin_inset Quotes erd
\end_inset

 and 
\begin_inset Quotes eld
\end_inset

none.
 See section 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Labels"

\end_inset

 for details.
\end_layout

\begin_layout Standard
Example:
\end_layout

\begin_layout LyX-Code
--label-mode-poly=center
\end_layout

\begin_layout Standard
\begin_inset CommandInset line
LatexCommand rule
offset "0.5ex"
width "100col%"
height "1pt"

\end_inset


\end_layout

\begin_layout Standard
Option: 
\series bold
-O, 
\series default
--orientation=
\end_layout

\begin_layout Standard
Meaning: Sets the 
\emph on
orientation
\emph default
 of the output data's coordiante axes.
 The default orientation mode is 
\begin_inset Quotes eld
\end_inset

world
\begin_inset Quotes erd
\end_inset

 which does not modify the coordinate data.
 See section 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Planum-and-profile"

\end_inset

 for details.
\end_layout

\begin_layout Standard
Example:
\end_layout

\begin_layout LyX-Code
-O localxz
\end_layout

\begin_layout Standard
\begin_inset CommandInset line
LatexCommand rule
offset "0.5ex"
width "100col%"
height "1pt"

\end_inset


\end_layout

\begin_layout Standard
Option: 
\series bold
-S, 
\series default
--selection=
\end_layout

\begin_layout Standard
Meaning: Specify a 
\emph on
selection command
\emph default
 to reduce the input data to only those records that pass the selection
 criteria.
 It is possible to specify one or more selections, each one via a separate
 
\begin_inset Quotes eld
\end_inset

--selection=
\begin_inset Quotes erd
\end_inset

 option.
 The selections will be applied in the same order in which they are specified.
 See section 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:selections"

\end_inset

 for details.
\end_layout

\begin_layout Standard
Remarks: Note that this option's shortcut is a 
\emph on
capital
\emph default
 
\begin_inset Quotes eld
\end_inset

-S
\begin_inset Quotes erd
\end_inset

, while 
\begin_inset Quotes eld
\end_inset

-s
\begin_inset Quotes erd
\end_inset

 is the shortcut for the 
\begin_inset Quotes eld
\end_inset

--snapping=
\begin_inset Quotes erd
\end_inset

 option (see below).
 
\end_layout

\begin_layout Standard
Example:
\end_layout

\begin_layout LyX-Code
-S objdesc:all:EQ:Boundary
\end_layout

\begin_layout Standard
\begin_inset CommandInset line
LatexCommand rule
offset "0.5ex"
width "100col%"
height "1pt"

\end_inset


\end_layout

\begin_layout Standard
Option: 
\series bold
-T, 
\series default
--topology=
\end_layout

\begin_layout Standard
Meaning: Determines which topological cleaning functions to run on the input
 data (see 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Topologische-Säuberung"
plural "false"
caps "false"
noprefix "false"

\end_inset

).
 Possible choice are 
\begin_inset Quotes eld
\end_inset

none
\begin_inset Quotes erd
\end_inset

, 
\begin_inset Quotes eld
\end_inset

basic
\begin_inset Quotes erd
\end_inset

 and 
\begin_inset Quotes eld
\end_inset

full
\begin_inset Quotes erd
\end_inset

 (default).
 An explanation of these choices is given in section 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Problems-and-corrections"
plural "false"
caps "false"
noprefix "false"

\end_inset

.
\end_layout

\begin_layout Standard
Remarks: Note that this option's shortcut is a 
\emph on
capital
\emph default
 
\begin_inset Quotes eld
\end_inset

-T
\begin_inset Quotes erd
\end_inset

, while 
\begin_inset Quotes eld
\end_inset

-t
\begin_inset Quotes erd
\end_inset

 is the shortcut for the 
\begin_inset Quotes eld
\end_inset

--tolerance=
\begin_inset Quotes erd
\end_inset

 option (see below).
 
\end_layout

\begin_layout Standard
Example:
\end_layout

\begin_layout LyX-Code
-T basic
\end_layout

\begin_layout Standard
\begin_inset CommandInset line
LatexCommand rule
offset "0.5ex"
width "100col%"
height "1pt"

\end_inset


\end_layout

\begin_layout Standard
Option: 
\series bold
-l
\series default
, --log=
\end_layout

\begin_layout Standard
Meaning: Stores all processing messages displayed by 
\emph on
survey2gis
\emph default
 in the specified file.
\end_layout

\begin_layout Standard
Example:
\end_layout

\begin_layout LyX-Code
-l C:
\backslash
Users
\backslash
Me
\backslash
protocol.txt
\end_layout

\begin_layout Standard
\begin_inset CommandInset line
LatexCommand rule
offset "0.5ex"
width "100col%"
height "1pt"

\end_inset


\end_layout

\begin_layout Standard
Option: 
\series bold
-t
\series default
, --tolerance=
\end_layout

\begin_layout Standard
Meaning: Sets the threshold for the distance of individual point measurements.
 Measurements that are spaced below this distance from each other will be
 regarded as duplicate (see 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Doppelte-Stützpunkte"

\end_inset

).
\end_layout

\begin_layout Standard
Example:
\end_layout

\begin_layout LyX-Code
-t 0.05
\end_layout

\begin_layout Standard
\begin_inset CommandInset line
LatexCommand rule
offset "0.5ex"
width "100col%"
height "1pt"

\end_inset


\end_layout

\begin_layout Standard
Option: 
\series bold
-
\size small
s
\series default
\size default
, --snapping=
\end_layout

\begin_layout Standard
Meaning: Sets the threshold for snapping of vertices that constitute polygon
 boundaries.
 Snapped vertices will be moved so that they are placed exactly on nearby
 vertices off neighbouring polygon boundaries.
 The maximum distance up to which snapping is performed is specified by
 this option (see 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Gemeinsame-Grenzen"

\end_inset

 for details).
 Setting this option to 
\begin_inset Quotes eld
\end_inset

0
\begin_inset Quotes erd
\end_inset

 (default) will disable boundary vertex snapping.
\end_layout

\begin_layout Standard
Example:
\end_layout

\begin_layout LyX-Code
-s 0.05
\end_layout

\begin_layout Standard
\begin_inset CommandInset line
LatexCommand rule
offset "0.5ex"
width "100col%"
height "1pt"

\end_inset


\end_layout

\begin_layout Standard
Option: 
\series bold
-
\size small
D
\series default
\size default
, --dangling=
\end_layout

\begin_layout Standard
Meaning: Sets the threshold for snapping of vertices that constitute the
 first and last vertices (also called 
\begin_inset Quotes eld
\end_inset

nodes
\begin_inset Quotes erd
\end_inset

) of lines.
 Snapped line nodes will be moved to the closest vertex or segment on a
 nearby line or polygon boundary.
 This process is also known as 
\emph on
overshoot
\emph default
 (node is located behind the segment on which it should lie) and 
\emph on
undershoot
\emph default
 (node is located before the segment on which it should lie) correction
 of so-called 
\begin_inset Quotes eld
\end_inset

dangles
\begin_inset Quotes erd
\end_inset

 (see 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Dangling-line-ends"

\end_inset

 for details).
 The maximum distance up to which node snapping happens is specified by
 this option.
 Setting this option to 
\begin_inset Quotes eld
\end_inset

0
\begin_inset Quotes erd
\end_inset

 (default) will disable line node snapping.
\end_layout

\begin_layout Standard
Remarks: Note that this option's shortcut is a 
\emph on
capital
\emph default
 
\begin_inset Quotes eld
\end_inset

-D
\begin_inset Quotes erd
\end_inset

, while 
\begin_inset Quotes eld
\end_inset

-d
\begin_inset Quotes erd
\end_inset

 is the shortcut for the 
\begin_inset Quotes eld
\end_inset

--decimal-places=
\begin_inset Quotes erd
\end_inset

 option (see below).
 
\end_layout

\begin_layout Standard
Example:
\end_layout

\begin_layout LyX-Code
-D 0.05
\end_layout

\begin_layout Standard
\begin_inset CommandInset line
LatexCommand rule
offset "0.5ex"
width "100col%"
height "1pt"

\end_inset


\end_layout

\begin_layout Standard
Option: 
\series bold
-x
\series default
, --x-offset=
\end_layout

\begin_layout Standard
Meaning: Specifies a constant offset to be added to all 
\emph on
X
\emph default
 coordinates.
\end_layout

\begin_layout Standard
Remarks: This may be useful if e.
\begin_inset space \thinspace{}
\end_inset

g.
 UTM coordinates have been recorded without the first two digits.
 Please note that the attribute table of the output data will always store
 the original values, without the offset! If the transformed values should
 also be stored in the attribute table, then the appropriate GIS tools (
\begin_inset Quotes eld
\end_inset

field calculator
\begin_inset Quotes erd
\end_inset

 or similar) must be used directly after data import to add the offset to
 the field values.
\end_layout

\begin_layout Standard
Example:
\end_layout

\begin_layout LyX-Code
-x 100000
\end_layout

\begin_layout Standard
\begin_inset CommandInset line
LatexCommand rule
offset "0.5ex"
width "100col%"
height "1pt"

\end_inset


\end_layout

\begin_layout Standard
Option: 
\series bold
-y
\series default
, --y-offset=
\end_layout

\begin_layout Standard
Meaning: see above (-x, --x-offset=).
\end_layout

\begin_layout Standard
Example:
\end_layout

\begin_layout LyX-Code
-y 100000
\end_layout

\begin_layout Standard
\begin_inset CommandInset line
LatexCommand rule
offset "0.5ex"
width "100col%"
height "1pt"

\end_inset


\end_layout

\begin_layout Standard
Option: 
\series bold
-z
\series default
, --z-offset=
\end_layout

\begin_layout Standard
Meaning: see above (-x, --x-offset=).
\end_layout

\begin_layout Standard
Example:
\end_layout

\begin_layout LyX-Code
-z 100000
\end_layout

\begin_layout Standard
\begin_inset CommandInset line
LatexCommand rule
offset "0.5ex"
width "100col%"
height "1pt"

\end_inset


\end_layout

\begin_layout Standard
Option: 
\series bold
-d
\series default
, --decimal-places=
\end_layout

\begin_layout Standard
Meaning: Specifies the number of decimal places (precision) with which numerical
 values will be stored in the attribute fields of the output data.
 For survey data in meters, a setting of 
\begin_inset Quotes eld
\end_inset

2
\begin_inset Quotes erd
\end_inset

 means centimeter precision.
 The precision of coordinate storage is not influenced by this.
 The default is 
\begin_inset Quotes eld
\end_inset

3
\begin_inset Quotes erd
\end_inset

.
\end_layout

\begin_layout Standard
Example:
\end_layout

\begin_layout LyX-Code
-d 3
\end_layout

\begin_layout Standard
\begin_inset CommandInset line
LatexCommand rule
offset "0.5ex"
width "100col%"
height "1pt"

\end_inset


\end_layout

\begin_layout Standard
Option: 
\series bold
-i
\series default
, --decimal-point=
\end_layout

\begin_layout Standard
Meaning: Specifies the character used for representing the decimal point
 in the 
\emph on
input data
\emph default
 (see 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Spracheinstellungen"

\end_inset

).
\end_layout

\begin_layout Standard
Example:
\end_layout

\begin_layout LyX-Code
-i .
\end_layout

\begin_layout Standard
\begin_inset CommandInset line
LatexCommand rule
offset "0.5ex"
width "100col%"
height "1pt"

\end_inset


\end_layout

\begin_layout Standard
Option: 
\series bold
-g
\series default
, --decimal-group=
\end_layout

\begin_layout Standard
Meaning: Specifies the grouping character used for formatting large numbers
 in the 
\emph on
input data
\emph default
 (see 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Spracheinstellungen"

\end_inset

).
\end_layout

\begin_layout Standard
Example:
\end_layout

\begin_layout LyX-Code
-g ,
\end_layout

\begin_layout Standard
\begin_inset CommandInset line
LatexCommand rule
offset "0.5ex"
width "100col%"
height "1pt"

\end_inset


\end_layout

\begin_layout Standard
Option: 
\series bold
\size small
-r
\series default
\size default
, --raw-data
\end_layout

\begin_layout Standard
Meaning: If this option is given, then 
\emph on
survey2gis
\emph default
 will produce an additional output dataset that preserves all individual
 point measurements of the original survey (i.
\begin_inset space \thinspace{}
\end_inset

e.
 before the data was multiplexed into lines and polygons).
\end_layout

\begin_layout Standard
Note: The 
\begin_inset Quotes eld
\end_inset

raw
\begin_inset Quotes erd
\end_inset

 output will 
\emph on
not include
\emph default
 vertices that have been removed during topological cleaning, because they
 are spaced too closely to another vertex (see 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Topologische-Säuberung"

\end_inset

).
 To also preserve such vertices, set the option 
\begin_inset Quotes eld
\end_inset

--tolerance=
\begin_inset Quotes erd
\end_inset

 (see above) to a negative value.
 In parser mode 
\begin_inset Quotes eld
\end_inset

None
\begin_inset Quotes erd
\end_inset

 (see 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Geometriemarkierungenl"

\end_inset

), the 
\begin_inset Quotes eld
\end_inset

raw
\begin_inset Quotes erd
\end_inset

 output will be identical to the regular output.
\end_layout

\begin_layout Standard
Example:
\end_layout

\begin_layout LyX-Code
-r
\end_layout

\begin_layout Standard
\begin_inset CommandInset line
LatexCommand rule
offset "0.5ex"
width "100col%"
height "1pt"

\end_inset


\end_layout

\begin_layout Standard
Option: 
\series bold
-
\size small
2
\series default
\size default
, --force-2d
\end_layout

\begin_layout Standard
Meaning: Force all output data to be 2D, even if the input data is 3D.
 This setting only affects the storage of the coordinate values in the output
 file(s).
 Internal processing is not affected by this setting.
\end_layout

\begin_layout Standard
Example:
\end_layout

\begin_layout LyX-Code
-s
\end_layout

\begin_layout Standard
\begin_inset CommandInset line
LatexCommand rule
offset "0.5ex"
width "100col%"
height "1pt"

\end_inset


\end_layout

\begin_layout Standard
Option: 
\series bold
-c
\series default
, --strict
\end_layout

\begin_layout Standard
Meaning: Switches the parser into a 
\begin_inset Quotes eld
\end_inset

strict
\begin_inset Quotes erd
\end_inset

 mode in whch it will discard records without a geometry marker instead
 of interpreting them as single point measurements (see 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Geometriemarkierungenl"

\end_inset

).
\end_layout

\begin_layout Standard
Example:
\end_layout

\begin_layout LyX-Code
-c
\end_layout

\begin_layout Standard
\begin_inset CommandInset line
LatexCommand rule
offset "0.5ex"
width "100col%"
height "1pt"

\end_inset


\end_layout

\begin_layout Standard
Option: 
\series bold
-v
\series default
, --validate
\end_layout

\begin_layout Standard
Meaning: Performs a validation of the content of the parser schema (specified
 with option 
\begin_inset Quotes eld
\end_inset

-p
\begin_inset Quotes erd
\end_inset

).
 The schema file's content will be checked for syntactical correctness and
 completeness, and any errors will be reported.
\end_layout

\begin_layout Standard
Example:
\end_layout

\begin_layout LyX-Code
-p parser.txt -v
\end_layout

\begin_layout Standard
\begin_inset CommandInset line
LatexCommand rule
offset "0.5ex"
width "100col%"
height "1pt"

\end_inset


\end_layout

\begin_layout Standard
Option: 
\series bold
-e
\series default
, --english
\end_layout

\begin_layout Standard
Meaning: Sets all program messages and the input data's assumed numerical
 notation to English.
\end_layout

\begin_layout Standard
Example:
\end_layout

\begin_layout LyX-Code
-e
\end_layout

\begin_layout Standard
\begin_inset CommandInset line
LatexCommand rule
offset "0.5ex"
width "100col%"
height "1pt"

\end_inset


\end_layout

\begin_layout Standard
Option: 
\series bold
-h
\series default
, --help
\end_layout

\begin_layout Standard
Meaning: Displays a help text with a synopsis of program usage and a list
 of options to the screen.
\end_layout

\begin_layout Standard
Example:
\end_layout

\begin_layout LyX-Code
-h
\end_layout

\begin_layout Standard
\begin_inset CommandInset line
LatexCommand rule
offset "0.5ex"
width "100col%"
height "1pt"

\end_inset


\end_layout

\begin_layout Standard
Option: --proj-in=
\end_layout

\begin_layout Standard
Meaning: Specify 
\emph on
given
\emph default
 spatial reference system of 
\emph on
input
\emph default
 data (internal abbreviation, EPSG code or full PROJ.4 string).
 Note that PROJ.4 format specifications are 
\emph on
case-sensitive
\emph default
.
 See section 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:SRS-reprojections"
plural "false"
caps "false"
noprefix "false"

\end_inset

 for details.
\end_layout

\begin_layout Standard
Example:
\end_layout

\begin_layout LyX-Code
--proj-in=epsg:31467
\end_layout

\begin_layout Standard
\begin_inset CommandInset line
LatexCommand rule
offset "0.5ex"
width "100col%"
height "1pt"

\end_inset


\end_layout

\begin_layout Standard
Option: --proj-out=
\end_layout

\begin_layout Standard
Meaning: Specify 
\emph on
intended
\emph default
 spatial reference system of 
\emph on
output
\emph default
 data (internal abbreviation, EPSG code or full PROJ.4 string).
 Note that PROJ.4 format specifications are 
\emph on
case-sensitive
\emph default
.
 See section 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:SRS-reprojections"
plural "false"
caps "false"
noprefix "false"

\end_inset

 for details.
\end_layout

\begin_layout Standard
Example:
\end_layout

\begin_layout LyX-Code
--proj-out=epsg:wgs84
\end_layout

\begin_layout Standard
\begin_inset CommandInset line
LatexCommand rule
offset "0.5ex"
width "100col%"
height "1pt"

\end_inset


\end_layout

\begin_layout Standard
Option: --proj-dx=
\end_layout

\begin_layout Standard
Meaning: Set the 
\emph on
X
\emph default
 shift factor for a datum transformation to WGS 84 from the 
\emph on
intended
\emph default
 spatial reference system of the 
\emph on
output
\emph default
 data.
 See section 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Datum-transformations"
plural "false"
caps "false"
noprefix "false"

\end_inset

 for details.
 The default is 
\begin_inset Quotes eld
\end_inset

0
\begin_inset Quotes erd
\end_inset

 which means 
\begin_inset Quotes eld
\end_inset

no 
\emph on
X
\emph default
 shift
\begin_inset Quotes erd
\end_inset

.
\end_layout

\begin_layout Standard
Example:
\end_layout

\begin_layout LyX-Code
--proj-dx=598.1
\end_layout

\begin_layout Standard
\begin_inset CommandInset line
LatexCommand rule
offset "0.5ex"
width "100col%"
height "1pt"

\end_inset


\end_layout

\begin_layout Standard
Option: --proj-dy=
\end_layout

\begin_layout Standard
Meaning: Set the 
\emph on
Y
\emph default
 shift factor for a datum transformation to WGS 84 from the 
\emph on
intended
\emph default
 spatial reference system of the 
\emph on
output
\emph default
 data.
 See section 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Datum-transformations"
plural "false"
caps "false"
noprefix "false"

\end_inset

 for details.
 The default is 
\begin_inset Quotes eld
\end_inset

0
\begin_inset Quotes erd
\end_inset

 which means 
\begin_inset Quotes eld
\end_inset

no 
\emph on
Y
\emph default
 shift
\begin_inset Quotes erd
\end_inset

.
\end_layout

\begin_layout Standard
Example:
\end_layout

\begin_layout LyX-Code
--proj-dy=73.7
\end_layout

\begin_layout Standard
\begin_inset CommandInset line
LatexCommand rule
offset "0.5ex"
width "100col%"
height "1pt"

\end_inset


\end_layout

\begin_layout Standard
Option: --proj-dz=
\end_layout

\begin_layout Standard
Meaning: Set the 
\emph on
Z
\emph default
 shift factor for a datum transformation to WGS 84 from the 
\emph on
intended
\emph default
 spatial reference system of the 
\emph on
output
\emph default
 data.
 See section 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Datum-transformations"
plural "false"
caps "false"
noprefix "false"

\end_inset

 for details.
 The default is 
\begin_inset Quotes eld
\end_inset

0
\begin_inset Quotes erd
\end_inset

 which means 
\begin_inset Quotes eld
\end_inset

no 
\emph on
Y
\emph default
 shift
\begin_inset Quotes erd
\end_inset

.
\end_layout

\begin_layout Standard
Example:
\end_layout

\begin_layout LyX-Code
--proj-dz=418.2
\end_layout

\begin_layout Standard
\begin_inset CommandInset line
LatexCommand rule
offset "0.5ex"
width "100col%"
height "1pt"

\end_inset


\end_layout

\begin_layout Standard
Option: --proj-rx=
\end_layout

\begin_layout Standard
Meaning: Set the 
\emph on
X
\emph default
 rotation factor for a datum transformation to WGS 84 from the 
\emph on
intended
\emph default
 spatial reference system of the 
\emph on
output
\emph default
 data.
 See section 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Datum-transformations"
plural "false"
caps "false"
noprefix "false"

\end_inset

 for details.
 The default is 
\begin_inset Quotes eld
\end_inset

0
\begin_inset Quotes erd
\end_inset

 which means 
\begin_inset Quotes eld
\end_inset

no 
\emph on
X
\emph default
 rotation
\begin_inset Quotes erd
\end_inset

.
\end_layout

\begin_layout Standard
Example:
\end_layout

\begin_layout LyX-Code
--proj-rx=0.202
\end_layout

\begin_layout Standard
\begin_inset CommandInset line
LatexCommand rule
offset "0.5ex"
width "100col%"
height "1pt"

\end_inset


\end_layout

\begin_layout Standard
Option: --proj-ry=
\end_layout

\begin_layout Standard
Meaning: Set the 
\emph on
Y
\emph default
 rotation factor for a datum transformation to WGS 84 from the 
\emph on
intended
\emph default
 spatial reference system of the 
\emph on
output
\emph default
 data.
 See section 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Datum-transformations"
plural "false"
caps "false"
noprefix "false"

\end_inset

 for details.
 The default is 
\begin_inset Quotes eld
\end_inset

0
\begin_inset Quotes erd
\end_inset

 which means 
\begin_inset Quotes eld
\end_inset

no 
\emph on
Y
\emph default
 rotation
\begin_inset Quotes erd
\end_inset

.
\end_layout

\begin_layout Standard
Example:
\end_layout

\begin_layout LyX-Code
--proj-ry=0.045
\end_layout

\begin_layout Standard
\begin_inset CommandInset line
LatexCommand rule
offset "0.5ex"
width "100col%"
height "1pt"

\end_inset


\end_layout

\begin_layout Standard
Option: --proj-rz=
\end_layout

\begin_layout Standard
Meaning: Set the 
\emph on
Z
\emph default
 rotation factor for a datum transformation to WGS 84 from the 
\emph on
intended
\emph default
 spatial reference system of the 
\emph on
output
\emph default
 data.
 See section 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Datum-transformations"
plural "false"
caps "false"
noprefix "false"

\end_inset

 for details.
 The default is 
\begin_inset Quotes eld
\end_inset

0
\begin_inset Quotes erd
\end_inset

 which means 
\begin_inset Quotes eld
\end_inset

no 
\emph on
Z
\emph default
 rotation
\begin_inset Quotes erd
\end_inset

.
\end_layout

\begin_layout Standard
Example:
\end_layout

\begin_layout LyX-Code
--proj-rz=-2
\end_layout

\begin_layout Standard
\begin_inset CommandInset line
LatexCommand rule
offset "0.5ex"
width "100col%"
height "1pt"

\end_inset


\end_layout

\begin_layout Standard
Option: --proj-ds=
\end_layout

\begin_layout Standard
Meaning: Set the scaling factor for a datum transformation to WGS 84 from
 the 
\emph on
intended
\emph default
 spatial reference system of the 
\emph on
output
\emph default
 data.
 See section 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Datum-transformations"
plural "false"
caps "false"
noprefix "false"

\end_inset

 for details.
 The default is 
\begin_inset Quotes eld
\end_inset

1
\begin_inset Quotes erd
\end_inset

 which means 
\begin_inset Quotes eld
\end_inset

no change in scale
\begin_inset Quotes erd
\end_inset

.
\end_layout

\begin_layout Standard
Example:
\end_layout

\begin_layout LyX-Code
--proj-ds=6.7
\end_layout

\begin_layout Standard
\begin_inset CommandInset line
LatexCommand rule
offset "0.5ex"
width "100col%"
height "1pt"

\end_inset


\end_layout

\begin_layout Standard
Option: --proj-grid=
\end_layout

\begin_layout Standard
Meaning: Set the grid file to be used for a grid-based datum transformation
 to WGS 84 from the 
\emph on
intended
\emph default
 spatial reference system of the 
\emph on
output
\emph default
 data.
 See section 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Datum-transformations"
plural "false"
caps "false"
noprefix "false"

\end_inset

 for details.
 The default is to not use any grid file.
\end_layout

\begin_layout Standard
Example:
\end_layout

\begin_layout LyX-Code
--proj-grid=BETA2007.gsb
\end_layout

\begin_layout Standard
\begin_inset Newpage newpage
\end_inset


\end_layout

\begin_layout Section
Graphical user interface
\begin_inset CommandInset label
LatexCommand label
name "sec:Graphische-Benutzeroberfläche-(G"

\end_inset


\end_layout

\begin_layout Standard
As an alternative to the command line usage, 
\emph on
Survey2GIS
\emph default
 can also be used via its built-in graphical user interface (GUI).
 There are two ways of starting the software in GUI mode:
\end_layout

\begin_layout Enumerate
Run 
\begin_inset Quotes eld
\end_inset

survey2gis
\begin_inset Quotes erd
\end_inset

 without any options: the GUI will start with default option settings.
\end_layout

\begin_layout Enumerate
Run 
\begin_inset Quotes eld
\end_inset

survey2gis
\begin_inset Quotes erd
\end_inset


\emph on
 
\emph default
with the special option 
\begin_inset Quotes eld
\end_inset

--show-gui
\begin_inset Quotes erd
\end_inset

: the GUI will reflect any option settings given on the command line.
\end_layout

\begin_layout Standard
The GUI is divided vertically into two main areas (see below).
 On the left side of the GUI, you will find all options that are also available
 via the command line.
 There are four pages: The page 
\begin_inset Quotes eld
\end_inset

Basic
\begin_inset Quotes erd
\end_inset

 has all options for basic data processing; the page 
\begin_inset Quotes eld
\end_inset

Extra
\begin_inset Quotes erd
\end_inset

 affords access to additional functionality such as data selections (see
 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:selections"

\end_inset

) and labels (see 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Labels"

\end_inset

); the page 
\begin_inset Quotes eld
\end_inset

Reprojection
\begin_inset Quotes erd
\end_inset

 allows to specify reprojection options (see 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:SRS-reprojections"
plural "false"
caps "false"
noprefix "false"

\end_inset

); the page 
\begin_inset Quotes eld
\end_inset

Advanced
\begin_inset Quotes erd
\end_inset

 has options for fine-tuning the processing.
\end_layout

\begin_layout Standard
The screenshot below shows the GUI layout (GNU/Linux operating systems;
 graphical appearance will vary on different systems):
\end_layout

\begin_layout Standard
\noindent
\align center
\begin_inset Graphics
	filename img/Screenshot-survey2gis-1.png
	lyxscale 50
	width 90col%

\end_inset


\end_layout

\begin_layout Standard
Once at least all required settings have been made on the 
\begin_inset Quotes eld
\end_inset

Basic
\begin_inset Quotes erd
\end_inset

 page, pressing the button 
\begin_inset Quotes eld
\end_inset

Run
\begin_inset Quotes erd
\end_inset

 will start the data processing.
 Any messages generated by 
\emph on
Survey2GIS
\emph default
 during data processing will be displayed in the message area on the right
 side of the GUI.
 Its content mirrors that of both the command line output and the (optional)
 log file.
\end_layout

\begin_layout Standard
Warnings are displayed in yellow.
 They do not lead to an interruption of data processing, but may contain
 important hints regarding input data problems.
\end_layout

\begin_layout Standard
Error messages are displayed in red and lead to termination of data processing,
 in which case not output data will be produced.
\end_layout

\begin_layout Standard
In order to avoid having to re-enter frequently used option values, the
 current settings can be saved into a file with extension 
\begin_inset Quotes eld
\end_inset

.s2g
\begin_inset Quotes erd
\end_inset

 using the 
\begin_inset Quotes eld
\end_inset

Settings\SpecialChar menuseparator
Save/As
\begin_inset Quotes erd
\end_inset

 command from the main menu.
\end_layout

\begin_layout Standard
Only those option settings will be saved that have actually been specified,
 making it possible to save and restore partial sets of settings.
\end_layout

\begin_layout Standard
The menu item 
\begin_inset Quotes eld
\end_inset

Settings\SpecialChar menuseparator
Defaults
\begin_inset Quotes erd
\end_inset

 (or the button with the same name at the bottom of the GUI) is used to
 restore settings from a file called 
\begin_inset Quotes eld
\end_inset

default.s2g
\begin_inset Quotes erd
\end_inset

 stored in the same folder aus 
\emph on
Survey2GIS
\emph default
 (provided such a file exists).
\end_layout

\begin_layout Standard
\begin_inset Box Boxed
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
thickness "0.4pt"
separation "3pt"
shadowsize "4pt"
framecolor "black"
backgroundcolor "none"
status open

\begin_layout Plain Layout
Warning: Any file present in the output folder will be 
\emph on
overwritten
\emph default
 
\emph on
without warning
\emph default
 if a new file of the same name is produced.
 This is true for both output data and log files.
 Likewise, if a settings file is loaded then the current settings in the
 GUI will be replaced without warning.
\end_layout

\end_inset


\end_layout

\begin_layout Subsection
Integrating the GUI into another application
\end_layout

\begin_layout Standard
The integration of the 
\emph on
Survey2GIS
\emph default
 GUI into a host application (e.
\begin_inset space \thinspace{}
\end_inset

g.
 a GIS) is assisted by 
\emph on
Survey2GIS
\emph default
 in two ways:
\end_layout

\begin_layout Enumerate
The host application can pass some settings to to 
\emph on
Survey2GIS
\emph default
 and then add the 
\begin_inset Quotes eld
\end_inset

--show-gui
\begin_inset Quotes erd
\end_inset

 option to show the GUI.
\end_layout

\begin_layout Enumerate
While 
\emph on
Survey2GIS
\emph default
 is running in GUI mode, it will output all its messages to the standard
 output stream with special markups.
 The host application can watch the output stream and react to the markup
 tags (see below).
\end_layout

\begin_layout Standard
If 
\emph on
Survey2GIS
\emph default
 has produced data, then the following tags will be present in the output
 stream:
\end_layout

\begin_layout LyX-Code
<OUTPUT_FORMAT>
\emph on
format
\emph default
</OUTPUT_FORMAT> 
\end_layout

\begin_layout Standard
\SpecialChar ldots
 with 
\begin_inset Quotes eld
\end_inset

format
\begin_inset Quotes erd
\end_inset

 being the name of the output format produced, such as 
\begin_inset Quotes pld
\end_inset

Esri Shapefile
\begin_inset Quotes prd
\end_inset

.
\end_layout

\begin_layout Standard
This is followed by the names of the actual output files, separated by geometry
 type:
\end_layout

\begin_layout LyX-Code
<OUTPUT_POINTS>
\emph on
data
\emph default
</OUTPUT_POINTS>
\end_layout

\begin_layout LyX-Code
<OUTPUT_LINES>
\emph on
data
\emph default
</OUTPUT_LINES>
\end_layout

\begin_layout LyX-Code
<OUTPUT_POLYGONS>
\emph on
data
\emph default
</OUTPUT_POLYGONS>
\end_layout

\begin_layout Standard
\SpecialChar ldots
 with 
\emph on
data
\emph default
 being the file name of the respective dataset.
\end_layout

\begin_layout Standard
If the user has set the 
\begin_inset Quotes eld
\end_inset

--raw-data
\begin_inset Quotes erd
\end_inset

 option, then there will be an additional:
\end_layout

\begin_layout LyX-Code
<OUTPUT_POINTS_RAW>
\emph on
data
\emph default
</OUTPUT_POINTS_RAW>
\end_layout

\begin_layout Standard
Since it is possible that the user has produced several different output
 formats and files during one session with 
\emph on
Survey2GIS
\emph default
, the host application will always have to analyse the entire output stream.
\end_layout

\begin_layout Standard
\begin_inset Newpage newpage
\end_inset


\end_layout

\begin_layout Section
The parser schema
\begin_inset CommandInset label
LatexCommand label
name "sec:Parser-Schemata"

\end_inset


\end_layout

\begin_layout Standard
The part of 
\emph on
Survey2GIS
\emph default
 that is responsible for making sense of the data in the input file (i.
\begin_inset space \thinspace{}
\end_inset

e.
 correctly 
\emph on
interpret
\emph default
 the file's contents) is called the 
\begin_inset Quotes eld
\end_inset

parser
\begin_inset Quotes erd
\end_inset

.
 The parser cannot automatically understand the structure of an input file.
 Instead, it must be supplied with a 
\emph on
parser schema
\emph default
, which is a plain text file with a simple syntax that describes the structure
 of the input data.
 The user must create a valid parser schema file before running 
\emph on
Survey2GIS
\emph default
 on new input data.
 A given parser schema is then supplied to 
\emph on
Survey2GIS
\emph default
 using the 
\emph on
-p
\emph default
 (
\emph on
Parser
\emph default
) option (see 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:List-of-options"
plural "false"
caps "false"
noprefix "false"

\end_inset

).
 It can be used to process as many additional input files as required, so
 long as the input files all adhere to the structure specfied in the schema
 file.
 This section explains the contents of a valid parser schema file.
\end_layout

\begin_layout Subsection
Syntax
\end_layout

\begin_layout Standard
\begin_inset Box Boxed
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
thickness "0.4pt"
separation "3pt"
shadowsize "4pt"
framecolor "black"
backgroundcolor "none"
status open

\begin_layout Plain Layout
To see the contents of this section in context, study the (non-working)
 illustrative parser description 
\begin_inset Quotes eld
\end_inset

parser.txt
\begin_inset Quotes erd
\end_inset

 in the subfolder 
\begin_inset Quotes eld
\end_inset

docs
\begin_inset Quotes erd
\end_inset

, as well as the (working) parser and data files in the subfolder 
\begin_inset Quotes eld
\end_inset

samples
\begin_inset Quotes erd
\end_inset

.
\end_layout

\end_inset


\end_layout

\begin_layout Standard
Lines that start with a 
\begin_inset Quotes eld
\end_inset

#
\begin_inset Quotes erd
\end_inset

 (hashmark) are comment lines.
 They will be ignored just like empty lines.
\end_layout

\begin_layout Standard
A valid parser schema must consist of two types of sections.
 Each section must in turn be declared using a key word in square brackets
 (
\begin_inset Quotes eld
\end_inset

[]
\begin_inset Quotes erd
\end_inset

).
 The two section types are called 
\begin_inset Quotes eld
\end_inset

[Parser]
\begin_inset Quotes erd
\end_inset

 and 
\begin_inset Quotes eld
\end_inset

[Field]
\begin_inset Quotes erd
\end_inset

.
 There must be exactly one section of type 
\begin_inset Quotes eld
\end_inset

[Parser]
\begin_inset Quotes erd
\end_inset

 that contains general settings for the parser.
 Following that, up to 251 sections of type 
\begin_inset Quotes eld
\end_inset

[Field]
\begin_inset Quotes erd
\end_inset

 may be added, each one describing the properties of one of the input data's
 elements/fields.
 The fields must be declared in the same order as they appear (from left
 to right) in the input data file(s).
\end_layout

\begin_layout Standard
Every section then contains further declarations that consist of 
\begin_inset Quotes eld
\end_inset

option name & value
\begin_inset Quotes erd
\end_inset

 pairs (
\begin_inset Quotes eld
\end_inset

settings
\begin_inset Quotes erd
\end_inset

), separated by an equal (
\begin_inset Quotes eld
\end_inset

=
\begin_inset Quotes erd
\end_inset

) sign in the general form 
\begin_inset Quotes eld
\end_inset


\emph on
option=value
\emph default

\begin_inset Quotes erd
\end_inset

.
 Only one such pair is allowed per line of the parser schema, e.
\begin_inset space \thinspace{}
\end_inset

g.:
\end_layout

\begin_layout LyX-Code
[Field]
\end_layout

\begin_layout LyX-Code
Name=Index
\end_layout

\begin_layout Standard
The entire text to the right of 
\begin_inset Quotes eld
\end_inset

=
\begin_inset Quotes erd
\end_inset

 will be interpreted as the option's value.
 Empty values are not allowed.
 If an option is not to be set, then it should not be declared at all.
 Parser key words, option names and values within a schema are treated as
 
\emph on
not case sensitive
\emph default
.
 The names of options and their values may also be given using quotation
 marks.
 Additional whitespace characters will be ignored, so the following is just
 as valid as the above:
\end_layout

\begin_layout LyX-Code
[Field]
\end_layout

\begin_layout LyX-Code
\begin_inset Quotes eld
\end_inset

name
\begin_inset Quotes erd
\end_inset

 = 
\begin_inset Quotes eld
\end_inset

Index
\begin_inset Quotes erd
\end_inset


\end_layout

\begin_layout Standard
Option names must not contain any whitespace.
 Names that consist of more than one word may be spelled using the underscore
 (
\begin_inset Quotes eld
\end_inset

_
\begin_inset Quotes erd
\end_inset

) character instead:
\end_layout

\begin_layout LyX-Code
[Field]
\end_layout

\begin_layout LyX-Code
Name = Index
\end_layout

\begin_layout LyX-Code
empty_allowed = No
\end_layout

\begin_layout Standard
Some options, such as 
\begin_inset Quotes eld
\end_inset

empty_allowed
\begin_inset Quotes erd
\end_inset

 in the example above, are boolean values or 
\begin_inset Quotes eld
\end_inset

switches
\begin_inset Quotes erd
\end_inset

 that can only be toggled on or off (boolean 
\begin_inset Quotes eld
\end_inset

true
\begin_inset Quotes erd
\end_inset

 or 
\begin_inset Quotes eld
\end_inset

false
\begin_inset Quotes erd
\end_inset

).
 The following are all equivalent values for turning an option 
\begin_inset Quotes eld
\end_inset

on
\begin_inset Quotes erd
\end_inset

: 
\begin_inset Quotes eld
\end_inset

Y
\begin_inset Quotes erd
\end_inset

, 
\begin_inset Quotes eld
\end_inset

Yes
\begin_inset Quotes erd
\end_inset

, 
\begin_inset Quotes eld
\end_inset

On
\begin_inset Quotes erd
\end_inset

, 
\begin_inset Quotes eld
\end_inset

1
\begin_inset Quotes erd
\end_inset

, 
\begin_inset Quotes eld
\end_inset

Enable
\begin_inset Quotes erd
\end_inset

, or 
\begin_inset Quotes eld
\end_inset

True
\begin_inset Quotes erd
\end_inset

.
 For turning an option 
\begin_inset Quotes eld
\end_inset

off
\begin_inset Quotes erd
\end_inset

, the following may be used: 
\begin_inset Quotes eld
\end_inset

N
\begin_inset Quotes erd
\end_inset

, 
\begin_inset Quotes eld
\end_inset

No
\begin_inset Quotes erd
\end_inset

, 
\begin_inset Quotes eld
\end_inset

Off
\begin_inset Quotes erd
\end_inset

, 
\begin_inset Quotes eld
\end_inset

0
\begin_inset Quotes erd
\end_inset

, 
\begin_inset Quotes eld
\end_inset

Disable
\begin_inset Quotes erd
\end_inset

, or 
\begin_inset Quotes eld
\end_inset

False
\begin_inset Quotes erd
\end_inset

.
\end_layout

\begin_layout Standard
A parser schema may be validated by running 
\emph on
Survey2GIS
\emph default
 with the options 
\begin_inset Quotes eld
\end_inset

-v
\begin_inset Quotes erd
\end_inset

 and 
\begin_inset Quotes eld
\end_inset

-p
\begin_inset Quotes erd
\end_inset

, followed by the name of the schema file.
 If the schema contains any errors, an informative message will be generated.
 If there are no errors then a summary description of the schema will be
 displayed.
\end_layout

\begin_layout Standard
The next section contains a discussion of all options that can or must be
 declared within the sections 
\begin_inset Quotes eld
\end_inset

[Parser]
\begin_inset Quotes erd
\end_inset

 and 
\begin_inset Quotes eld
\end_inset

[Field]
\begin_inset Quotes erd
\end_inset

.
\end_layout

\begin_layout Standard
\begin_inset Newpage pagebreak
\end_inset


\end_layout

\begin_layout Subsection
Options for [Parser]
\begin_inset CommandInset label
LatexCommand label
name "subsec:Einstellungen-fuer-Parser]"

\end_inset


\end_layout

\begin_layout Standard
The following options (listed in alphabetical order) can (
\begin_inset Quotes eld
\end_inset

optional
\begin_inset Quotes erd
\end_inset

) or must (
\begin_inset Quotes eld
\end_inset

mandatory
\begin_inset Quotes erd
\end_inset

) be declared within the section 
\begin_inset Quotes eld
\end_inset

[Parser]
\begin_inset Quotes erd
\end_inset

.
 They control the general workings of the input data parser.
 The example file 
\begin_inset Quotes eld
\end_inset

parser.txt
\begin_inset Quotes erd
\end_inset

, contained in the subfolder 
\begin_inset Quotes eld
\end_inset

docs
\begin_inset Quotes erd
\end_inset

, contains a parser schema (not suitable for processing actual data) that
 illustrates all possible options with short comments.
\end_layout

\begin_layout Standard
\begin_inset CommandInset line
LatexCommand rule
offset "0.5ex"
width "100col%"
height "1pt"

\end_inset


\end_layout

\begin_layout Standard
Option: 
\series bold
\size small
comment_mark
\end_layout

\begin_layout Standard
Meaning: Special characters that may be used to introduce comments in the
 input data.
 All text preceded by a comment mark will be skipped when processing the
 data.
\end_layout

\begin_layout Standard
Remarks: Optional.
 One or more comment marks may be specified.
 However, these must not include characters that are also used as field
 separators or quotation marks (see 
\begin_inset Quotes eld
\end_inset

quotation
\begin_inset Quotes erd
\end_inset

 and 
\begin_inset Quotes eld
\end_inset

separator
\begin_inset Quotes erd
\end_inset

 in 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Einstellungen-für-[Field]"
plural "false"
caps "false"
noprefix "false"

\end_inset

).
\end_layout

\begin_layout Standard
Example:
\end_layout

\begin_layout LyX-Code
comment_mark = #
\end_layout

\begin_layout LyX-Code
comment_mark = //
\end_layout

\begin_layout LyX-Code

\end_layout

\begin_layout Standard
\begin_inset CommandInset line
LatexCommand rule
offset "0.5ex"
width "100col%"
height "1pt"

\end_inset


\end_layout

\begin_layout Standard
Option: 
\series bold
\size small
coor_x, coor_y, coor_z
\end_layout

\begin_layout Standard
Meaning: These three options specify the fields that hold the 
\emph on
X
\emph default
, 
\emph on
Y
\emph default
 and 
\emph on
Z
\emph default
 coordinates of the measurements.
\end_layout

\begin_layout Standard
Remarks: The options 
\begin_inset Quotes pld
\end_inset

coor_x
\begin_inset Quotes prd
\end_inset

 und 
\begin_inset Quotes pld
\end_inset

coor_y
\begin_inset Quotes prd
\end_inset

 must always be specified and contain the names of two distinct, fully declared
 fields (see next sections.
 All fields must be numeric und of type 
\begin_inset Quotes eld
\end_inset

double
\begin_inset Quotes erd
\end_inset

.
 If 
\begin_inset Quotes eld
\end_inset

coor_z
\begin_inset Quotes erd
\end_inset

 is not specified, then 
\emph on
Z
\emph default
 coordinates will be assumed to be 
\begin_inset Quotes eld
\end_inset

0.0
\begin_inset Quotes erd
\end_inset

 for all measurements.
\end_layout

\begin_layout Standard
Example:
\end_layout

\begin_layout LyX-Code
coor_x = xfield
\end_layout

\begin_layout LyX-Code
coor_y = yfield
\end_layout

\begin_layout LyX-Code
coor_z = zfield
\end_layout

\begin_layout Standard
\begin_inset CommandInset line
LatexCommand rule
offset "0.5ex"
width "100col%"
height "1pt"

\end_inset


\end_layout

\begin_layout Standard
Option: 
\series bold
\size small
geom_tag_point, geom_tag_line, geom_tag_poly
\end_layout

\begin_layout Standard
Meaning: Specification of geometry markers (
\begin_inset Quotes eld
\end_inset

tags
\begin_inset Quotes erd
\end_inset

) for the three basic geometry types 
\begin_inset Quotes eld
\end_inset

point
\begin_inset Quotes erd
\end_inset

, 
\begin_inset Quotes eld
\end_inset

line
\begin_inset Quotes erd
\end_inset

 and 
\begin_inset Quotes eld
\end_inset

polygon
\begin_inset Quotes erd
\end_inset

.
 These markers allow the parser to multiplex simple point measurements into
 more complex geometries.
 They must be part of the input data.
\end_layout

\begin_layout Standard
Remarks: The details of how these markers are used by the parser depend
 on the parser mode chosen (see 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Geometriemarkierungenl"

\end_inset

).
 Setting 
\begin_inset Quotes eld
\end_inset

geom_tag_point
\begin_inset Quotes erd
\end_inset

 is optional for some parser modes.
 If it is not set, then 
\emph on
Survey2GIS
\emph default
 will try to recognize simple point measurements automatically.
 However, this will only work reliable if certain requirements are met (see
 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Hinweise-zur-Vermessungspraxis"

\end_inset

).
 For all parser modes except 
\begin_inset Quotes eld
\end_inset

None
\begin_inset Quotes erd
\end_inset

, both 
\begin_inset Quotes eld
\end_inset

geom_tag_line
\begin_inset Quotes erd
\end_inset

 and 
\begin_inset Quotes eld
\end_inset

geom_tag_poly
\begin_inset Quotes erd
\end_inset

 must be defined (and use different markers!) as part of the parser description.
 For parser mode 
\begin_inset Quotes eld
\end_inset

None
\begin_inset Quotes erd
\end_inset

, no geometry tag definitions need to be made; if any are found, they will
 be ignored.
 It is possible to declare more than one (up to 32) geometry tag for each
 geometry type.
 However, they must not have any characters (case matters) in common.
 There must also be no overlap in characters with field separators, quotation
 marks (see 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Einstellungen-für-[Field]"
plural "false"
caps "false"
noprefix "false"

\end_inset

 for both) or comment marks (see 
\begin_inset Quotes eld
\end_inset

comment_mark
\begin_inset Quotes erd
\end_inset

, above).
 If the field used to store the tag is numeric, then all digits, plus (
\begin_inset Quotes eld
\end_inset

+
\begin_inset Quotes erd
\end_inset

) and (
\begin_inset Quotes eld
\end_inset

-
\begin_inset Quotes erd
\end_inset

) are also not allowed.
 Neither are the decimal point and thousands separator characters, if the
 field is of type 
\begin_inset Quotes eld
\end_inset

double
\begin_inset Quotes erd
\end_inset

.
\end_layout

\begin_layout Standard
Example:
\end_layout

\begin_layout LyX-Code
geom_tag_point = "*"
\end_layout

\begin_layout LyX-Code
geom_tag_line = "-"
\end_layout

\begin_layout LyX-Code
geom_tag_poly = "@"
\end_layout

\begin_layout LyX-Code
geom_tag_poly = "@_"
\end_layout

\begin_layout Standard
\begin_inset CommandInset line
LatexCommand rule
offset "0.5ex"
width "100col%"
height "1pt"

\end_inset


\end_layout

\begin_layout Standard
Option: 
\series bold
\size small
info
\end_layout

\begin_layout Standard
Meaning: A short description of the parser schema.
\end_layout

\begin_layout Standard
Remarks: Optional.
\end_layout

\begin_layout Standard
Example:
\end_layout

\begin_layout LyX-Code
info = This parser has been designed to test Survey2GIS
\end_layout

\begin_layout Standard
\begin_inset CommandInset line
LatexCommand rule
offset "0.5ex"
width "100col%"
height "1pt"

\end_inset


\end_layout

\begin_layout Standard
Option: 
\series bold
\size small
key_field
\end_layout

\begin_layout Standard
Meaning: Name of the key field that contains the 
\emph on
same
\emph default
 value for all measurements that represent vertices of the 
\emph on
same
\emph default
 multi-vertex geometry (i.
\begin_inset space \thinspace{}
\end_inset

e.
 a line or polygon).
 If the parser is working in mode 
\begin_inset Quotes eld
\end_inset

End
\begin_inset Quotes erd
\end_inset

 or 
\begin_inset Quotes eld
\end_inset

Max
\begin_inset Quotes erd
\end_inset

, then all 
\emph on
successive
\emph default
 measurements with the same value in 
\begin_inset Quotes eld
\end_inset

key_field
\begin_inset Quotes erd
\end_inset

 will be merged into one geometry.
 Note that 
\begin_inset Quotes eld
\end_inset

successive
\begin_inset Quotes erd
\end_inset

 in this context means that measurements will be merged up to and including
 the next one that contains a line or polygon geometry marker (see 
\begin_inset Quotes eld
\end_inset

tag_field
\begin_inset Quotes erd
\end_inset

, below).
 The 
\begin_inset Quotes eld
\end_inset

key_unique
\begin_inset Quotes erd
\end_inset

 (see below) option can be used to merge multi-part geometries.
\end_layout

\begin_layout Standard
Remarks: Mandatory for parser modes 
\begin_inset Quotes pld
\end_inset

End
\begin_inset Quotes prd
\end_inset

 and 
\begin_inset Quotes pld
\end_inset

Max
\begin_inset Quotes prd
\end_inset

.
\end_layout

\begin_layout Standard
Example:
\end_layout

\begin_layout LyX-Code
key_field = key
\end_layout

\begin_layout Standard
\begin_inset CommandInset line
LatexCommand rule
offset "0.5ex"
width "100col%"
height "1pt"

\end_inset


\end_layout

\begin_layout Standard
Option: 
\series bold
\size small
key_uniqe
\end_layout

\begin_layout Standard
Meaning: Specifies whether the key field (see above) is unique across 
\emph on
disjunct
\emph default
 (multi-part) geometries.
\end_layout

\begin_layout Standard
Remarks: If this option is turned 
\begin_inset Quotes eld
\end_inset

on
\begin_inset Quotes erd
\end_inset

, 
\emph on
Survey2GIS
\emph default
 will assume that every geometry has a globally unique key value.
 This can be used to correctly process geometries that consist of disjunct
 parts (e.
\begin_inset space \thinspace{}
\end_inset

g.
 a set of spatially separate areas that should be considered parts of one
 polygon).
 In this case, all geometries with the same value in 
\begin_inset Quotes eld
\end_inset

key_field
\begin_inset Quotes erd
\end_inset

 (see above) will be stored as one multi-part geometry in the output file,
 with only one row of attribute data.
 If this option is not specified, then 
\emph on
Survey2GIS
\emph default
 cannot produce multi-part geometries and the user must instead manually
 assemble them in the GIS.
\end_layout

\begin_layout Standard
Example:
\end_layout

\begin_layout LyX-Code
key_unique = yes
\end_layout

\begin_layout Standard
\begin_inset CommandInset line
LatexCommand rule
offset "0.5ex"
width "100col%"
height "1pt"

\end_inset


\end_layout

\begin_layout Standard
Option: 
\series bold
\size small
name
\end_layout

\begin_layout Standard
Meaning: Parser name.
\end_layout

\begin_layout Standard
Remarks: Optional.
\end_layout

\begin_layout Standard
Example:
\end_layout

\begin_layout LyX-Code
name = Survey2GIS test parser
\end_layout

\begin_layout Standard
\begin_inset CommandInset line
LatexCommand rule
offset "0.5ex"
width "100col%"
height "1pt"

\end_inset


\end_layout

\begin_layout Standard
Option: 
\series bold
\size small
no_data
\end_layout

\begin_layout Standard
Meaning: An 
\emph on
integer
\emph default
 number that represents attribute values which are 
\begin_inset Quotes eld
\end_inset

null
\begin_inset Quotes erd
\end_inset

 (=
\begin_inset Quotes erd
\end_inset

no data
\begin_inset Quotes erd
\end_inset

).
 This should be set to a value that never occurs in valid data.
 The chosen value will be written into the output data whenever a field
 actually contains no data (i.
\begin_inset space \thinspace{}
\end_inset

e.
 is empty; see 
\begin_inset Quotes eld
\end_inset

empty_allowed
\begin_inset Quotes erd
\end_inset

 in 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Einstellungen-für-[Field]"
plural "false"
caps "false"
noprefix "false"

\end_inset

).
\end_layout

\begin_layout Standard
Remarks: Optional.
 See descriptions of output formats in 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Ausgabeformate"

\end_inset

 for details on how 
\begin_inset Quotes eld
\end_inset

no data
\begin_inset Quotes erd
\end_inset

 is set when there is no user-defined value for it.
 See also 
\begin_inset Quotes eld
\end_inset

empty_allowed
\begin_inset Quotes erd
\end_inset

 (above).
\end_layout

\begin_layout Standard
Example:
\end_layout

\begin_layout LyX-Code
no_data = -99999
\end_layout

\begin_layout Standard
\begin_inset CommandInset line
LatexCommand rule
offset "0.5ex"
width "100col%"
height "1pt"

\end_inset


\end_layout

\begin_layout Standard
Option: 
\series bold
\size small
tag_field
\end_layout

\begin_layout Standard
Meaning: Name of the field that contains the geometry markers (see 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Geometriemarkierungenl"

\end_inset

).
 May be identical with 
\begin_inset Quotes eld
\end_inset

key_field
\begin_inset Quotes erd
\end_inset

 (see above), 
\emph on
except
\emph default
 in parser mode 
\begin_inset Quotes eld
\end_inset

Max
\begin_inset Quotes erd
\end_inset

.
 Must contain the name of field declared within a 
\begin_inset Quotes eld
\end_inset

[Field]
\begin_inset Quotes erd
\end_inset

 section (see 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Einstellungen-für-[Field]"

\end_inset

).
\end_layout

\begin_layout Standard
Remarks: Must be specified for all parser modes except 
\begin_inset Quotes pld
\end_inset

None
\begin_inset Quotes prd
\end_inset

.
 To reduce typing work in the field, geometry markers may be part of any
 other attribute field (see 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Geometriemarkierungenl"
plural "false"
caps "false"
noprefix "false"

\end_inset

 for details).
 In this case, however, the attribute values must not overlap with the character
s used as geometry markers.
 Coordinate fields can also not be used for this purpose (see 
\begin_inset Quotes eld
\end_inset

coor_x
\begin_inset Quotes erd
\end_inset

, 
\begin_inset Quotes eld
\end_inset

coor_y
\begin_inset Quotes erd
\end_inset

 and 
\begin_inset Quotes eld
\end_inset

coor_z
\begin_inset Quotes erd
\end_inset

, above).
 Note that in parser mode 
\begin_inset Quotes eld
\end_inset

Min
\begin_inset Quotes erd
\end_inset

 it will usually make sense for 
\begin_inset Quotes eld
\end_inset

tag_field
\begin_inset Quotes erd
\end_inset

 to be a separate field, since there will be only one record (line) with
 complete attribute data.
\end_layout

\begin_layout Standard
Example:
\end_layout

\begin_layout LyX-Code
tag_field = tag
\end_layout

\begin_layout Standard
\begin_inset CommandInset line
LatexCommand rule
offset "0.5ex"
width "100col%"
height "1pt"

\end_inset


\end_layout

\begin_layout Standard
Option: 
\series bold
\size small
tagging_mode
\end_layout

\begin_layout Standard
Meaning: Determines the principal working mode of the parser (
\emph on
parser mode
\emph default
).
 Possible settings are 
\begin_inset Quotes pld
\end_inset

min
\begin_inset Quotes prd
\end_inset

, 
\begin_inset Quotes pld
\end_inset

max
\begin_inset Quotes prd
\end_inset

, 
\begin_inset Quotes pld
\end_inset

end
\begin_inset Quotes prd
\end_inset

 or 
\begin_inset Quotes pld
\end_inset

none
\begin_inset Quotes prd
\end_inset

.
 Further explanations are given in 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Geometriemarkierungenl"

\end_inset

.
\end_layout

\begin_layout Standard
Remarks: Mandatory.
\end_layout

\begin_layout Standard
Example:
\end_layout

\begin_layout LyX-Code
tagging_mode = end
\end_layout

\begin_layout Standard
\begin_inset CommandInset line
LatexCommand rule
offset "0.5ex"
width "100col%"
height "1pt"

\end_inset


\end_layout

\begin_layout Standard
Option: 
\series bold
\size small
tag_strict
\end_layout

\begin_layout Standard
Meaning: If this option is 
\begin_inset Quotes eld
\end_inset

on
\begin_inset Quotes erd
\end_inset

, the parser will be 
\emph on
strict
\emph default
 about geometry markers.
 This means that every measurement (i.
\begin_inset space \thinspace{}
\end_inset

e.
 line in the input file) must contain a geometry marker.
 Measurements without one will be discarded.
\end_layout

\begin_layout Standard
Remarks: Optional.
 Turned 
\begin_inset Quotes eld
\end_inset

off
\begin_inset Quotes erd
\end_inset

 if not specified.
\end_layout

\begin_layout Standard
Example:
\end_layout

\begin_layout LyX-Code
tag_strict = yes
\end_layout

\begin_layout Standard
\begin_inset Newpage pagebreak
\end_inset


\end_layout

\begin_layout Subsection
Options for [Field]
\begin_inset CommandInset label
LatexCommand label
name "subsec:Einstellungen-für-[Field]"

\end_inset


\end_layout

\begin_layout Standard
The general parser settings (see preceding section) must be followed by
 two or more (up to 251) field definitions, each one introduced by a
\end_layout

\begin_layout LyX-Code
[Field]
\end_layout

\begin_layout Standard
line.
 In addition to coordinates, individual fields may represent any kind of
 attribute data recorded during the survey.
 For the automated reconstruction of complex line strings and polygons,
 the parser schema must contain at least one additional field that contains
 the geometry markers and key values (see descriptions of 
\begin_inset Quotes eld
\end_inset

key_field
\begin_inset Quotes erd
\end_inset

 and 
\begin_inset Quotes eld
\end_inset

tag_field
\begin_inset Quotes erd
\end_inset

 in preceding section).
\end_layout

\begin_layout Standard
All attribute data will be stored as part of the output file(s), provided
 that this is supported by the chosen output file format.
 In the case of Shapefiles, the attribute data will be stored as a 
\emph on
DBase
\emph default
 file with extension 
\begin_inset Quotes eld
\end_inset

.dbf
\begin_inset Quotes erd
\end_inset

.
 Further restrictions may apply to the definition of attribute fields, depending
 on the capabilities of specific output formats (see 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Ausgabeformate"

\end_inset

 for details).
\end_layout

\begin_layout Standard
\begin_inset CommandInset line
LatexCommand rule
offset "0.5ex"
width "100col%"
height "1pt"

\end_inset


\end_layout

\begin_layout Standard
Option: 
\series bold
\size small
change_case
\end_layout

\begin_layout Standard
Meaning: This option may be set to convert the contents of a text field
 to all upper or lower case characters after reading the input data.
 Possible values are 
\begin_inset Quotes eld
\end_inset

lower
\begin_inset Quotes erd
\end_inset

 (convert to lower case) and 
\begin_inset Quotes eld
\end_inset

upper
\begin_inset Quotes erd
\end_inset

 (convert to upper case) or 
\begin_inset Quotes eld
\end_inset

none
\begin_inset Quotes erd
\end_inset

 (no conversion; this is the default).
\end_layout

\begin_layout Standard
Remarks: Optional.
 Only applies to fields of type 
\begin_inset Quotes eld
\end_inset

text
\begin_inset Quotes erd
\end_inset

.
\end_layout

\begin_layout Standard
Example:
\end_layout

\begin_layout LyX-Code
change_case = lower
\end_layout

\begin_layout Standard
\begin_inset CommandInset line
LatexCommand rule
offset "0.5ex"
width "100col%"
height "1pt"

\end_inset


\end_layout

\begin_layout Standard
Option: 
\series bold
\size small
empty_allowed
\end_layout

\begin_layout Standard
Meaning: Indicates whether a field is allowed to have empty content.
 E.
\begin_inset space \thinspace{}
\end_inset

g.
 this will be the case when two field separator characters succeed each
 other immediately or with only whitespace between them.
 In that case, a 
\begin_inset Quotes eld
\end_inset

no data
\begin_inset Quotes erd
\end_inset

 (see option 
\begin_inset Quotes eld
\end_inset

no_data
\begin_inset Quotes erd
\end_inset

, below) value will be stored if 
\begin_inset Quotes eld
\end_inset

empty_allowed
\begin_inset Quotes erd
\end_inset

 is on.
 Otherwise, the entire measurement (line of input data) will be considered
 invalid and will be discarded.
\end_layout

\begin_layout Standard
Remarks: Optional.
 This option is 
\begin_inset Quotes eld
\end_inset

off
\begin_inset Quotes erd
\end_inset

 by default.
 It cannot be turned 
\begin_inset Quotes eld
\end_inset

on
\begin_inset Quotes erd
\end_inset

 for fields that are declared to be 
\begin_inset Quotes eld
\end_inset

key_field
\begin_inset Quotes erd
\end_inset

 or 
\begin_inset Quotes eld
\end_inset

tag_field
\begin_inset Quotes erd
\end_inset

 or if 
\begin_inset Quotes eld
\end_inset

merge_separators
\begin_inset Quotes erd
\end_inset

 (see below) is 
\begin_inset Quotes eld
\end_inset

on
\begin_inset Quotes erd
\end_inset

.
\end_layout

\begin_layout Standard

\emph on
Important
\emph default
: If the corresponding field's separator is set to a whitespace character
 (
\begin_inset Quotes eld
\end_inset

tab
\begin_inset Quotes erd
\end_inset

 or 
\begin_inset Quotes eld
\end_inset

space
\begin_inset Quotes erd
\end_inset

), then empty fields cannot be processed correctly: Since whitespace to
 the left or right of a field's contents (
\begin_inset Quotes eld
\end_inset

padding
\begin_inset Quotes erd
\end_inset

) is automatically removed, the parser cannot distinguish between empty
 fields and field separators in this extreme case.
\end_layout

\begin_layout Standard
Example:
\end_layout

\begin_layout LyX-Code
empty_allowed = yes
\end_layout

\begin_layout LyX-Code

\end_layout

\begin_layout Standard
\begin_inset CommandInset line
LatexCommand rule
offset "0.5ex"
width "100col%"
height "1pt"

\end_inset


\end_layout

\begin_layout Standard
Option: 
\series bold
\size small
info
\end_layout

\begin_layout Standard
Meaning: One-line description of the field's content.
\end_layout

\begin_layout Standard
Remarks: Optional (but highly recommended).
 For purposes of documentation.
\end_layout

\begin_layout Standard
Example:
\end_layout

\begin_layout LyX-Code
info = Field with unique object index.
\end_layout

\begin_layout Standard
\begin_inset CommandInset line
LatexCommand rule
offset "0.5ex"
width "100col%"
height "1pt"

\end_inset


\end_layout

\begin_layout Standard
Option: 
\series bold
\size small
merge_separators
\end_layout

\begin_layout Standard
Meaning: Specifies whether two adjacent field separators should be treated
 as one separator.
\end_layout

\begin_layout Standard
Rermarks: Optional.
 If turned 
\begin_inset Quotes eld
\end_inset

off
\begin_inset Quotes erd
\end_inset

 (default) then two adjacent separators will be interpreted as empty field
 content (see 
\begin_inset Quotes eld
\end_inset

empty_allowed
\begin_inset Quotes erd
\end_inset

 above).
\end_layout

\begin_layout Standard
Example:
\end_layout

\begin_layout LyX-Code
merge_separators = yes
\end_layout

\begin_layout Standard
\begin_inset CommandInset line
LatexCommand rule
offset "0.5ex"
width "100col%"
height "1pt"

\end_inset


\end_layout

\begin_layout Standard
Option: 
\series bold
\size small
name
\end_layout

\begin_layout Standard
Meaning: The name of the field, with a maximum length of 10 characters.
 Valid characters for field names are all letters of the Latin alphabet,
 the underscore (
\begin_inset Quotes eld
\end_inset

_
\begin_inset Quotes erd
\end_inset

) and the digits 
\begin_inset Quotes eld
\end_inset

0
\begin_inset Quotes erd
\end_inset

 to 
\begin_inset Quotes eld
\end_inset

9
\begin_inset Quotes erd
\end_inset

.
 There is no distinction between upper and lower case spelling.
 All field names will be stored in all 
\emph on
lower
\emph default
 case automatically (note: correctly enforced since version 1.4.0).
\end_layout

\begin_layout Standard
Remarks: Mandatory.
 Every field must have a valid name.
\end_layout

\begin_layout Standard
Example:
\end_layout

\begin_layout LyX-Code
name = index_fld
\end_layout

\begin_layout Standard
\begin_inset CommandInset line
LatexCommand rule
offset "0.5ex"
width "100col%"
height "1pt"

\end_inset


\end_layout

\begin_layout Standard
Option: 
\series bold
\size small
persistent
\end_layout

\begin_layout Standard
Meaning: This option is only meaningful in parser mode 
\begin_inset Quotes eld
\end_inset

Min
\begin_inset Quotes erd
\end_inset

 (s.
 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Geometriemarkierungenl"

\end_inset

).
 If it is turned 
\begin_inset Quotes eld
\end_inset

on
\begin_inset Quotes erd
\end_inset

 for a field, then the parser expects a field of this type to be present
 in every line of the input file, even though there may be no valid attribute
 data.
 This option can be useful when processing with superfluous data.
 E.
\begin_inset space \thinspace{}
\end_inset

g.
 some software writes additional data into each line when downloading data
 from a device.
\end_layout

\begin_layout Standard
Remarks: Optional.
 Coordinate fields are always assumed to be persistent in parser mode 
\begin_inset Quotes pld
\end_inset

Min
\begin_inset Quotes prd
\end_inset

.
\end_layout

\begin_layout Standard
Example:
\end_layout

\begin_layout LyX-Code
persistent = yes
\end_layout

\begin_layout Standard
\begin_inset CommandInset line
LatexCommand rule
offset "0.5ex"
width "100col%"
height "1pt"

\end_inset


\end_layout

\begin_layout Standard
Option: 
\series bold
\size small
quotation
\end_layout

\begin_layout Standard
Meaning: If the content of a text field is surrounded by quotation marks
 and the marks themselves should not be saved as part of the field content,
 then the quotation mark character used must be specified with this option.
\end_layout

\begin_layout Standard
Remarks: Optional.
 Only one quotation mark character per field may be declared.
 This must not be a character that is also used as field separator (see
 
\begin_inset Quotes eld
\end_inset

separator
\begin_inset Quotes erd
\end_inset

, below) or comment mark (see 
\begin_inset Quotes eld
\end_inset

comment_mark
\begin_inset Quotes erd
\end_inset

 in 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Einstellungen-fuer-Parser]"
plural "false"
caps "false"
noprefix "false"

\end_inset

).
 Applies only to fields of type 
\begin_inset Quotes eld
\end_inset

text
\begin_inset Quotes erd
\end_inset

.
\end_layout

\begin_layout Standard
Example:
\end_layout

\begin_layout LyX-Code
quotation = '
\end_layout

\begin_layout Standard
\begin_inset CommandInset line
LatexCommand rule
offset "0.5ex"
width "100col%"
height "1pt"

\end_inset


\end_layout

\begin_layout Standard
Option: 
\series bold
\size small
skip
\end_layout

\begin_layout Standard
Meaning: When 
\begin_inset Quotes eld
\end_inset

skip
\begin_inset Quotes erd
\end_inset

 is turned 
\begin_inset Quotes eld
\end_inset

on
\begin_inset Quotes erd
\end_inset

 for a field, then the field will be processed by the parser but it will
 not be stored as part of the output.
 This is useful for fields that are part of the input data structure but
 are of no importance for further data processing.
\end_layout

\begin_layout Standard
Remarks: Optional.
 The default is store every defined field in the output file(s).
\end_layout

\begin_layout Standard
Example:
\end_layout

\begin_layout LyX-Code
skip = yes
\end_layout

\begin_layout Standard
\begin_inset CommandInset line
LatexCommand rule
offset "0.5ex"
width "100col%"
height "1pt"

\end_inset


\end_layout

\begin_layout Standard
Option: 
\series bold
\size small
separator
\end_layout

\begin_layout Standard
Meaning: It is possible to specify one or more separator characters that
 indicate the end of one field's content and the beginning of the next.
 Field separators may also include more than one character.
 The special declarations 
\begin_inset Quotes eld
\end_inset

tab
\begin_inset Quotes erd
\end_inset

 and 
\begin_inset Quotes eld
\end_inset

space
\begin_inset Quotes erd
\end_inset

 are used to represent tabulator and space characters, respectively.
\end_layout

\begin_layout Standard
Remarks: Must be specified for every field except the last one and 
\begin_inset Quotes eld
\end_inset

pseudo fields
\begin_inset Quotes erd
\end_inset

 (see parser option 
\begin_inset Quotes eld
\end_inset

value
\begin_inset Quotes erd
\end_inset

, below).
 Also note the option 
\begin_inset Quotes eld
\end_inset

merge_separators
\begin_inset Quotes erd
\end_inset

 (above).
\end_layout

\begin_layout Standard
Example:
\end_layout

\begin_layout LyX-Code
separator = ;
\end_layout

\begin_layout LyX-Code
separator = tab
\end_layout

\begin_layout LyX-Code
separator = space
\end_layout

\begin_layout Standard
\begin_inset CommandInset line
LatexCommand rule
offset "0.5ex"
width "100col%"
height "1pt"

\end_inset


\end_layout

\begin_layout Standard
Option: 
\series bold
\size small
type
\end_layout

\begin_layout Standard
Meaning: This option defines the data type of the field.
 The available choices are 
\begin_inset Quotes eld
\end_inset

integer
\begin_inset Quotes erd
\end_inset

 (for whole numbers: -1, 0, 100, \SpecialChar ldots
), 
\begin_inset Quotes eld
\end_inset

double
\begin_inset Quotes erd
\end_inset

 (for real numbers in floating point notation: -10,05, 0.0, 1200,12, \SpecialChar ldots
) and
 
\begin_inset Quotes eld
\end_inset

text
\begin_inset Quotes erd
\end_inset

 (for generic text).
 Note that some output format will severely limit the length of text fields
 (see corresponding entry in 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Ausgabeformate"
plural "false"
caps "false"
noprefix "false"

\end_inset

).
 Correct processing of floating point data requires correct settings for
 decimal point and thousands separator characters (cf.
 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Spracheinstellungen"

\end_inset

).
\end_layout

\begin_layout Standard
Remarks: Must be specified for every field.
\end_layout

\begin_layout Standard
Example:
\end_layout

\begin_layout LyX-Code
type = integer
\end_layout

\begin_layout Standard
\begin_inset CommandInset line
LatexCommand rule
offset "0.5ex"
width "100col%"
height "1pt"

\end_inset


\end_layout

\begin_layout Standard
Option: 
\series bold
\size small
unique
\end_layout

\begin_layout Standard
Meaning: If this option is turned 
\begin_inset Quotes eld
\end_inset

on
\begin_inset Quotes erd
\end_inset

, then the parser will check whether the field's contents are unique 
\emph on
per geometry.

\emph default
 If that is not the case then 
\emph on
Survey2GIS
\emph default
 will issue a warning during processing.
 However, the affected geometries will not be modified or discarded.
 It is then up to the user to decide how to handle duplicate attribute values.
\end_layout

\begin_layout Standard
Remarks: Optional.
 Turned 
\begin_inset Quotes eld
\end_inset

off
\begin_inset Quotes erd
\end_inset

 by default.
 Uniqueness is checked across all input file(s).
\end_layout

\begin_layout Standard
Example:
\end_layout

\begin_layout LyX-Code
unique = yes
\end_layout

\begin_layout Standard
\begin_inset CommandInset line
LatexCommand rule
offset "0.5ex"
width "100col%"
height "1pt"

\end_inset


\end_layout

\begin_layout Standard
Option: 
\series bold
\size small
value
\end_layout

\begin_layout Standard
Meaning: The 
\begin_inset Quotes pld
\end_inset

value
\begin_inset Quotes prd
\end_inset

 option allows the user to add a 
\begin_inset Quotes eld
\end_inset

pseudo field
\begin_inset Quotes erd
\end_inset

 to the output data that is not actually present in the input data.
 The field will have a constant, user-defined value for all attribute table
 records in the output data.
 The field's definition is a simplified one: Only the options 
\begin_inset Quotes pld
\end_inset

info
\begin_inset Quotes prd
\end_inset

, 
\begin_inset Quotes pld
\end_inset

name
\begin_inset Quotes prd
\end_inset

, 
\begin_inset Quotes pld
\end_inset

type
\begin_inset Quotes prd
\end_inset

 and 
\begin_inset Quotes pld
\end_inset

value
\begin_inset Quotes prd
\end_inset

 will be processed.
 Providing any other options will produce an error message.
\end_layout

\begin_layout Standard
Remarks: The field's data type (see option 
\begin_inset Quotes pld
\end_inset

type
\begin_inset Quotes prd
\end_inset

) must match the specified 
\begin_inset Quotes eld
\end_inset

value
\begin_inset Quotes erd
\end_inset

.
 In case of floating point values, make sure that the language settings
 (see 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Spracheinstellungen"

\end_inset

) match the value's notation.
\end_layout

\begin_layout Standard
Example (for a field of type 
\begin_inset Quotes eld
\end_inset

double
\begin_inset Quotes erd
\end_inset

):
\end_layout

\begin_layout LyX-Code
value = 1000.05
\end_layout

\begin_layout LyX-Code

\end_layout

\begin_layout Standard
\begin_inset CommandInset line
LatexCommand rule
offset "0.5ex"
width "100col%"
height "1pt"

\end_inset


\end_layout

\begin_layout Standard
Option: 
\series bold
\size small
@
\series default
 (replace)
\end_layout

\begin_layout Standard
Meaning: The 
\begin_inset Quotes eld
\end_inset

@
\begin_inset Quotes erd
\end_inset

 character signifies replacement of text field contents.
 This option allows the user to replace repetitive, short text (codes, abbreviat
ions) with longer, more descriptive text for storage in the attribute table.
 The syntax for the replacement operation is:
\end_layout

\begin_layout LyX-Code
@old=new
\end_layout

\begin_layout Standard
This replaces the text 
\begin_inset Quotes eld
\end_inset

old
\begin_inset Quotes erd
\end_inset

 with 
\begin_inset Quotes eld
\end_inset

new
\begin_inset Quotes erd
\end_inset

, whenever the former appears in the content of the text field 
\emph on
and
\emph default
 constitutes the 
\emph on
entire
\emph default
 contents of the field.
 Partial replacements will not be performed.
 It is possible to specify more than one replacement pair per text field.
 There must be no whitespace or other characters between 
\begin_inset Quotes eld
\end_inset

@
\begin_inset Quotes erd
\end_inset

 and 
\begin_inset Quotes eld
\end_inset

old
\begin_inset Quotes erd
\end_inset

.
\end_layout

\begin_layout Standard
Remarks: This option is only available for fields of type 
\begin_inset Quotes eld
\end_inset

text
\begin_inset Quotes erd
\end_inset

.
 The comparison of old and new field content is 
\emph on
not
\emph default
 case sensitive.
 The new text must not be longer than 254 ASCII characters.
\end_layout

\begin_layout Standard
Example (for a field of type 
\begin_inset Quotes pld
\end_inset

text
\begin_inset Quotes prd
\end_inset

):
\end_layout

\begin_layout LyX-Code
@ABB = Abbreviation
\end_layout

\begin_layout LyX-Code
@P1 = Point of type 1
\end_layout

\begin_layout LyX-Code
\SpecialChar ldots

\end_layout

\begin_layout Standard
\begin_inset Newpage pagebreak
\end_inset


\end_layout

\begin_layout Subsection
Geometry markers and parser modes
\begin_inset CommandInset label
LatexCommand label
name "subsec:Geometriemarkierungenl"

\end_inset


\end_layout

\begin_layout Standard
In order to reconstruct complex geometries, such as line strings and polygons,
 from the survey data, the parser needs to understand how to interleave
 the individual measurements that represent the vertices of complex geometries.
\end_layout

\begin_layout Standard
There are some fundamental limitations to what can be achieved:
\end_layout

\begin_layout Itemize
Even though 
\emph on
Survey2GIS
\emph default
 is capable of processing any number of input data files, it is not possible
 to spread vertex measurements belonging to one geometry across more than
 one file.
 However, it is possible to store the vertices of separate parts of a multi-part
 geometry (s.
 description of parser option 
\begin_inset Quotes eld
\end_inset

key_unique
\begin_inset Quotes erd
\end_inset

) in separate files.
\end_layout

\begin_layout Itemize
The list of consecutive vertex measurements within one input file may only
 be interrupted by comment lines or empty line.
 Regarding the surveying work in the field, It is thus not possible to interrupt
 the surveying of one feature, start and complete another feature and later
 finish surveying the first.
 Where such a working mode is unavoidable, the resulting data file must
 be re-ordered manually before it can be processed by 
\emph on
Survey2GIS
\emph default
.
\end_layout

\begin_layout Itemize
The only available geometry types are 
\begin_inset Quotes eld
\end_inset

point
\begin_inset Quotes erd
\end_inset

, 
\begin_inset Quotes eld
\end_inset

line
\begin_inset Quotes erd
\end_inset

 and 
\begin_inset Quotes eld
\end_inset

polygon
\begin_inset Quotes erd
\end_inset

.
 Rounded shapes cannot be approximated by 
\emph on
Survey2GIS
\emph default
.
 This must be done in a separate post-processing step, using external software.
\end_layout

\begin_layout Standard
\begin_inset Box Boxed
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
thickness "0.4pt"
separation "3pt"
shadowsize "4pt"
framecolor "black"
backgroundcolor "none"
status open

\begin_layout Plain Layout
Note: Further hints on the processing of complex geometries, such as polygons
 with holes or multi-part geometries, can be found in the section on 
\begin_inset Quotes eld
\end_inset

topological cleaning
\begin_inset Quotes erd
\end_inset

 (
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Topologische-Säuberung"

\end_inset

).
\end_layout

\end_inset


\end_layout

\begin_layout Standard
Every geometry type is indicated to the parser via a freely definable geometry
 marker (see 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Einstellungen-fuer-Parser]"

\end_inset

).
 Candidate characters for markers are all characters that are not normally
 used in attribute table field content, such as 
\begin_inset Quotes eld
\end_inset

@
\begin_inset Quotes erd
\end_inset

 or 
\begin_inset Quotes eld
\end_inset

$
\begin_inset Quotes erd
\end_inset

.
 When surveying, these markers are keyed into the device by the surveyor
 and stored along with the associated coordinate measurements.
 They may be inserted as separate data fields or at the end of an existing
 field (depending on the parser mode chosen).
\end_layout

\begin_layout Standard
The field that contains the geometry markers is called the 
\begin_inset Quotes eld
\end_inset

tag field
\begin_inset Quotes erd
\end_inset

 and must be declared as part of the parser schema (see option 
\begin_inset Quotes eld
\end_inset

tag_field
\begin_inset Quotes erd
\end_inset

 in 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Einstellungen-fuer-Parser]"

\end_inset

).
 If there is no such declaration, then 
\emph on
Survey2GIS
\emph default
 will interpret every measurement/line of input data as an individual point
 measurement.
 In this case it will be impossible to build lines or polygons automatically
 from the input data.
\end_layout

\begin_layout Standard
In some parser modes, the value of a key field (option 
\begin_inset Quotes eld
\end_inset

key_field
\begin_inset Quotes erd
\end_inset

) is used to indicate to the parser which measurements to interleave into
 one geometry.
 The key field's content is read in a case-sensitive manner, so that 
\begin_inset Quotes eld
\end_inset

1a
\begin_inset Quotes erd
\end_inset

 and 
\begin_inset Quotes eld
\end_inset

1A
\begin_inset Quotes erd
\end_inset

 would represent two different keys.
 The field option 
\begin_inset Quotes eld
\end_inset

change_case
\begin_inset Quotes erd
\end_inset

 may be used to alter this behaviour.
\end_layout

\begin_layout Standard
The final measurement/vertex of a polygon does not have to be identical
 with the first one, i
\begin_inset space \thinspace{}
\end_inset

e.
 duplicate measurements need not be taken.
 Polygons will be closed automatically by 
\emph on
Survey2GIS
\emph default
.
 In fact, such a duplicate vertex is considered a topological error that
 will be fixed automatically by 
\emph on
Survey2GIS
\emph default
 (see 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Topologische-Säuberung"

\end_inset

 for details).
\end_layout

\begin_layout Standard
Depending on the nature of field work, it may be useful to apply different
 strategies for marking geometries.
 For this reason, 
\emph on
Survey2GIS
\emph default
 provides alternative processing methods, called 
\begin_inset Quotes eld
\end_inset

parser modes
\begin_inset Quotes erd
\end_inset

.
 These can be set in the parser schema using the 
\begin_inset Quotes eld
\end_inset

tagging_mode
\begin_inset Quotes erd
\end_inset

 option:
\end_layout

\begin_layout LyX-Code
[Parser]
\end_layout

\begin_layout LyX-Code
\SpecialChar ldots

\end_layout

\begin_layout LyX-Code
tagging_mode = min
\end_layout

\begin_layout LyX-Code
\SpecialChar ldots

\end_layout

\begin_layout Standard
Only one mode may be specified per parser scheme.
 This means that 
\emph on
all
\emph default
 input data will be processed using the same mode.
 Possible modes are 
\begin_inset Quotes pld
\end_inset

Min
\begin_inset Quotes prd
\end_inset

, 
\begin_inset Quotes pld
\end_inset

Max
\begin_inset Quotes prd
\end_inset

, 
\begin_inset Quotes pld
\end_inset

End
\begin_inset Quotes prd
\end_inset

 and 
\begin_inset Quotes pld
\end_inset

None
\begin_inset Quotes prd
\end_inset

.
\end_layout

\begin_layout Standard
\begin_inset Box Boxed
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
thickness "0.4pt"
separation "3pt"
shadowsize "4pt"
framecolor "black"
backgroundcolor "none"
status open

\begin_layout Plain Layout
Note: While it is possible to use any text type attribute field for storing
 an additional geometry tag (and even to declare the same field as 
\begin_inset Quotes eld
\end_inset

tag field
\begin_inset Quotes erd
\end_inset

 and 
\begin_inset Quotes eld
\end_inset

key field
\begin_inset Quotes erd
\end_inset

 in some parser modes: see details below), this is not recommended practice.
 It is better to use a separate, dedicated geometry tag field.
 Nevertheless, if geometry markers are stored as part of other field content,
 then the geometry marker 
\emph on
must
\emph default
 appear either as the first or last character of the field content.
\end_layout

\end_inset


\end_layout

\begin_layout Subsubsection
\begin_inset Quotes pld
\end_inset

Min
\begin_inset Quotes prd
\end_inset

: minimal coding work
\end_layout

\begin_layout Standard
This mode is selected by default if the user does not specify a different
 
\begin_inset Quotes eld
\end_inset

tagging_mode
\begin_inset Quotes erd
\end_inset

 in the parser schema.
 It is useful for reducing the coding (attribute data entry) work during
 surveying.
 In this mode, the first measurement of a line or polygon 
\emph on
must
\emph default
 be tagged with the appropriate geometry marker.
\end_layout

\begin_layout Standard
The appearance of a geometry marker in the input data indicates the start
 of a list of vertex measurements.
 Only the first vertex measurement includes attribute data on the same line.
 All following measurements/lines are stored as 
\emph on
reduced records
\emph default
 that contain only coordinate values and unavoidable additional data that
 may have been inserted by the software responsible for producing the input
 data file(s).
 If such additional data exists, then the user 
\emph on
must
\emph default
 create matching field definitions and set the 
\begin_inset Quotes eld
\end_inset

persistent
\begin_inset Quotes erd
\end_inset

 option (see field options in 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Einstellungen-für-[Field]"

\end_inset

), so that the parser will be able to separate actual coordinate data from
 
\begin_inset Quotes eld
\end_inset

noise
\begin_inset Quotes erd
\end_inset

.
 It is not necessary to set a 
\begin_inset Quotes eld
\end_inset

key_field
\begin_inset Quotes erd
\end_inset

 in this mode, unless the data contains multi-part geometries.
\end_layout

\begin_layout Standard
This is an excerpt of input data fit for processing in mode 
\begin_inset Quotes eld
\end_inset

Min
\begin_inset Quotes erd
\end_inset

:
\end_layout

\begin_layout LyX-Code
# Sample file structure for a polygon (square) in mode 
\begin_inset Quotes pld
\end_inset

Min
\begin_inset Quotes prd
\end_inset

.
\end_layout

\begin_layout LyX-Code
# Hashmark introduces a comment line that will not be parsed.
\end_layout

\begin_layout LyX-Code
# Fields: index, label, geometry tag (@=polygon).
 
\end_layout

\begin_layout LyX-Code
1  polygon_1  @  10.00  10.00  1.00
\end_layout

\begin_layout LyX-Code
# The first line had all the attributes and the geometry tag.
\end_layout

\begin_layout LyX-Code
# The following lines will only have the x/y/z vertex coordinates.
\end_layout

\begin_layout LyX-Code
10.00  20.00  1.05
\end_layout

\begin_layout LyX-Code
20.00  20.00  1.10
\end_layout

\begin_layout LyX-Code
20.00  10.00  1.00
\end_layout

\begin_layout LyX-Code
# The next occurence of a full record terminates the polygon.
\end_layout

\begin_layout LyX-Code
2  polygon_2  @  30.00  30.00  2.50
\end_layout

\begin_layout LyX-Code
\SpecialChar ldots

\end_layout

\begin_layout Standard
To maintain consistency, persistent and coordinate fields have to appear
 in the same sequence in which they were defined, both in the first (attributed)
 record and in the following (reduced records).
 E.
\begin_inset space \thinspace{}
\end_inset

g., assuming that the second field (
\begin_inset Quotes eld
\end_inset

label
\begin_inset Quotes erd
\end_inset

) in the example above has been set to be 
\begin_inset Quotes eld
\end_inset

persistent
\begin_inset Quotes erd
\end_inset

, then a valid record structure might look like this:
\end_layout

\begin_layout LyX-Code
1  polygon_1  @  10.00  10.00  1.00
\end_layout

\begin_layout LyX-Code
polygon_1  10.00  20.00  1.05
\end_layout

\begin_layout LyX-Code
polygon_1  20.00  20.00  1.10
\end_layout

\begin_layout LyX-Code
polygon_1  20.00  10.00  1.00
\end_layout

\begin_layout Standard
The minimum number of fields, 
\begin_inset Formula $Min(f)$
\end_inset

, in a valid reduced record in mode 
\begin_inset Quotes eld
\end_inset

Min
\begin_inset Quotes erd
\end_inset

 is therefore: 
\end_layout

\begin_layout LyX-Code
\begin_inset Formula $Min(f)=number\,of\,coordinate\,fields\,(2\,or\,3)+number\,of\,persistent\,fields”.$
\end_inset


\end_layout

\begin_layout Subsubsection
\begin_inset Quotes pld
\end_inset

Max
\begin_inset Quotes prd
\end_inset

: maximal control
\end_layout

\begin_layout Standard
In mode 
\begin_inset Quotes eld
\end_inset

Max
\begin_inset Quotes erd
\end_inset

, each measurement 
\emph on
must
\emph default
 be tagged with a geometry marker (this also means that the parser schema
 must define a marker for each geometry type).
 This mode is intended to allow tightly controlled processing of fully edited
 data.
 Suitable data may be created using a text editor or other means and 
\emph on
Survey2GIS
\emph default
 may be used to generate consistent GIS data from it.
 This mode may also be useful for processing data records exported from
 a database management system.
\end_layout

\begin_layout Standard
A 
\begin_inset Quotes eld
\end_inset

tag_field
\begin_inset Quotes erd
\end_inset

 as well as a
\begin_inset Quotes erd
\end_inset

key_field
\begin_inset Quotes erd
\end_inset

 must be defined as part of the parser schema.
 They must be separate fields.
 In principle, it is enough for the value of 
\begin_inset Quotes eld
\end_inset

key_field
\begin_inset Quotes erd
\end_inset

 to change between successive geometries.
 For the benefit of data integrity, however, 
\begin_inset Quotes eld
\end_inset

key_field
\begin_inset Quotes erd
\end_inset

 should be unique per geometry across all input data.
\end_layout

\begin_layout Standard
This is an excerpt of input data, suitable for processing in mode 
\begin_inset Quotes eld
\end_inset

Max
\begin_inset Quotes erd
\end_inset

:
\end_layout

\begin_layout LyX-Code
# Sample file structure for a polygon (square) in mode 
\begin_inset Quotes pld
\end_inset

Max
\begin_inset Quotes prd
\end_inset

.
\end_layout

\begin_layout LyX-Code
# Hashmark introduces a comment line that will not be parsed.
\end_layout

\begin_layout LyX-Code
# Fields: index, label, geometry tag (@=polygon).
\end_layout

\begin_layout LyX-Code
# The second field (label) is the key field.
\end_layout

\begin_layout LyX-Code
1  polygon_1  @  10.00  10.00  1.00
\end_layout

\begin_layout LyX-Code
2  polygon_1  @  10.00  20.00  1.05
\end_layout

\begin_layout LyX-Code
3  polygon_1  @  20.00  20.00  1.10
\end_layout

\begin_layout LyX-Code
4  polygon_1  @  20.00  10.00  1.00
\end_layout

\begin_layout LyX-Code
# A change in the value of the key field terminates the polygon.
\end_layout

\begin_layout LyX-Code
5  point_1  @  35.00  32.00  2.60
\end_layout

\begin_layout LyX-Code
# A change in the value of the key field terminates the first point.
\end_layout

\begin_layout LyX-Code
6  point_2  @  33.00  32.00  2.40
\end_layout

\begin_layout LyX-Code
# etc.
\end_layout

\begin_layout LyX-Code
\SpecialChar ldots

\end_layout

\begin_layout Standard
\begin_inset Box Boxed
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
thickness "0.4pt"
separation "3pt"
shadowsize "4pt"
framecolor "black"
backgroundcolor "none"
status open

\begin_layout Plain Layout
Note: The vertices of polygons and lines encoded in mode 
\begin_inset Quotes eld
\end_inset

Max
\begin_inset Quotes erd
\end_inset

 must be recorded in 
\emph on
direct succession
\emph default
.
 It is not possible to e.
\begin_inset space \thinspace{}
\end_inset

g.
 intersperse single point measurements between the vertices of a polygon!
\end_layout

\end_inset


\end_layout

\begin_layout Subsubsection
\begin_inset Quotes pld
\end_inset

End
\begin_inset Quotes prd
\end_inset

: flexible surveying
\end_layout

\begin_layout Standard
In this mode, every measurement of a line or polygon 
\emph on
must
\emph default
 be 
\emph on
concluded
\emph default
 with a geometry marker.
 The marker must be part of the final vertex measurement.
\end_layout

\begin_layout Standard
The advantage of mode 
\begin_inset Quotes eld
\end_inset

End
\begin_inset Quotes erd
\end_inset

 is that the decision whether to record a geometry as a polygon or line
 string must only be taken with the final measurement.
 In order to allow the parser to collect all vertices that belong to a geometry,
 working backward from the marked one, all related measurements must have
 an identical value in the 
\begin_inset Quotes eld
\end_inset

key_field
\begin_inset Quotes erd
\end_inset

.
 This may cause additional typing work during the survey.
\end_layout

\begin_layout Standard
Both a 
\begin_inset Quotes eld
\end_inset

key_field
\begin_inset Quotes erd
\end_inset

 and a 
\begin_inset Quotes eld
\end_inset

tag_field
\begin_inset Quotes erd
\end_inset

 
\emph on
must
\emph default
 be defined as part of the parser schema in mode 
\begin_inset Quotes eld
\end_inset

End
\begin_inset Quotes erd
\end_inset

.
 However, both may be the same field.
 The geometry markers will not be stored as part of the output data.
 In principle, it is enough for the value of 
\begin_inset Quotes eld
\end_inset

key_field
\begin_inset Quotes erd
\end_inset

 to be identical within on geometry, as the geometry tag will reliably indicate
 the end of each geometry.
 For the benefit of data integrity, however, 
\begin_inset Quotes eld
\end_inset

key_field
\begin_inset Quotes erd
\end_inset

 should be unique per geometry across all input data.
\end_layout

\begin_layout Standard
This is an excerpt of input data, suitable for processing in mode 
\begin_inset Quotes eld
\end_inset

End
\begin_inset Quotes erd
\end_inset

:
\end_layout

\begin_layout LyX-Code
# Sample file structure for a polygon (square) in mode 
\begin_inset Quotes pld
\end_inset

End
\begin_inset Quotes prd
\end_inset

.
\end_layout

\begin_layout LyX-Code
# Hashmark introduces a comment line that will not be parsed.
\end_layout

\begin_layout LyX-Code
# Fields: index, label with embedded geometry tag (@=polygon).
\end_layout

\begin_layout LyX-Code
# The second field (label) is also the key field.
\end_layout

\begin_layout LyX-Code
1  polygon_1  10.00  10.00  1.00
\end_layout

\begin_layout LyX-Code
2  polygon_1  10.00  20.00  1.05
\end_layout

\begin_layout LyX-Code
3  polygon_1  20.00  20.00  1.10
\end_layout

\begin_layout LyX-Code
4  polygon_1@ 20.00  10.00  1.00
\end_layout

\begin_layout LyX-Code
# After the occurence of 
\begin_inset Quotes pld
\end_inset

@
\begin_inset Quotes prd
\end_inset

 (geometry tag), another object follows.
\end_layout

\begin_layout LyX-Code
5  polygon_2  30.00  30.00  2.50
\end_layout

\begin_layout LyX-Code
\SpecialChar ldots

\end_layout

\begin_layout Standard
\begin_inset Newpage pagebreak
\end_inset


\end_layout

\begin_layout Subsubsection
\begin_inset Quotes pld
\end_inset

None
\begin_inset Quotes prd
\end_inset

: points-only surveys
\end_layout

\begin_layout Standard
In mode 
\begin_inset Quotes eld
\end_inset

None
\begin_inset Quotes erd
\end_inset

, there will be no marking of geometries.
 This mode is suitable for surveys that include only simple point measurements,
 such as the work done to survey an elevation model.
\end_layout

\begin_layout Standard
By contrast, in modes 
\begin_inset Quotes eld
\end_inset

Min
\begin_inset Quotes erd
\end_inset

 and 
\begin_inset Quotes eld
\end_inset

Max
\begin_inset Quotes erd
\end_inset

, the geometry markers 
\emph on
may
\emph default
 be left out (unless option 
\begin_inset Quotes eld
\end_inset

tag_strict
\begin_inset Quotes erd
\end_inset

 has been turned on), in which case measurements are automatically assumed
 to represent simple points.
\end_layout

\begin_layout Standard
Note that mode 
\begin_inset Quotes eld
\end_inset

None
\begin_inset Quotes erd
\end_inset

 also allows 
\emph on
Survey2GIS
\emph default
 to be used as a flexible tool for converting simple point lists to GIS
 datasets.
\end_layout

\begin_layout Standard
This is an excerpt of input data, suitable for processing in mode 
\begin_inset Quotes eld
\end_inset

None
\begin_inset Quotes erd
\end_inset

:
\end_layout

\begin_layout LyX-Code
# Sample file structure for a polygon (square) in mode 
\begin_inset Quotes pld
\end_inset

None
\begin_inset Quotes prd
\end_inset

.
\end_layout

\begin_layout LyX-Code
# Hashmark introduces a comment line that will not be parsed.
\end_layout

\begin_layout LyX-Code
# Fields: index, X, Y, Z.
\end_layout

\begin_layout LyX-Code
1  10.00  10.00  1.00
\end_layout

\begin_layout LyX-Code
2  10.00  20.00  1.05
\end_layout

\begin_layout LyX-Code
3  20.00  20.00  1.10
\end_layout

\begin_layout LyX-Code
4  20.00  10.00  1.00
\end_layout

\begin_layout LyX-Code
5  30.00  30.00  2.50
\end_layout

\begin_layout LyX-Code
\SpecialChar ldots

\end_layout

\begin_layout Standard
\begin_inset Newpage newpage
\end_inset


\end_layout

\begin_layout Section
Labels
\begin_inset CommandInset label
LatexCommand label
name "sec:Labels"

\end_inset


\end_layout

\begin_layout Standard
In addition to producing output geometries for the measured geometries,
 it is also possible to output additional point data with 
\emph on
labels
\emph default
 (also called 
\begin_inset Quotes eld
\end_inset

annotations
\begin_inset Quotes erd
\end_inset

).
 Label points are 2D points (
\emph on
Z
\emph default
 data is not considered when computing positions of label points) with special
 attribute fields.
 The actual data format and attribute table schema used by the labels depends
 on the chosen output format.
 See section 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Ausgabeformate"

\end_inset

 for details.
\end_layout

\begin_layout Standard
\begin_inset Box Boxed
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
thickness "0.4pt"
separation "3pt"
shadowsize "4pt"
framecolor "black"
backgroundcolor "none"
status open

\begin_layout Plain Layout
Warning: File formats that produce additional files for labels (e.
\begin_inset space \thinspace{}
\end_inset

g.
 Shapefiles: see 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:ESRI-Shapefile-(SHP/SHX/DBF)"

\end_inset

) will overwrite existing data.
 Since they also use auto-naming, this may result in unexpected consequences.
 Auto-naming will add 
\begin_inset Quotes eld
\end_inset

_labels
\begin_inset Quotes erd
\end_inset

 to the user-specified output base name.
 Check to make sure that this does not collide with any existing files that
 you wish to keep!
\end_layout

\end_inset


\end_layout

\begin_layout Standard
Producing a labels layer requires the specification of a field in the input
 data.
 The contents of this field will be used as label text for the generated
 label points.
 Note that it is possible to choose a label text field that has been marked
 
\begin_inset Quotes eld
\end_inset

skip=true
\begin_inset Quotes erd
\end_inset

 in the parser (see 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Einstellungen-für-[Field]"

\end_inset

).
 The label field can be of type text, integer or double.
 Its contents will be copied verbatim into the label texts (except that
 geometry markers will be removed, if present).
\end_layout

\begin_layout Standard
In addition, the user has control over where the label points are placed
 on the associated geometries: The possible placing modes are: 
\begin_inset Quotes eld
\end_inset

center
\begin_inset Quotes erd
\end_inset

 (default), 
\begin_inset Quotes eld
\end_inset

first
\begin_inset Quotes erd
\end_inset

, 
\begin_inset Quotes eld
\end_inset

last
\begin_inset Quotes erd
\end_inset

 and 
\begin_inset Quotes eld
\end_inset

none
\begin_inset Quotes erd
\end_inset

.
 The effect of these modes depends on the type of geometry:
\end_layout

\begin_layout Itemize
Point geometries: Placement mode is ignored, one label point is placed exactly
 on each point.
 No label points will ever be produced for raw vertex data (see option 
\begin_inset Quotes eld
\end_inset

-
\begin_inset space \thinspace{}
\end_inset

-raw-data
\begin_inset Quotes erd
\end_inset

 in section 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Programmoptionenl"

\end_inset

).
\end_layout

\begin_layout Itemize
Line geometries: In mode 
\begin_inset Quotes eld
\end_inset

center
\begin_inset Quotes erd
\end_inset

, one label point will be placed exactly halfway along the path of each
 line (string); in mode 
\begin_inset Quotes eld
\end_inset

first
\begin_inset Quotes erd
\end_inset

, the label point will be placed on the first vertex of each line and in
 mode 
\begin_inset Quotes eld
\end_inset

last
\begin_inset Quotes erd
\end_inset

 it will be placed on the last vertex.
 In all three mode, label points are guaranteed to lie on the line geometries.
\end_layout

\begin_layout Itemize
Polygon geometries: In mode 
\begin_inset Quotes eld
\end_inset

center
\begin_inset Quotes erd
\end_inset

, one label point will be placed in the geometric center of each polygon;
 in mode 
\begin_inset Quotes eld
\end_inset

first
\begin_inset Quotes erd
\end_inset

, the label point will be placed on the first vertex of each polygon and
 in mode 
\begin_inset Quotes eld
\end_inset

last
\begin_inset Quotes erd
\end_inset

 it will be placed on the last vertex.
 When using mode 
\begin_inset Quotes eld
\end_inset

center
\begin_inset Quotes erd
\end_inset

 with polygons that contain holes or are strongly concave, it cannot be
 guaranteed that label points will actually lie within the polygon areas.
\end_layout

\begin_layout Standard
Mode 
\begin_inset Quotes eld
\end_inset

none
\begin_inset Quotes erd
\end_inset

 has the same effect on all geometry types and will suppress the generation
 of label points for the respective type.
\end_layout

\begin_layout Standard
In the case of multi-part geometries, one label point will be generated
 for 
\emph on
each
\emph default
 part.
\end_layout

\begin_layout Standard
\begin_inset Box Boxed
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
thickness "0.4pt"
separation "3pt"
shadowsize "4pt"
framecolor "black"
backgroundcolor "none"
status open

\begin_layout Plain Layout
Note: If the label field contains geometry tags 
\emph on
in addition
\emph default
 to other content, then 
\emph on
Survey2GIS
\emph default
 will attempt to remove all geometry tags from the output labels.
 This can fail in some scenarios.
 To ensure that labels are free of geometry tags, use a separate, dedicated
 field to store them (see parser definition of 
\begin_inset Quotes eld
\end_inset

tag_field
\begin_inset Quotes erd
\end_inset

 in 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Einstellungen-fuer-Parser]"
plural "false"
caps "false"
noprefix "false"

\end_inset

).
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Newpage newpage
\end_inset


\end_layout

\begin_layout Section
Data selections
\begin_inset CommandInset label
LatexCommand label
name "subsec:selections"

\end_inset


\end_layout

\begin_layout Standard
Sometimes it may be desirable to reduce the data to a 
\emph on
selected
\emph default
 
\emph on
subset
\emph default
 of records, e.
\begin_inset space \thinspace{}
\end_inset

g.
 for separate processing and export of smaller areas within a larger survey
 region.
 For this purpose, it is possible to specify one or more 
\emph on
selection commands
\emph default
 on the command line using the 
\begin_inset Quotes eld
\end_inset

-S
\begin_inset Quotes erd
\end_inset

 option (see 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Selection-command-syntax"

\end_inset

 for details):
\end_layout

\begin_layout LyX-Code
-S seltype:geomtype:field:expression -S seltype:geomtype:field:expression
 [-S \SpecialChar ldots
]
\end_layout

\begin_layout Standard
The effect of this is that only those records, whose 
\emph on
attribute table contents
\emph default
 
\emph on
and geometry types
\emph default
 pass one or more selection criteria (
\emph on
expressions
\emph default
), will be retained in the output.
 The selection will take place immediately after all geometries have been
 assembled and before any further processing, such as topological cleaning
 (see 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Topologische-Säuberung"

\end_inset

).
 Selection commands can be applied to some or all geometry types (points,
 lines, polygons).
\end_layout

\begin_layout Standard
\begin_inset Box Boxed
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
thickness "0.4pt"
separation "3pt"
shadowsize "4pt"
framecolor "black"
backgroundcolor "none"
status open

\begin_layout Plain Layout
Complex geometries (lines and polygons) can consist of many original point
 records (vertices), but only one attribute table record, once assembled.
 Selections on the attributes of assembled geometries cannot be guaranteed
 to match original vertex values.
 E.
\begin_inset space \thinspace{}
\end_inset

g.
 the coordinate values of the individual vertices are not preserved (except
 for the first one's) in the attribute record of a polygon or line, so selecting
 a singular value of the 
\begin_inset Quotes eld
\end_inset

Z
\begin_inset Quotes erd
\end_inset

 coordinate may fail to produce the intended matches.
 In such cases, selecting a range of values or using a regular expression
 (see 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Selection-types"

\end_inset

 for details on both) will often give better results.
\end_layout

\end_inset


\end_layout

\begin_layout Subsection
Selection command syntax
\begin_inset CommandInset label
LatexCommand label
name "subsec:Selection-command-syntax"

\end_inset


\end_layout

\begin_layout Standard
Each selection command has a fixed syntax that consists of up to 
\emph on
four tokens
\emph default
, named 
\begin_inset Quotes eld
\end_inset

seltype
\begin_inset Quotes erd
\end_inset

, 
\begin_inset Quotes eld
\end_inset

geomtype
\begin_inset Quotes erd
\end_inset

, 
\begin_inset Quotes eld
\end_inset

field
\begin_inset Quotes erd
\end_inset

 and 
\begin_inset Quotes eld
\end_inset

expression
\begin_inset Quotes erd
\end_inset

, separated by a 
\begin_inset Quotes eld
\end_inset

:
\begin_inset Quotes erd
\end_inset

 (colon), plus one or two 
\emph on
optional modifiers
\emph default
 (
\begin_inset Quotes eld
\end_inset

*
\begin_inset Quotes erd
\end_inset

 and/or 
\begin_inset Quotes eld
\end_inset

+
\begin_inset Quotes erd
\end_inset

 or 
\begin_inset Quotes eld
\end_inset

-
\begin_inset Quotes erd
\end_inset

; items in square brackets are not required in all cases):
\end_layout

\begin_layout LyX-Code
[*]seltype[+|-]:geomtype[:field:expression]
\end_layout

\begin_layout Enumerate
The first token defines the 
\emph on
type
\emph default
 
\emph on
of selection
\emph default
 (see 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Selection-types"

\end_inset

) to apply, optionally including modifiers to invert (
\begin_inset Quotes eld
\end_inset

*
\begin_inset Quotes erd
\end_inset

), add to (
\begin_inset Quotes eld
\end_inset

+
\begin_inset Quotes erd
\end_inset

) or subtract from (
\begin_inset Quotes eld
\end_inset

-
\begin_inset Quotes erd
\end_inset

) an existing selection (see 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Selection-modifiers"

\end_inset

 for details).
\end_layout

\begin_layout Enumerate
The second token stands for the 
\emph on
geometry type
\emph default
 to include in the selection.
 This can be 
\begin_inset Quotes eld
\end_inset

point
\begin_inset Quotes erd
\end_inset

, 
\begin_inset Quotes eld
\end_inset

raw
\begin_inset Quotes erd
\end_inset

, 
\begin_inset Quotes eld
\end_inset

line
\begin_inset Quotes erd
\end_inset

, 
\begin_inset Quotes eld
\end_inset

poly
\begin_inset Quotes erd
\end_inset

 or 
\begin_inset Quotes eld
\end_inset

all
\begin_inset Quotes erd
\end_inset

.
\end_layout

\begin_layout Enumerate
The third token is the 
\emph on
name
\emph default
 of the 
\emph on
field
\emph default
 (see 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Einstellungen-für-[Field]"

\end_inset

) to which the expression (see below) applies.
 Note that field names are treated as case-insensitive, meaning that e.
\begin_inset space \thinspace{}
\end_inset

g.
 
\begin_inset Quotes eld
\end_inset

feature
\begin_inset Quotes erd
\end_inset

 and 
\begin_inset Quotes eld
\end_inset

FEATURE
\begin_inset Quotes erd
\end_inset

 both refer to one and the same field (see item 
\begin_inset Quotes eld
\end_inset

name
\begin_inset Quotes erd
\end_inset

 under 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Einstellungen-für-[Field]"

\end_inset

).
\end_layout

\begin_layout Enumerate
The fourth token is the selection 
\emph on
expression
\emph default
.
 In the most simple case, this expression is the text to which the field's
 contents should be compared.
 More complex expressions arise in the case of regular expression type selection
s (see 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Selection-types"

\end_inset

).
\end_layout

\begin_layout Standard
The third and fourth tokens must 
\emph on
not
\emph default
 be specified if the selection type is set to 
\begin_inset Quotes eld
\end_inset

all
\begin_inset Quotes erd
\end_inset

 (i.
\begin_inset space \thinspace{}
\end_inset

e.
 select all records regardless of attribute field content).
\end_layout

\begin_layout Standard
\begin_inset Box Boxed
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
thickness "0.4pt"
separation "3pt"
shadowsize "4pt"
framecolor "black"
backgroundcolor "none"
status open

\begin_layout Plain Layout
When using text expansion/replacement on a field's content (see explanation
 of the 
\begin_inset Quotes eld
\end_inset

@
\begin_inset Quotes erd
\end_inset

 operator in 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Einstellungen-für-[Field]"

\end_inset

), the selection expression will be applied to the expanded/replaced content,
 
\emph on
not
\emph default
 the original data.
\end_layout

\end_inset


\end_layout

\begin_layout Standard
In order to avoid problems 
\emph on
on the command line
\emph default
 with expressions that contain spaces, the entire filter argument should
 be surrounded with quotation marks (see examples in this section).
 This is not an issue when using the graphical user interface.
\end_layout

\begin_layout Subsection
Selection types
\begin_inset CommandInset label
LatexCommand label
name "subsec:Selection-types"

\end_inset


\end_layout

\begin_layout Standard
The following comparative selection types can be applied to attribute fields
 of all types (text and numeric).
 Comparisons are done against the text in the 
\begin_inset Quotes eld
\end_inset

expression
\begin_inset Quotes erd
\end_inset

 token:
\end_layout

\begin_layout Description
eq The 
\begin_inset Quotes eld
\end_inset

equal
\begin_inset Quotes erd
\end_inset

 type (
\emph on
eq
\emph default
) selects only those records whose attribute field contents are equal to
 the given expression.
\end_layout

\begin_layout Description
neq The 
\begin_inset Quotes eld
\end_inset

not equal
\begin_inset Quotes erd
\end_inset

 (
\emph on
neq
\emph default
) type selects only those records whose attribute field contents are 
\emph on
not
\emph default
 equal to the given expression.
\end_layout

\begin_layout Description
lt The 
\begin_inset Quotes eld
\end_inset

less than
\begin_inset Quotes erd
\end_inset

 (
\emph on
lt
\emph default
) type selects only those records whose field contents are 
\begin_inset Quotes eld
\end_inset

less than
\begin_inset Quotes erd
\end_inset

 the given expression.
 In the case of numeric fields, the meaning of this is intuitive.
 In the case of text fields, the comparison is done lexicographically, i.
\begin_inset space \thinspace{}
\end_inset

e.
 both field contents are sorted as in a dictionary, and the one that comes
 first in the sorted order is 
\begin_inset Quotes eld
\end_inset

less than
\begin_inset Quotes erd
\end_inset

 the other.
 
\end_layout

\begin_layout Description
gt The 
\begin_inset Quotes eld
\end_inset

greater than
\begin_inset Quotes erd
\end_inset

 (
\emph on
gt
\emph default
) type selects only those records whose field contents are 
\begin_inset Quotes eld
\end_inset

greater than
\begin_inset Quotes erd
\end_inset

 the given expression.
 In the case of numeric fields, the meaning of this is intuitive.
 In the case of text fields, the comparison is done lexicographically, i.
\begin_inset space \thinspace{}
\end_inset

e.
 both field contents are sorted as in a dictionary, and the one that comes
 second in the sorted order is 
\begin_inset Quotes eld
\end_inset

greater than
\begin_inset Quotes erd
\end_inset

 the other.
 
\end_layout

\begin_layout Description
lte The 
\begin_inset Quotes eld
\end_inset

less than or equal
\begin_inset Quotes erd
\end_inset

 (
\emph on
lte
\emph default
) type works in the same way as the 
\begin_inset Quotes eld
\end_inset

less than
\begin_inset Quotes erd
\end_inset

 type (see above), but it also selects those records whose field contents
 are 
\begin_inset Quotes eld
\end_inset

equal
\begin_inset Quotes erd
\end_inset

 to the given expression.
\end_layout

\begin_layout Description
gte The 
\begin_inset Quotes eld
\end_inset

greater than or equal
\begin_inset Quotes erd
\end_inset

 (
\emph on
gte
\emph default
) type works in the same way as the 
\begin_inset Quotes eld
\end_inset

greater than
\begin_inset Quotes erd
\end_inset

 type (see above), but it also selects those records whose field contents
 are 
\begin_inset Quotes eld
\end_inset

equal
\begin_inset Quotes erd
\end_inset

 to the given expression.
\end_layout

\begin_layout Standard
Examples (note the use of quotation marks 
\emph on
on the command line
\emph default
 to prevent problems with spaces in the expression token):
\end_layout

\begin_layout LyX-Code
-S "eq:poly:objname:boundary"
\end_layout

\begin_layout LyX-Code
-S "eq:poly:objname:boundary type A"
\end_layout

\begin_layout LyX-Code
-S "gte:all:elevation:12.00"
\end_layout

\begin_layout Standard
There is one selection type that can only be applied to numeric fields:
\end_layout

\begin_layout Description
range Selects only those records whose numeric field contents fall within
 a 
\begin_inset Quotes eld
\end_inset

minimum to maximum
\begin_inset Quotes erd
\end_inset

 (inclusive) range specified by the user.
 When applying a range selection, the 
\begin_inset Quotes eld
\end_inset

expression
\begin_inset Quotes erd
\end_inset

 token must be of the format 
\begin_inset Quotes eld
\end_inset

min;max
\begin_inset Quotes erd
\end_inset

, e.
\begin_inset space \thinspace{}
\end_inset

g.:
\end_layout

\begin_layout LyX-Code
-S "range:point:elevation:100.0;120.0"
\end_layout

\begin_layout Standard
There are also some selection types that can 
\emph on
only
\emph default
 be applied to fields of type 
\emph on
text
\emph default
:
\end_layout

\begin_layout Description
sub Selects only those records whose field contents contain the expression
 as a 
\emph on
subset
\emph default
.
 The example below selects 
\begin_inset Quotes eld
\end_inset

boundary
\begin_inset Quotes erd
\end_inset

, 
\begin_inset Quotes eld
\end_inset

Boundary
\begin_inset Quotes erd
\end_inset

, 
\begin_inset Quotes eld
\end_inset

boundaries
\begin_inset Quotes erd
\end_inset

, 
\begin_inset Quotes eld
\end_inset

closed boundary
\begin_inset Quotes erd
\end_inset

, etc.:
\end_layout

\begin_layout LyX-Code
-S "sub:poly:objname:oundar"
\end_layout

\begin_layout Description
regexp selects all records that match a 
\emph on
regular expression
\emph default
 (
\begin_inset Flex URL
status open

\begin_layout Plain Layout

https://en.wikipedia.org/wiki/Regular_expression
\end_layout

\end_inset

).
 The set of supported operators is listed below (See 
\begin_inset Flex URL
status collapsed

\begin_layout Plain Layout

https://github.com/cesanta/slre
\end_layout

\end_inset

):
\end_layout

\begin_layout LyX-Code
^       Match beginning of field content.
\end_layout

\begin_layout LyX-Code
$       Match end of field content.
\end_layout

\begin_layout LyX-Code
()      Grouping and substring capturing
\end_layout

\begin_layout LyX-Code

\backslash
s      Match whitespace.
\end_layout

\begin_layout LyX-Code

\backslash
S      Match non-whitespace.
\end_layout

\begin_layout LyX-Code

\backslash
d      Match decimal digit.
\end_layout

\begin_layout LyX-Code

\backslash
n      Match new line character.
\end_layout

\begin_layout LyX-Code

\backslash
r      Match line feed character.
\end_layout

\begin_layout LyX-Code

\backslash
f      Match form feed character.
\end_layout

\begin_layout LyX-Code

\backslash
v      Match vertical tab character.
\end_layout

\begin_layout LyX-Code

\backslash
t      Match horizontal tab character.
\end_layout

\begin_layout LyX-Code

\backslash
b      Match backspace character.
\end_layout

\begin_layout LyX-Code
+       Match one or more times (greedy).
\end_layout

\begin_layout LyX-Code
+?      Match one or more times (non-greedy).
\end_layout

\begin_layout LyX-Code
*       Match zero or more times (greedy).
\end_layout

\begin_layout LyX-Code
*?      Match zero or more times (non-greedy).
\end_layout

\begin_layout LyX-Code
?       Match zero or once (non-greedy).
\end_layout

\begin_layout LyX-Code
x|y     Match x or y (alternation operator).
\end_layout

\begin_layout LyX-Code

\backslash
meta   Match one of the meta character: ^$().[]*+?|
\backslash
.
\end_layout

\begin_layout LyX-Code

\backslash
xHH    Match byte with hex value 0xHH, e.g.
 
\backslash
x4a.
\end_layout

\begin_layout LyX-Code
[...]   Match any character from set.
 Ranges like [a-z] are supported.
\end_layout

\begin_layout LyX-Code
[^...]  Match any character but ones from set.
\end_layout

\begin_layout Standard
Example:
\end_layout

\begin_layout LyX-Code
-S "regexp:all:objname:type 1|type 2"
\end_layout

\begin_layout Standard
The above selects all records that have either 
\begin_inset Quotes eld
\end_inset

type 1
\begin_inset Quotes erd
\end_inset

 or 
\begin_inset Quotes eld
\end_inset

type 2
\begin_inset Quotes erd
\end_inset

 as their 
\begin_inset Quotes eld
\end_inset

objname
\begin_inset Quotes erd
\end_inset

.
\end_layout

\begin_layout Standard
\begin_inset Box Boxed
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
thickness "0.4pt"
separation "3pt"
shadowsize "4pt"
framecolor "black"
backgroundcolor "none"
status open

\begin_layout Plain Layout
Regular expressions in 
\emph on
Survey2GIS
\emph default
 do 
\emph on
not
\emph default
 support Unicode characters.
\end_layout

\end_inset


\end_layout

\begin_layout Standard
Finally, there is one special selection type:
\end_layout

\begin_layout Description
all An 
\begin_inset Quotes eld
\end_inset

all
\begin_inset Quotes erd
\end_inset

 type selection matches, as the name implies, all records, regardless of
 attribute field types and contents.
 Its purpose is to allow selecting geometry types without filtering by attribute
 values.
 In this case, neither the 
\begin_inset Quotes eld
\end_inset

field
\begin_inset Quotes erd
\end_inset

 nor the 
\begin_inset Quotes eld
\end_inset

expression
\begin_inset Quotes erd
\end_inset

 token must be specified.
 E.
\begin_inset space \thinspace{}
\end_inset

g.
 to select all 
\begin_inset Quotes eld
\end_inset

line
\begin_inset Quotes erd
\end_inset

 type records:
\end_layout

\begin_layout LyX-Code
-S "all:line"
\end_layout

\begin_layout Subsection
Selection modifiers and chains
\begin_inset CommandInset label
LatexCommand label
name "subsec:Selection-modifiers"

\end_inset


\end_layout

\begin_layout Standard
It is possible to 
\emph on
invert
\emph default
 the effect of a selection command (including both geometry and selection
 type specifications) by prefixing the type token with a 
\begin_inset Quotes eld
\end_inset

*
\begin_inset Quotes erd
\end_inset

 (asterisk).
 E.
\begin_inset space \thinspace{}
\end_inset

g.
 the following selects those records that do 
\emph on
not
\emph default
 have the content 
\begin_inset Quotes eld
\end_inset

boundary
\begin_inset Quotes erd
\end_inset

 in their 
\begin_inset Quotes eld
\end_inset

objname
\begin_inset Quotes erd
\end_inset

 field:
\end_layout

\begin_layout LyX-Code
-S "*eq:all:objname:boundary"
\end_layout

\begin_layout Standard
Each selection type also has an alternative name, spelled in 
\emph on
capital
\emph default
 letters:
\end_layout

\begin_layout LyX-Code
EQ,LT,GT,LTE,GTE,SUB,REGEXP,RANGE,ALL
\end_layout

\begin_layout Standard
Using these versions on text type fields results in a 
\emph on
case insensitive
\emph default
 comparison.
 This has the same effect as converting both the field's content and the
 expression to all upper case letters before comparing them.
 E.
\begin_inset space \thinspace{}
\end_inset

g.:
\end_layout

\begin_layout LyX-Code
-S "EQ:poly:objname:Boundary"
\end_layout

\begin_layout LyX-Code
-S "EQ:poly:objname:boundary"
\end_layout

\begin_layout LyX-Code
-S "EQ:poly:objname:BOUNDARY"
\end_layout

\begin_layout Standard
\SpecialChar ldots
 will all match 
\begin_inset Quotes eld
\end_inset

Boundary
\begin_inset Quotes erd
\end_inset

, 
\begin_inset Quotes eld
\end_inset

BoUNDary
\begin_inset Quotes erd
\end_inset

, etc.
\end_layout

\begin_layout Standard
When selecting from numeric type fields, there will be no difference between
 the results of either version.
 The same is true for 
\begin_inset Quotes eld
\end_inset

ALL
\begin_inset Quotes erd
\end_inset

.
\end_layout

\begin_layout Standard
It is possible to create a 
\emph on
selection chain
\emph default
 by applying several selection commands to one or several fields.
 This will successively refine the selection result and is achieved using
 the 
\begin_inset Quotes eld
\end_inset

+
\begin_inset Quotes erd
\end_inset

 (add to current selection result) and 
\begin_inset Quotes eld
\end_inset

-
\begin_inset Quotes erd
\end_inset

 (subtract from current selection result) modifiers, which have to be suffixed
 to the selection type token.
\end_layout

\begin_layout Standard
In summary, the following rules apply:
\end_layout

\begin_layout Enumerate
Initially, all records are part of the selection (this is the equivalent
 of an 
\begin_inset Quotes eld
\end_inset

all:all
\begin_inset Quotes erd
\end_inset

 selection).
\end_layout

\begin_layout Enumerate
One or more selection commands can be specified, they will be processed
 in order of specification.
\end_layout

\begin_layout Enumerate
The modifier 
\begin_inset Quotes eld
\end_inset

+
\begin_inset Quotes erd
\end_inset

 adds the result of the selection command (matched records) to the current
 selection.
\end_layout

\begin_layout Enumerate
The modifier 
\begin_inset Quotes eld
\end_inset

-
\begin_inset Quotes erd
\end_inset

 subtracts the result of the selection command (matched records) from the
 current selection.
\end_layout

\begin_layout Enumerate
If neither modifier is given, then the current selection will be replaced
 with the result (matched records) of the selection command.
\end_layout

\begin_layout Enumerate
After all selection commands have been applied, only those records that
 are still part of the selection will appear in the output file(s).
\end_layout

\begin_layout Standard
The selection commands will be applied and records added or subtracted from
 the selection, in the same order as they are specified by the user.
 E.
\begin_inset space \thinspace{}
\end_inset

g.
 the example sequence below (enter all three 
\begin_inset Quotes eld
\end_inset

-S
\begin_inset Quotes erd
\end_inset

 options on one command line) will first select all records for which the
 field 
\begin_inset Quotes eld
\end_inset

objname
\begin_inset Quotes erd
\end_inset

 (object name) contains 
\begin_inset Quotes eld
\end_inset

oundar
\begin_inset Quotes erd
\end_inset

, such as 
\begin_inset Quotes eld
\end_inset

Boundary
\begin_inset Quotes erd
\end_inset

; the second command will then remove all records from the selection, for
 which the field 
\begin_inset Quotes eld
\end_inset

objname
\begin_inset Quotes erd
\end_inset

 is set to 
\begin_inset Quotes eld
\end_inset

closed boundary
\begin_inset Quotes erd
\end_inset

; the third command will leave only those records in the final selection
 result, for which the field 
\begin_inset Quotes eld
\end_inset

objtype
\begin_inset Quotes erd
\end_inset

 is 
\emph on
not
\emph default
 set to 
\begin_inset Quotes eld
\end_inset

breakline
\begin_inset Quotes erd
\end_inset

 (all expressions are not case sensitive).
\end_layout

\begin_layout LyX-Code
-S "SUB:poly:objname:oundar" 
\end_layout

\begin_layout LyX-Code
-S "EQ-:poly:objname:closed boundary"
\end_layout

\begin_layout LyX-Code
-S "EQ-:poly:objtype:breakline"
\end_layout

\begin_layout Standard
\begin_inset Box Boxed
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
thickness "0.4pt"
separation "3pt"
shadowsize "4pt"
framecolor "black"
backgroundcolor "none"
status open

\begin_layout Plain Layout
Details about each selection command's effect on the data will be displayed
 in the form of status messages during processing.
\end_layout

\end_inset


\end_layout

\begin_layout Subsection
The GUI's selection command editor
\end_layout

\begin_layout Standard
It is also possible to compose selection commands using the graphical user
 interface (GUI, see 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Graphische-Benutzeroberfläche-(G"

\end_inset

).
 To do so, click on the button labeled 
\begin_inset Quotes eld
\end_inset

Selection:
\begin_inset Quotes erd
\end_inset

.
 This will produce a list of currently defined selection commands.
 Click 
\begin_inset Quotes eld
\end_inset

Add
\begin_inset Quotes erd
\end_inset

 to define a new selection command or 
\begin_inset Quotes eld
\end_inset

Edit
\begin_inset Quotes erd
\end_inset

 to modify an existing one.
 In both cases, a form similar to the one pictured below will appear.
\end_layout

\begin_layout Standard
\noindent
\align center
\begin_inset Graphics
	filename img/Screenshot-survey2gis-2.png
	lyxscale 50
	scale 75

\end_inset


\end_layout

\begin_layout Standard
Selection commands can be constructed by filling in all required fields
 of the form.
 In the case of selection type 
\begin_inset Quotes eld
\end_inset

all
\begin_inset Quotes erd
\end_inset

, any input for 
\begin_inset Quotes eld
\end_inset

Field:
\begin_inset Quotes erd
\end_inset

 and 
\begin_inset Quotes eld
\end_inset

Expression
\begin_inset Quotes erd
\end_inset

 will be ignored and discarded once the form is closed with a click on 
\begin_inset Quotes eld
\end_inset

OK
\begin_inset Quotes erd
\end_inset

.
 Note that pressing 
\begin_inset Quotes eld
\end_inset

OK
\begin_inset Quotes erd
\end_inset

 will also trigger a syntax check of the entered selection command.
 This check only validates the formal correctness of the command.
 It does neither check whether the command will produce a non-empty selection,
 nor does it check for valid field names and types.
 Because the latter are completely data-dependent, they can only be checked
 once the program is run.
 Therefore, the status messages of 
\emph on
Survey2GIS
\emph default
 should be watched carefully to verify selection results.
\end_layout

\begin_layout Standard
Selection commands will be processed in the same order (top to bottom) in
 which they appear in the list of selections.
\end_layout

\begin_layout Standard
Saving the current GUI settings into a 
\begin_inset Quotes eld
\end_inset

.s2g
\begin_inset Quotes erd
\end_inset

 settings file will also save all currently defined selection commands.
\end_layout

\begin_layout Standard
\begin_inset Box Boxed
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
thickness "0.4pt"
separation "3pt"
shadowsize "4pt"
framecolor "black"
backgroundcolor "none"
status open

\begin_layout Plain Layout
Technical note: The 
\begin_inset Quotes eld
\end_inset

|
\begin_inset Quotes erd
\end_inset

 (pipe) character is used to represent the logical 
\begin_inset Quotes eld
\end_inset

or
\begin_inset Quotes erd
\end_inset

 operator in regular expressions.
 At the same time, it is used as a list separator in 
\emph on
Survey2GIS
\emph default
 settings files (see 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Graphische-Benutzeroberfläche-(G"

\end_inset

).
 To avoid conflicts when loading/saving regular expressions from/to settings
 files and at the same time retain compatibility with older versions of
 
\emph on
Survey2GIS
\emph default
, the 
\begin_inset Quotes eld
\end_inset

|
\begin_inset Quotes erd
\end_inset

 character will be stored as ASCII character #30 (RS, record separator)
 in settings files.
 This must be taken into account, should the need arise to edit settings
 files that contain regular expressions outside of 
\emph on
Survey2GIS
\emph default
.
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Newpage newpage
\end_inset


\end_layout

\begin_layout Section
Orientation modes
\begin_inset CommandInset label
LatexCommand label
name "sec:Planum-and-profile"

\end_inset


\end_layout

\begin_layout Standard
Starting with version 1.5.0, 
\emph on
Survey2GIS
\emph default
 provides the concept of 
\begin_inset Quotes eld
\end_inset

orientation modes
\begin_inset Quotes erd
\end_inset

 as a work-around for handling vertical data (
\begin_inset Quotes eld
\end_inset

catenas
\begin_inset Quotes erd
\end_inset

 in soil science, 
\begin_inset Quotes eld
\end_inset

profiles
\begin_inset Quotes erd
\end_inset

 in archaeology, etc.) in a traditional 2D/pseudo 3D GIS environment.
\end_layout

\begin_layout Standard
Processing 3D data is more complex than just passing through additional
 
\emph on
Z
\emph default
 coordinate data.
 GIS concepts and operations, such as topology and georeferencing, do not
 easily translate into the third dimension.
\end_layout

\begin_layout Standard
Thus, survey data that include a strong vertical component (cross-sections
 of soil volumes, standing walls, etc.) are not easy to integrate into a
 2D GIS workflow.
 
\emph on
Survey2GIS
\emph default
 addresses this problem by providing options to 
\emph on
re-orientate
\emph default
 the input data into a new, synthetic 2D coordinate system.
 The resulting data can be loaded into a 2D GIS and treated as though it
 were regular 
\emph on
X-Y
\emph default
 planar 2D data.
 Such a transformation from 3D to 2D always incurs a loss of information.
\end_layout

\begin_layout Standard
By default, the orientation of the output data produced by 
\emph on
Survey2GIS
\emph default
 is identical to that of the input data (setting option 
\begin_inset Quotes eld
\end_inset

--orientation
\begin_inset Quotes erd
\end_inset

 to 
\begin_inset Quotes eld
\end_inset

world
\begin_inset Quotes erd
\end_inset

), i.
\begin_inset space \thinspace{}
\end_inset

e.
 no re-orientation is performed (
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:World-orientation-(default)"
plural "false"
caps "false"
noprefix "false"

\end_inset

).
\end_layout

\begin_layout Standard
If requested by the user, re-orientation of axes is performed immediately
 after an input file has been read and 
\emph on
before
\emph default
 further geometry processing, in particular topological cleaning, is applied
 (see 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Topologische-Säuberung"

\end_inset

).
 This allows operations such as snapping to work on vertical data as expected.
 The coordinates of label points (if present: see 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Labels"
plural "false"
caps "false"
noprefix "false"

\end_inset

) will also be transformed.
\end_layout

\begin_layout Standard
The program option 
\begin_inset Quotes eld
\end_inset

--orientation=
\begin_inset Quotes erd
\end_inset

 (see 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:List-of-options"
plural "false"
caps "false"
noprefix "false"

\end_inset

) can be used to re-orientate the data as described below.
 Note that not all orientation modes may be available for all types of input
 data.
\end_layout

\begin_layout Standard
\begin_inset Box Boxed
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
thickness "0.4pt"
separation "3pt"
shadowsize "4pt"
framecolor "black"
backgroundcolor "none"
status open

\begin_layout Plain Layout
Warning: Data produced in an orientation mode other than 
\begin_inset Quotes eld
\end_inset

world
\begin_inset Quotes erd
\end_inset

 will be subject to transformations with 
\emph on
no guarantee of reversibility
\emph default
.
 Therefore, all survey raw data should be archived and re-orientated data
 should never be considered the primary or authoritative processing result.
\end_layout

\end_inset


\end_layout

\begin_layout Subsection
World orientation (default)
\begin_inset CommandInset label
LatexCommand label
name "subsec:World-orientation-(default)"

\end_inset


\end_layout

\begin_layout Standard
Orientation mode 
\begin_inset Quotes eld
\end_inset

world
\begin_inset Quotes erd
\end_inset

 is the default mode of operation in 
\emph on
Survey2GIS
\emph default
.
 It does not modify the input data in any way.
 The corresponding option value exists merely to keep the user interface
 consistent.
\end_layout

\begin_layout Subsection
Local 
\emph on
X-Z
\emph default
 orientation
\begin_inset CommandInset label
LatexCommand label
name "subsec:Local-X-Z-orientation"

\end_inset


\end_layout

\begin_layout Standard
The 
\begin_inset Quotes eld
\end_inset

local X-Z
\begin_inset Quotes erd
\end_inset

 orientation mode (option value 
\begin_inset Quotes eld
\end_inset

localxz
\begin_inset Quotes erd
\end_inset

) is a simple means of transforming 3D survey data to 2D cross-sections
 (
\begin_inset Quotes eld
\end_inset

profiles
\begin_inset Quotes erd
\end_inset

) that can be visualized in a 2D GIS using a synthetic coordinate system.
 It is not suitable for large areas with many disjunct geometries, but intended
 to visualize a single 
\begin_inset Quotes eld
\end_inset

profile
\begin_inset Quotes erd
\end_inset

 (alternative terms: 
\begin_inset Quotes eld
\end_inset

cut
\begin_inset Quotes erd
\end_inset

, 
\begin_inset Quotes eld
\end_inset

trench wall
\begin_inset Quotes erd
\end_inset

, 
\begin_inset Quotes eld
\end_inset

catena
\begin_inset Quotes erd
\end_inset

, etc.):
\end_layout

\begin_layout Standard
\noindent
\align center
\begin_inset Graphics
	filename img/profile.png
	lyxscale 33
	width 95col%

\end_inset


\end_layout

\begin_layout Standard
The re-orientated data will have a new, synthetic coordinate system with
 swapped 
\emph on
Z
\emph default
 and 
\emph on
Y
\emph default
 axes and newly computed 
\emph on
X
\emph default
 coordinates.
 The fact that the transformed data's 
\emph on
X
\emph default
 coordinates will always start at 
\begin_inset Quotes eld
\end_inset

0
\begin_inset Quotes erd
\end_inset

 while the 
\emph on
Z
\emph default
 coordinates are preserved, makes it relatively easy to compare different
 datasets side-by-side (provided that the GIS can display several data views
 at once).
\end_layout

\begin_layout Standard
This transformation method is non-parametric and fully automatic.
 It does not require the definition of a projection plane.
\end_layout

\begin_layout Standard
The transformed data will have the following properties:
\end_layout

\begin_layout Itemize
The new 
\emph on
Y
\emph default
 coordinates will be the same as the original 
\emph on
Z
\emph default
 data.
\end_layout

\begin_layout Itemize
The coordinates of the synthetic 
\emph on
X
\emph default
 axis will no longer represent any original measurements.
\end_layout

\begin_layout Itemize
The smallest 
\emph on
X
\emph default
 coordinate value found in the input data will become the origin (
\begin_inset Formula $X=0$
\end_inset

) of the new, synthetic 
\emph on
X
\emph default
 axis.
\end_layout

\begin_layout Itemize
The largest X coordinate on the synthetic 
\emph on
X
\emph default
 axis will be identical with the greatest difference in 
\emph on
X
\emph default
 values between the input measurements.
\end_layout

\begin_layout Itemize
All 
\emph on
Y
\emph default
 coordinate data are discarded: user-defined offsets on any axis are also
 discarded.
\end_layout

\begin_layout Standard
This transformation method has a number of limitations:
\end_layout

\begin_layout Itemize
Input data must be 3D cartesian data.
 Lat/lon and 2D data cannot be transformed using this method.
\end_layout

\begin_layout Itemize
Input data should only cover a single profile's extent.
\end_layout

\begin_layout Itemize
All input data must represent points that were measured from just one location.
 By extension, this means that complex 3D structures with strong concavity
 (
\begin_inset Quotes eld
\end_inset

recesses
\begin_inset Quotes erd
\end_inset

) will not produce satisfactory results.
\end_layout

\begin_layout Itemize
Data with strong variation along the profile's major axis (i.
\begin_inset space \thinspace{}
\end_inset

e.
 on the 
\emph on
X-Y
\emph default
 plane) will be strongly distorted
\end_layout

\begin_layout Itemize
Data with 
\begin_inset Quotes eld
\end_inset

local X-Z
\begin_inset Quotes erd
\end_inset

 orientation cannot be 
\emph on
reprojected
\emph default
 to another spatial reference system (see 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:SRS-reprojections"
plural "false"
caps "false"
noprefix "false"

\end_inset

).
\end_layout

\begin_layout Itemize
Data that has a significantly larger extent on the 
\emph on
Z
\emph default
 axis than on the 
\emph on
X-Y
\emph default
 plane will more likely produce wrongly orientated results (see description
 of process, below).
\end_layout

\begin_layout Itemize
It is not possible to transform data from more than one data source (input
 file) in one program run.
\end_layout

\begin_layout Standard
Results will be as accurate as possible if all points/vertices between the
 first and the last measurement lie on a straight line when viewed in the
 
\emph on
X-Y
\emph default
 plane.
 The more they deviate from this ideal assumption, the more distorted the
 result will be.
 Likewise, transformed profiles will be easier to interpret if the original
 
\emph on
Z
\emph default
 coordinates are 
\begin_inset Quotes eld
\end_inset

reasonably orthogonal
\begin_inset Quotes erd
\end_inset

 to the 
\emph on
X-Y
\emph default
 plane (because the new 
\emph on
Y
\emph default
 axis retains the geographic alignment of the original 
\emph on
Z
\emph default
 axis).
\end_layout

\begin_layout Standard
The transformation works as follows:
\end_layout

\begin_layout Enumerate
Set reference point 
\emph on
RP
\emph default
 and determine profile orientation (see below).
\end_layout

\begin_layout Enumerate
For all input points/vertices (
\begin_inset Formula $p_{i=1,2,\ldots,n}$
\end_inset

) in input dataset 
\begin_inset Formula $P$
\end_inset

:
\end_layout

\begin_deeper
\begin_layout Enumerate
Compute 
\emph on
X
\emph default
 coordinate for transformed version of 
\begin_inset Formula $p_{i}$
\end_inset

 as straight-line distance between 
\emph on
X/Y
\emph default
 location of 
\emph on

\begin_inset Formula $p_{i}$
\end_inset


\emph default
 and 
\emph on
RP
\emph default
.
\end_layout

\begin_layout Enumerate
Set 
\emph on
Y
\emph default
 for transformed 
\begin_inset Formula $p_{i}$
\end_inset

 to value of original 
\emph on
Z
\emph default
 coordinate.
\end_layout

\begin_layout Enumerate
Set new 
\emph on
Z
\emph default
 coordinate to be 
\begin_inset Quotes eld
\end_inset

0
\begin_inset Quotes erd
\end_inset

.
\end_layout

\end_deeper
\begin_layout Standard
In order to produce usable results, two key parameters will be derived automatic
ally from the data:
\end_layout

\begin_layout Enumerate
The overall 
\emph on
W-E
\emph default
 orientation of the profile, i.
\begin_inset space \thinspace{}
\end_inset

e.
 the question of where the left edge of the profile will be in the 
\emph on
X-Z
\emph default
 coordinate system.
 If this fails, then the transformed data will appear 
\begin_inset Quotes eld
\end_inset

mirrored
\begin_inset Quotes erd
\end_inset

.
\end_layout

\begin_layout Enumerate
The identity of the most 
\begin_inset Quotes eld
\end_inset

extreme
\begin_inset Quotes erd
\end_inset

 surveyed point with the 
\begin_inset Quotes eld
\end_inset

left-most
\begin_inset Quotes erd
\end_inset

 coordinate in the synthetic 
\emph on
X-Z
\emph default
 coordinate system.
 If the wrong point is identified, the left edge of the transformed profile
 will appear distorted.
\end_layout

\begin_layout Standard
The first parameter, 
\begin_inset Quotes eld
\end_inset

profile orientation
\begin_inset Quotes erd
\end_inset

 is determined by computing the weighted sum of differences between the
 
\emph on
X
\emph default
 coordinate of a 
\emph on
reference point
\emph default
 and those of all other points.
 All 
\emph on
X
\emph default
 coordinate differences are inversely weighted by the difference in 
\emph on
Z
\emph default
 between them and the reference point.
 The effect of this is that measurements further removed on the 
\emph on
Z
\emph default
 axis from the reference points have less of an effect on the result, thereby
 compensating for the practical problem that the true 
\begin_inset Quotes eld
\end_inset

left
\begin_inset Quotes erd
\end_inset

 edge of the surveyed profile might receed significantly in comparison to
 the first measured point.
 If the weighted sum of 
\emph on
X
\emph default
 differences is positive, then the profile is determined to have 
\begin_inset Quotes eld
\end_inset

eastward
\begin_inset Quotes erd
\end_inset

 orientation, 
\begin_inset Quotes eld
\end_inset

westward
\begin_inset Quotes erd
\end_inset

 otherwise.
 Note that the latter are not accurate descriptions of the profile's orientation
 in the geographic 
\emph on
X-Y
\emph default
 plane.
 They merely serve to determine where the 
\begin_inset Quotes eld
\end_inset

left
\begin_inset Quotes erd
\end_inset

 and 
\begin_inset Quotes eld
\end_inset

right
\begin_inset Quotes erd
\end_inset

 edges of the transformed data will be in the synthetic 
\emph on
X-Z
\emph default
 coordinate system.
\end_layout

\begin_layout Standard
In the extreme case that all 
\emph on
X
\emph default
 coordinate differences sum to exactly 
\begin_inset Quotes eld
\end_inset

0
\begin_inset Quotes erd
\end_inset

 (e.
\begin_inset space \thinspace{}
\end_inset

g.
 this can theoretically happen if all measured points lie on a straight
 line parallel to the 
\emph on
S-N
\emph default
 geographic axis), profile orientation cannot be decided automatically and
 will be assumed to be 
\begin_inset Quotes eld
\end_inset

eastward orientation
\begin_inset Quotes erd
\end_inset

.
\end_layout

\begin_layout Standard
In practice, then, everything hinges on choosing a suitable reference point,
 which the program assumes to be the 
\emph on
first point
\emph default
 of the input data.
 This is more likely to produce accurate results if one keeps the following
 in mind when conducting the profile survey:
\end_layout

\begin_layout Enumerate
Measurements should start at or near the upper-left corner (as viewed from
 the surveying station) of the profile.
\end_layout

\begin_layout Enumerate
Successive measurements should generally proceed toward the right and bottom,
 ending at or near the lower-right corner of the profile.
\end_layout

\begin_layout Standard
The above assumptions do not have to be met fully.
 Given a sufficient number of measurements, the program will be able to
 compensate for e.
\begin_inset space \thinspace{}
\end_inset

g.
 a reference point that is not identical with the true top-left point in
 the input data.
\end_layout

\begin_layout Standard

\emph on
Survey2GIS
\emph default
 will provide information on the chosen reference point, profile orientation
 and other key parameters as part of its logging output.
\end_layout

\begin_layout Standard
\begin_inset Newpage newpage
\end_inset


\end_layout

\begin_layout Section
Spatial reference systems and reprojections
\begin_inset CommandInset label
LatexCommand label
name "sec:SRS-reprojections"

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Box Boxed
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
thickness "0.4pt"
separation "3pt"
shadowsize "4pt"
framecolor "black"
backgroundcolor "none"
status open

\begin_layout Plain Layout
Support for spatial reference systems and reprojections has been introduced
 in version 1.5.0 of 
\emph on
Survey2GIS.
 
\emph default
This necessitated some significant changes in the user interface and processing
 logics.
 Most importantly, geographic latitude/longitude data is now handled explicitly,
 leading to modified program behaviour in the areas of topological cleaning
 and output formats.
 Please note the relevant parts of sections 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Topologische-Säuberung"
plural "false"
caps "false"
noprefix "false"

\end_inset

 and 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Ausgabeformate"
plural "false"
caps "false"
noprefix "false"

\end_inset

, in addition to the information given in this section.
\end_layout

\end_inset


\end_layout

\begin_layout Standard

\emph on
Survey2GIS
\emph default
 allows the user to set spatial reference system (SRS) and reprojection
 information for only the input or both input and output data.
 Setting the input SRS correctly helps ensure correct data processing.
 Additionally setting the output SRS will cause 
\emph on
Survey2GIS
\emph default
 to perform output data reprojection.
\end_layout

\begin_layout Standard
SRS and further reprojection parameters (concerning datum transformation
 for higher accuracy in certain scenarios: see 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Datum-transformations"
plural "false"
caps "false"
noprefix "false"

\end_inset

) can be set through a number of options with the common prefix 
\begin_inset Quotes eld
\end_inset

proj-
\begin_inset Quotes erd
\end_inset

 (note thate there are no one-letter short names for these):
\end_layout

\begin_layout LyX-Code
--proj-in
\end_layout

\begin_layout LyX-Code
--proj-out
\end_layout

\begin_layout LyX-Code
--proj-dx
\end_layout

\begin_layout LyX-Code
--proj-dy
\end_layout

\begin_layout LyX-Code
--proj-dz
\end_layout

\begin_layout LyX-Code
--proj-rx
\end_layout

\begin_layout LyX-Code
--proj-ry
\end_layout

\begin_layout LyX-Code
--proj-rz
\end_layout

\begin_layout LyX-Code
--proj-ds
\end_layout

\begin_layout LyX-Code
--proj-grid
\end_layout

\begin_layout Standard
The first two options (
\begin_inset Quotes eld
\end_inset

--proj-in
\begin_inset Quotes erd
\end_inset

 and 
\begin_inset Quotes eld
\end_inset

--proj-out
\begin_inset Quotes erd
\end_inset

) are used to set the SRS of the input and output data, respectively, while
 the remaining ones are only used in the context of a geodesic datum shift.
 More information on each option is given in the following subsections (note
 also the short summaries in 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:List-of-options"

\end_inset

).
\end_layout

\begin_layout Standard
Reprojection is performed 
\emph on
after
\emph default
 all other geometric processing is done.
 This means that it is possible to e.
\begin_inset space \thinspace{}
\end_inset

g.
 topologically clean UTM input data and reproject the output to a latitude/longi
tude system.
\end_layout

\begin_layout Standard
To compute reprojections, 
\emph on
Survey2GIS
\emph default
 uses a built-in copy of the PROJ.4 open source library.
 This means that all SRS definitions will be converted to PROJ.4 definitions
 internally, and that all reprojection capabilities are identical with those
 of the built-in version of PROJ.4.
 Read 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Reprojections using PROJ.4"
plural "false"
caps "false"
noprefix "false"

\end_inset

 for more information.
\end_layout

\begin_layout Standard
\begin_inset Box Boxed
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
thickness "0.4pt"
separation "3pt"
shadowsize "4pt"
framecolor "black"
backgroundcolor "none"
status open

\begin_layout Plain Layout
If the input data consists of geographic lat/lon coordinates, it will be
 assumed that these are provided as simple decimal degrees (see 
\begin_inset Flex URL
status open

\begin_layout Plain Layout

https://en.wikipedia.org/wiki/Decimal_degrees
\end_layout

\end_inset

).
 
\emph on
Survey2GIS
\emph default
 does not include any support for correctly parsing lat/lon data that uses
 
\begin_inset Quotes eld
\end_inset

E/W
\begin_inset Quotes erd
\end_inset

 prefixes and/or 
\begin_inset Quotes eld
\end_inset

degrees, minutes, seconds
\begin_inset Quotes erd
\end_inset

 notations.
\end_layout

\end_inset


\end_layout

\begin_layout Subsection
Setting input and output SRS
\begin_inset CommandInset label
LatexCommand label
name "subsec:Setting-input-and"

\end_inset


\end_layout

\begin_layout Standard
The user can specify the (given) SRS of the input data and the (intended)
 SRS of the output data.
 This is done via the options 
\begin_inset Quotes eld
\end_inset

--proj-in
\begin_inset Quotes erd
\end_inset

 and 
\begin_inset Quotes eld
\end_inset

--proj-out
\begin_inset Quotes erd
\end_inset

, respectively.
 Only one SRS can be set for all input files.
 It is not possible to mix input data with different SRS in one program
 run.
\end_layout

\begin_layout Standard
Setting 
\emph on
only
\emph default
 an 
\emph on
input
\emph default
 SRS allows 
\emph on
Survey2GIS 
\emph default
to adjust processing if needed.
 This is especially important in the case of latitude/longitude coordinate
 data which requires different mathematical treatment.
 The program will issue a warning or abort operations in situations where
 lat/lon data cannot be processed (correctly).
\end_layout

\begin_layout Standard
If 
\emph on
both
\emph default
 input and output SRS are set and are 
\emph on
different
\emph default
 from each other, then 
\emph on
Survey2GIS
\emph default
 will 
\emph on
reproject
\emph default
 the data (unless the input data's SRS is 
\begin_inset Quotes eld
\end_inset

local
\begin_inset Quotes erd
\end_inset

: see below) from the input to the output reference system.
 Reprojection generally involves a loss of accuracy.
 To minimize the latter, additional datum transformation options can be
 supplied by the user (see 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Datum-transformations"

\end_inset

) for details.
\end_layout

\begin_layout Standard
Setting 
\emph on
only
\emph default
 an 
\emph on
output
\emph default
 SRS will result in a processing error.
\end_layout

\begin_layout Standard
SRS can be specified using EPSG codes, PROJ.4 strings or, in a few common
 cases, via convenient shorthands (read on for details).
\end_layout

\begin_layout Subsubsection
Internal SRS abbreviations
\begin_inset CommandInset label
LatexCommand label
name "subsec:SRS-shorthands"

\end_inset


\end_layout

\begin_layout Standard
For convenience, 
\emph on
Survey2GIS
\emph default
 understands a small number of shorthand names that can be used to set the
 SRS (capitalization is ignored):
\end_layout

\begin_layout Description
local Setting the SRS to 
\begin_inset Quotes eld
\end_inset

local
\begin_inset Quotes erd
\end_inset

 tells 
\emph on
Survey2GIS
\emph default
 that the data uses a local, cartesian reference system with metric units
 (meters).
 It is not possible to reproject such data.
 The 
\begin_inset Quotes eld
\end_inset

local
\begin_inset Quotes erd
\end_inset

 abbreviation exists mainly for the sake of consistency and completeness.
 If the input SRS is set to 
\begin_inset Quotes eld
\end_inset

local
\begin_inset Quotes erd
\end_inset

 and the output SRS is set to any other value, the program will issue an
 error message and abort.
\end_layout

\begin_layout Description
wgs84 Setting the SRS to 
\begin_inset Quotes eld
\end_inset

wgs84
\begin_inset Quotes erd
\end_inset

 is identical to setting it to 
\begin_inset Quotes eld
\end_inset

EPSG:4326
\begin_inset Quotes erd
\end_inset

 (latitude and longitude values with WGS 84 datum).
 Note that 
\emph on
Survey2GIS
\emph default
 assumes that all input data uses 
\emph on
decimal
\emph default
 notation (see 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Notes-on-SRS"
plural "false"
caps "false"
noprefix "false"

\end_inset

).
\end_layout

\begin_layout Description
web This abbreviation is used to specify the SRS used by Google Maps and
 similar online mapping tools.
 Please see 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Web-Mercator"

\end_inset

 for details.
 It is identical with 
\begin_inset Quotes eld
\end_inset

EPSG:3857
\begin_inset Quotes erd
\end_inset

.
\end_layout

\begin_layout Description
utm
\emph on
XX
\emph default
N/S It is possible to specify a UTM zone (WGS 84 datum is always assumed)
 by replacing 
\begin_inset Quotes eld
\end_inset


\emph on
XX
\emph default

\begin_inset Quotes erd
\end_inset

 with a one or two-digit zone number and 
\begin_inset Quotes eld
\end_inset

N
\begin_inset Quotes erd
\end_inset

(orth) or 
\begin_inset Quotes eld
\end_inset

S
\begin_inset Quotes erd
\end_inset

(outh) designation.
 E.
\begin_inset space \thinspace{}
\end_inset

g.
 specify 
\begin_inset Quotes eld
\end_inset

utm32s
\begin_inset Quotes erd
\end_inset

 for 
\begin_inset Quotes eld
\end_inset

UTM with WGS 84 datum, zone 32, north
\begin_inset Quotes erd
\end_inset

.
 The EPSG equivalents are codes 
\begin_inset Quotes eld
\end_inset

32601
\begin_inset Quotes erd
\end_inset

 through 
\begin_inset Quotes eld
\end_inset

32760
\begin_inset Quotes erd
\end_inset

.
\end_layout

\begin_layout Description
dhdn
\emph on
X
\emph default
 This abbreviation is used for the Gauß-Krüger national grid of Germany.
 Replace 
\begin_inset Quotes eld
\end_inset


\emph on
X
\emph default

\begin_inset Quotes erd
\end_inset

 with zone identifiers 
\begin_inset Quotes eld
\end_inset

2
\begin_inset Quotes erd
\end_inset

 to 
\begin_inset Quotes eld
\end_inset

5
\begin_inset Quotes erd
\end_inset

.
 The EPSG equivalents are codes 
\begin_inset Quotes eld
\end_inset

31466
\begin_inset Quotes erd
\end_inset

 through (including) 
\begin_inset Quotes eld
\end_inset

31469
\begin_inset Quotes erd
\end_inset

.
\end_layout

\begin_layout Description
osgb This is the traditional (still in use) grid system of the British Ordnance
 Survey (OSGB).
 It is identical with 
\begin_inset Quotes eld
\end_inset

EPSG:27700
\begin_inset Quotes erd
\end_inset

.
\end_layout

\begin_layout Subsubsection
Using EPSG codes
\begin_inset CommandInset label
LatexCommand label
name "subsec:Using-EPSG-codes"

\end_inset


\end_layout

\begin_layout Standard
If no internal abbreviation (see 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:SRS-shorthands"
plural "false"
caps "false"
noprefix "false"

\end_inset

) is available, the second most simple way to specify an SRS is to pass
 its EPSG code (in fact, all SRS abbrevations are automatically mapped to
 their EPSG equivalents by 
\emph on
Survey2GIS
\emph default
).
\end_layout

\begin_layout Standard
The full EPSG SRS database is available for reference online at 
\begin_inset Flex URL
status open

\begin_layout Plain Layout

http://www.epsg-registry.org/
\end_layout

\end_inset

.
\end_layout

\begin_layout Standard
Setting an EPSG code as input or output SRS is done by prefixing the EPSG
 code with 
\begin_inset Quotes eld
\end_inset

epsg:
\begin_inset Quotes erd
\end_inset

 (capitalization is ignored).
\end_layout

\begin_layout Standard
Valid examples:
\end_layout

\begin_layout LyX-Code
--proj-in=EPSG:27700
\end_layout

\begin_layout LyX-Code
--proj-out=epsg:4326
\end_layout

\begin_layout Standard
\begin_inset Box Boxed
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
thickness "0.4pt"
separation "3pt"
shadowsize "4pt"
framecolor "black"
backgroundcolor "none"
status open

\begin_layout Plain Layout
Note that 
\emph on
Survey2GIS
\emph default
 only supports a subset of EPSG definitions, namely those that are also
 supported by the included version of 
\emph on
PROJ.4
\emph default
 (see 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Using-PROJ.4-strings"
plural "false"
caps "false"
noprefix "false"

\end_inset

).
 Also note that PROJ.4 uses a simple, potentially imperfect, translation
 from EPSG codes to its own format, which may incur some loss of information/acc
uracy (see: 
\begin_inset Flex URL
status open

\begin_layout Plain Layout

http://proj4.org/faq.html
\backslash
#how-do-i-use-epsg-coordinate-system-codes-with-proj
\end_layout

\end_inset

).
 If this is an issue, consider specifying PROJ.4 format paramaters directly
 (see 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Using-PROJ.4-strings"
plural "false"
caps "false"
noprefix "false"

\end_inset

).
\end_layout

\end_inset


\end_layout

\begin_layout Subsubsection
Using PROJ.4 strings
\begin_inset CommandInset label
LatexCommand label
name "subsec:Using-PROJ.4-strings"

\end_inset


\end_layout

\begin_layout Standard
In some scenarios, neither the use of an internal SRS abbreviation nor the
 specification of an EPSG code (see 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:SRS-shorthands"
plural "false"
caps "false"
noprefix "false"

\end_inset

 and 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Using-EPSG-codes"
plural "false"
caps "false"
noprefix "false"

\end_inset

, respectively) may be sufficient to obtain accurate reprojection results.
\end_layout

\begin_layout Standard
In such cases, full PROJ.4 SRS definitions (
\begin_inset Quotes eld
\end_inset

PROJ.4 strings
\begin_inset Quotes erd
\end_inset

) can be provided as input and/or output SRS definitions.
 
\end_layout

\begin_layout Standard
PROJ.4 strings consists of several 
\emph on
tokens
\emph default
, each one prefixed with a 
\begin_inset Quotes eld
\end_inset

+
\begin_inset Quotes erd
\end_inset

 and separated by a space from the next one.
 Capitalization of token names does not matter to 
\emph on
Survey2GIS
\emph default
, as it automatically takes care of converting all token names to lowercase
 text.
 The token's name is followed by its value, separated from the name using
 an equal sign (
\begin_inset Quotes eld
\end_inset

=
\begin_inset Quotes erd
\end_inset

) 
\emph on
without
\emph default
 further whitespace.
\end_layout

\begin_layout Standard
For example, the PROJ.4 version of 
\begin_inset Quotes eld
\end_inset

EPSG:4326
\begin_inset Quotes erd
\end_inset

 (lat/lon data with WGS 84 datum) is defined as follows:
\end_layout

\begin_layout LyX-Code
+proj=longlat +ellps=WGS84 +datum=WGS84
\end_layout

\begin_layout Standard
And 
\begin_inset Quotes eld
\end_inset

EPSG:32601
\begin_inset Quotes erd
\end_inset

 (UTM zone 1, north) is defined as:
\end_layout

\begin_layout LyX-Code
+proj=utm +zone=1 +ellps=WGS84 +datum=WGS84 +units=m
\end_layout

\begin_layout Standard
Please consult the PROJ.4 online documentation at 
\begin_inset Flex URL
status open

\begin_layout Plain Layout

http://proj4.org/
\end_layout

\end_inset

 for full details, and also mind the information in 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Reprojections using PROJ.4"
plural "false"
caps "false"
noprefix "false"

\end_inset

.
\end_layout

\begin_layout Standard
In addition, the following may be helpful when trying to compose valid PROJ.4
 strings:
\end_layout

\begin_layout Itemize

\emph on
Survey2GIS
\emph default
 prints out the full PROJ.4 definitions for all user-provided SRS as part
 of its standard logging output.
\end_layout

\begin_layout Itemize
The website at 
\begin_inset Flex URL
status open

\begin_layout Plain Layout

http://www.spatialreference.org/
\end_layout

\end_inset

 can be used to convert between different SRS representations, including
 EPGS and PROJ.4.
\end_layout

\begin_layout Standard
An additional 
\begin_inset Quotes eld
\end_inset

+no_defs
\begin_inset Quotes erd
\end_inset

 token is 
\emph on
always
\emph default
 appended to the PROJ.4 string by 
\emph on
Survey2GIS
\emph default
.
 This prevents any (potentially interfering) defaults that might be provided
 by PROJ.4 from being applied.
\end_layout

\begin_layout Standard
Datum transformation parameters and/or a datum shift grid file (see 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Datum-transformations"
plural "false"
caps "false"
noprefix "false"

\end_inset

) can be appended using the tokens 
\begin_inset Quotes eld
\end_inset

+towgs84
\begin_inset Quotes erd
\end_inset

 and 
\begin_inset Quotes eld
\end_inset

+nadgrid
\begin_inset Quotes erd
\end_inset

, respectively.
 Note that these tokens will automatically be discarded and replaced by
 the corresponding 
\emph on
Survey2GIS
\emph default
 option values, if the latter are provided (see also 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Datum-transformations"
plural "false"
caps "false"
noprefix "false"

\end_inset

).
\end_layout

\begin_layout Standard
\begin_inset Box Boxed
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
thickness "0.4pt"
separation "3pt"
shadowsize "4pt"
framecolor "black"
backgroundcolor "none"
status open

\begin_layout Plain Layout
Important: PROJ.4 definition strings are case-sensitive! E.
\begin_inset space \thinspace{}
\end_inset

g.
 specifying 
\begin_inset Quotes eld
\end_inset

+ellps=wgs84
\begin_inset Quotes erd
\end_inset

 will produce an error (the correct form being 
\begin_inset Quotes eld
\end_inset

+ellps=WGS84
\begin_inset Quotes erd
\end_inset

).
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Box Boxed
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
thickness "0.4pt"
separation "3pt"
shadowsize "4pt"
framecolor "black"
backgroundcolor "none"
status open

\begin_layout Plain Layout
Important: PROJ.4 does not understand international numeric locales! This
 means that it is 
\emph on
not
\emph default
 possible to use decimal separators other than 
\begin_inset Quotes eld
\end_inset

.
\begin_inset Quotes erd
\end_inset

 (period) in PROJ.4 token values!
\end_layout

\end_inset


\end_layout

\begin_layout Subsubsection
Web Mercator
\begin_inset CommandInset label
LatexCommand label
name "subsec:Web-Mercator"

\end_inset


\end_layout

\begin_layout Standard
Popular Internet navigation and visualization tools, such as Google Earth/Maps,
 OpenStreetMap, etc., use a perfect sphere as Earth model (i.
\begin_inset space \thinspace{}
\end_inset

e.
 the length of the equator is assumed to be exactly the same as the length
 of any meridian arc).
 This is not a realistic geodetic assumption, but it increases 3D performance.
 This perfectly spherical Earth model is called 
\begin_inset Quotes eld
\end_inset

Web Mercator
\begin_inset Quotes erd
\end_inset

 (see 
\begin_inset Flex URL
status open

\begin_layout Plain Layout

https://en.wikipedia.org/wiki/Web_Mercator
\end_layout

\end_inset

).
 The tricky thing is that these tools will 
\emph on
pretend
\emph default
 that the coordinates displayed on a Web Mercator 
\begin_inset Quotes eld
\end_inset

ellipsoid
\begin_inset Quotes erd
\end_inset

 are 
\emph on
identical
\emph default
 with those on a geodetic WGS 84 ellipsoid (an effect of this is that length
 and area measurements using a 3D tool with a Web Mercator sphere will be
 wrong compared to the real, geodetic measurements on a WGS 84 Earth model):
 the coordinates seen on the 3D display are 
\emph on
meant
\emph default
 to be WGS 84.
\end_layout

\begin_layout Standard
Paradoxically, when performing a geodetically 
\emph on
correct
\emph default
 reprojection with a datum conversion between the two (see 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Datum-transformations"

\end_inset

) 
\emph on
wrong
\emph default
 
\emph on
Y
\emph default
 coordinates will result! This is due to PROJ.4 automatically compensating
 for the difference in 
\emph on
N-S radii
\emph default
 between the two systems' Earth models.
\end_layout

\begin_layout Standard
According to 
\begin_inset Flex URL
status open

\begin_layout Plain Layout

http://spatialreference.org/ref/sr-org/6864/
\end_layout

\end_inset

, the error can be quite significant:
\end_layout

\begin_layout Quote
\begin_inset Quotes eld
\end_inset

Relative to an ellipsoidal development errors of up to 800 meters in position
 and 0.7 percent in scale may arise.
\begin_inset Quotes erd
\end_inset


\end_layout

\begin_layout Standard
According to EPSG entry:
\end_layout

\begin_layout Quote
\begin_inset Quotes eld
\end_inset

Relative to WGS 84 / World Mercator (CRS code 3395) errors of 0.7 percent
 in scale and differences in northing of up to 43km in the map (equivalent
 to 21km on the ground) may arise.
\begin_inset Quotes erd
\end_inset


\end_layout

\begin_layout Standard
To circumvent this problem and maintain the intuitive assumption that e.
\begin_inset space \thinspace{}
\end_inset

g.
 the coordinates of locations identified on a Google Earth display are the
 same as their counterparts on a 
\begin_inset Quotes eld
\end_inset

proper
\begin_inset Quotes erd
\end_inset

 map with WGS 84 datum, 
\emph on
Survey2GIS
\emph default
 will perform a two-stage reprojection whenever Web Mercator data is involved:
\end_layout

\begin_layout Enumerate
The Web Mercator-based coordinates are redeclared as WGS 84 
\emph on
without
\emph default
 any reprojection, 
\emph on
pretending
\emph default
 that they are identical.
\end_layout

\begin_layout Enumerate
The 
\begin_inset Quotes eld
\end_inset

converted
\begin_inset Quotes erd
\end_inset

 WGS 84 coordinates will then be reprojected 
\begin_inset Quotes eld
\end_inset

properly
\begin_inset Quotes erd
\end_inset

 to the desired output SRS (unless 
\begin_inset Quotes eld
\end_inset

WGS 84
\begin_inset Quotes erd
\end_inset

 is the desired target system, in which case no further action is required).
\end_layout

\begin_layout Standard
Be advised however, that this is a work-around trick and that 3D tools with
 Web Mercator models are not suitable for applications that require geodetic
 correctness and accurate measurements.
\end_layout

\begin_layout Standard
This mechanism will 
\emph on
only
\emph default
 work if either 
\begin_inset Quotes eld
\end_inset

EPSG:3857
\begin_inset Quotes erd
\end_inset

 or the abbreviation 
\begin_inset Quotes eld
\end_inset

web
\begin_inset Quotes erd
\end_inset

 is used to specify the input/output SRS.
 If a PROJ.4 string is used, then it must include the necessary additions
 to handle the 
\emph on
Y
\emph default
 coordinates compensation (see 
\begin_inset Flex URL
status collapsed

\begin_layout Plain Layout

http://proj4.org/faq.html
\backslash
#changing-ellipsoid-why-can-t-i-convert-from-wgs84-to-google-earth-virtual-globe
-mercator
\end_layout

\end_inset

 for details).
\end_layout

\begin_layout Standard
Providing any datum transformation parameters or a grid shift file (see
 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Datum-transformations"
plural "false"
caps "false"
noprefix "false"

\end_inset

) will lead to a program error if Web Mercator is the source or target SRS!
\end_layout

\begin_layout Subsection
Reprojection using PROJ.4
\begin_inset CommandInset label
LatexCommand label
name "subsec:Reprojections using PROJ.4"

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Box Boxed
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
thickness "0.4pt"
separation "3pt"
shadowsize "4pt"
framecolor "black"
backgroundcolor "none"
status open

\begin_layout Plain Layout
Important: This version of 
\emph on
Survey2GIS
\emph default
 uses PROJ.4, version 
\emph on
4
\emph default
.
 At the time of writing, a major revision of PROJ.4, leading to version 
\emph on
5
\emph default
 and involving numerous changes in the user interface and underlying reprojectio
n engine, was in progress.
 Please make sure to refer to the correct PROJ.4 version when looking for
 further information online.
\end_layout

\end_inset


\end_layout

\begin_layout Standard
If both input and output SRS are provided, are valid (see 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Setting-input-and"
plural "false"
caps "false"
noprefix "false"

\end_inset

), and neither is a 
\begin_inset Quotes eld
\end_inset

local
\begin_inset Quotes erd
\end_inset

 system (see 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:SRS-shorthands"
plural "false"
caps "false"
noprefix "false"

\end_inset

), then 
\emph on
Survey2GIS
\emph default
 will reproject all coordinate data 
\emph on
from
\emph default
 the input SRS 
\emph on
to
\emph default
 the output SRS.
\end_layout

\begin_layout Standard
Reprojection includes all point/vertex coordinates as well as (if present)
 label coordinates (see 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Labels"
plural "false"
caps "false"
noprefix "false"

\end_inset

).
\end_layout

\begin_layout Standard

\emph on
Survey2GIS
\emph default
 relies on the open source library 
\emph on
PROJ.4
\emph default
 (
\begin_inset Flex URL
status open

\begin_layout Plain Layout

http://proj4.org/
\end_layout

\end_inset

) for SRS and reprojection support.
 Therefore, its capabilities for data reprojection, geodesic datum support,
 etc.
 are identical with those provided by 
\emph on
PROJ.4
\emph default
.
 Essentially, reprojection functionality is limited to 2D geographic (lat/lon)
 and 2D planimetric (
\emph on
X/Y
\emph default
) SRS.
\end_layout

\begin_layout Standard

\emph on
Survey2GIS
\emph default
 ships with a bundled copy of 
\emph on
PROJ.4
\emph default
.
 The exact version number of the copy used by 
\emph on
Survey2GIS
\emph default
 is reported in the processing log.
 The bundled subfolder 
\begin_inset Quotes eld
\end_inset

proj
\begin_inset Quotes erd
\end_inset

 contains a database file with EPSG codes (called 
\begin_inset Quotes eld
\end_inset

epsg
\begin_inset Quotes erd
\end_inset

: see 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Using-EPSG-codes"
plural "false"
caps "false"
noprefix "false"

\end_inset

) for use by PROJ.4 and some grid files (you can add your own: see 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Grid-based-reprojection"
plural "false"
caps "false"
noprefix "false"

\end_inset

).
 This folder is essential for PROJ.4 to work correctly, and it should reside
 within the folder from which 
\emph on
Survey2GIS
\emph default
 is launched (in the case of the Windows version, this is the location of
 
\begin_inset Quotes eld
\end_inset

survey2gis.exe
\begin_inset Quotes erd
\end_inset

, 
\emph on
not
\emph default
 
\begin_inset Quotes eld
\end_inset

survey2gis.bat
\begin_inset Quotes erd
\end_inset

):
\end_layout

\begin_layout Standard
The 
\begin_inset Quotes eld
\end_inset

proj
\begin_inset Quotes erd
\end_inset

 folder and the 
\begin_inset Quotes eld
\end_inset

epsg
\begin_inset Quotes erd
\end_inset

 file residing inside of it are part of the default distribution of 
\emph on
Survey2GIS
\emph default
 and thus PROJ.4 should work without problems.
\end_layout

\begin_layout Standard
Alternatively, the environment variable 
\begin_inset Quotes eld
\end_inset

PROJ_LIB
\begin_inset Quotes erd
\end_inset

 can be set to contain the full path to a copy of the 
\begin_inset Quotes eld
\end_inset

proj
\begin_inset Quotes erd
\end_inset

 folder.
 And as a third fallback option, PROJ.4 will look for 
\begin_inset Quotes eld
\end_inset

proj
\begin_inset Quotes erd
\end_inset

 in a default, system-wide location (the latter will vary, depending on
 the operating system).
\end_layout

\begin_layout Standard
If the 
\begin_inset Quotes eld
\end_inset

proj
\begin_inset Quotes erd
\end_inset

 folder does not exist (in any of the locations referenced above) or is
 not readable, 
\emph on
Survey2GIS
\emph default
 will still run, but reprojection functionality will be limited, and attempting
 to perform certain reprojections (e.
\begin_inset space \thinspace{}
\end_inset

g.
 involving EPSG codes) will result in an error.
\end_layout

\begin_layout Subsubsection
Datum transformations
\begin_inset CommandInset label
LatexCommand label
name "subsec:Datum-transformations"

\end_inset


\end_layout

\begin_layout Standard
Where SRS with different datums (such as 
\begin_inset Quotes eld
\end_inset

WGS 84
\begin_inset Quotes erd
\end_inset

 vs.
 
\begin_inset Quotes eld
\end_inset

ED50
\begin_inset Quotes erd
\end_inset

) are involved, the key to minimizing loss of accuracy during reprojection
 is to specify the best available 
\emph on
datum transformation
\emph default
.
\end_layout

\begin_layout Standard
A geodetic/map datum is essential information that describes the 
\begin_inset Quotes eld
\end_inset

anchor point
\begin_inset Quotes erd
\end_inset

 and orientation of an SRS.
 In practice, the Earth model (such as a geodetic ellipsoid) is also considered
 part of the (extended) map datum.
\end_layout

\begin_layout Standard
Historically, many different datums have been used for mapping around the
 globe.
 In more recent times, mapping practice has converged on a smaller number
 of datums used for large areas of the world.
 The most common map datum, which also underlies the modern UTM system,
 is the 
\begin_inset Quotes eld
\end_inset

World Geodetic System
\begin_inset Quotes erd
\end_inset

 datum of 1984 (WGS 84), but other datums, such as ETRS89 also remain in
 use.
\end_layout

\begin_layout Standard
When computing reprojections, 
\emph on
Survey2GIS
\emph default
 (more accurately: the PROJ.4 library on which it relies) uses WGS 84 as
 a common 
\begin_inset Quotes eld
\end_inset

pivotal datum
\begin_inset Quotes erd
\end_inset

: if datums other than WGS 84 are involved, then coordinate transformations
 pass from the input SRS datum through WGS 84 and into the output SRS datum.
 Consequentially, it is possible to specify datum transformation options
 
\emph on
to
\emph default
 WGS 84 from the 
\emph on
input
\emph default
 SRS.
\end_layout

\begin_layout Standard
When using SRS abbreviations or EPSG codes for specify input/output SRS
 in 
\emph on
Survey2GIS
\emph default
 (see 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Setting-input-and"
plural "false"
caps "false"
noprefix "false"

\end_inset

), commonly applied transformations parameters to WGS 84 are already included
 in the SRS definition.
 However, there is no guarantee that the default transformation achieves
 the best possible results.
 Therefore, datum transformations can also be provided by the user.
\end_layout

\begin_layout Standard
There are two basic datum transformation types: Three-parameter transformations
 provide translation (shift) factors towards the WGS 84 datum along the
 geographic 
\emph on
X
\emph default
, 
\emph on
Y
\emph default
 and 
\emph on
Z
\emph default
 axes, while seven-paramater transformations also specify three rotational
 factors (again, around the geographic axes) and a scale factor.
\end_layout

\begin_layout Standard
Transformation parameters can be set using the respective options provided
 by 
\emph on
Survey2GIS
\emph default
:
\end_layout

\begin_layout LyX-Code
--proj-dx
\end_layout

\begin_layout LyX-Code
--proj-dy
\end_layout

\begin_layout LyX-Code
--proj-dz
\end_layout

\begin_layout LyX-Code
--proj-rx
\end_layout

\begin_layout LyX-Code
--proj-ry
\end_layout

\begin_layout LyX-Code
--proj-rz
\end_layout

\begin_layout LyX-Code
--proj-ds
\end_layout

\begin_layout Standard
The first three options (
\begin_inset Quotes eld
\end_inset

dx
\begin_inset Quotes erd
\end_inset

, 
\begin_inset Quotes eld
\end_inset

dy
\begin_inset Quotes erd
\end_inset

 and 
\begin_inset Quotes eld
\end_inset

dz
\begin_inset Quotes erd
\end_inset

) listed above are the translations factors of a three-parameter transformation.
 The following three (
\begin_inset Quotes eld
\end_inset

rx
\begin_inset Quotes erd
\end_inset

, 
\begin_inset Quotes eld
\end_inset

ry
\begin_inset Quotes erd
\end_inset

 and 
\begin_inset Quotes eld
\end_inset

rz
\begin_inset Quotes erd
\end_inset

) and the final factor (
\begin_inset Quotes eld
\end_inset

ds
\begin_inset Quotes erd
\end_inset

) are the rotational and scale factors, respectively of a seven-parameter
 transformation.
\end_layout

\begin_layout Standard
Note that these options can also be specified as part of a PROJ.4 string
 (token 
\begin_inset Quotes eld
\end_inset

towgs84
\begin_inset Quotes erd
\end_inset

: see 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Using-PROJ.4-strings"
plural "false"
caps "false"
noprefix "false"

\end_inset

), but options passed to 
\emph on
Survey2GIS
\emph default
 will replace/overwrite those in the PROJ.4 string (if present).
\end_layout

\begin_layout Standard
Note also that it is possible to specify only some of the options above
 (i.
\begin_inset space \thinspace{}
\end_inset

e.
 less than would be needed for a complete three or seven parameter transformatio
n).
 In such case,
\emph on
 Survey2GIS
\emph default
 will automatically complete the datum transformation parameters using default
 parameters where needed.
 The default value for the scale factor (
\begin_inset Quotes eld
\end_inset

--proj-ds
\begin_inset Quotes erd
\end_inset

) is 
\begin_inset Quotes eld
\end_inset

1
\begin_inset Quotes erd
\end_inset

, all other parameters (translation and rotation factors) default to 
\begin_inset Quotes eld
\end_inset

0
\begin_inset Quotes erd
\end_inset

.
\end_layout

\begin_layout Standard
User-defined transformation parameters will only applied by 
\emph on
Survey2GIS
\emph default
 if at least one parameter value deviates from its default value.
\end_layout

\begin_layout Standard
\begin_inset Box Boxed
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
thickness "0.4pt"
separation "3pt"
shadowsize "4pt"
framecolor "black"
backgroundcolor "none"
status open

\begin_layout Plain Layout
Important: Not supplying any transformation options to 
\emph on
Survey2GIS
\emph default
 does not mean that reprojection will not include a datum transformation.
 E.
\begin_inset space \thinspace{}
\end_inset

g.
 most EPSG SRS definitions (see 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Using-EPSG-codes"
plural "false"
caps "false"
noprefix "false"

\end_inset

) include their own transformation parameters, which 
\emph on
will
\emph default
 be applied if there is no user-specified transformation.
 
\emph on
Survey2GIS
\emph default
 will report any applied transformation parameters as part of its log output.
\end_layout

\end_inset


\end_layout

\begin_layout Standard
The following conditions will raise an error and abort the current processing
 job:
\end_layout

\begin_layout Itemize
Both numeric datum transformation parameters 
\emph on
and
\emph default
 a transformation grid file (see 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Grid-based-reprojection"
plural "false"
caps "false"
noprefix "false"

\end_inset

) have been specified (only one of the two can be applied).
\end_layout

\begin_layout Itemize
Numeric datum transformation parameters 
\emph on
or
\emph default
 a transformation grid file have been specified, but 
\begin_inset Quotes eld
\end_inset

--proj-in
\begin_inset Quotes erd
\end_inset

 or 
\begin_inset Quotes eld
\end_inset

--proj-out
\begin_inset Quotes erd
\end_inset

 are missing (the latter must both be specified to trigger a reprojection).
\end_layout

\begin_layout Standard
If the 
\emph on
output
\emph default
 SRS has 
\emph on
no
\emph default
 datum transformation (to WGS 84) definition, then a synthethic three-parameter
 transformation with all parameters (i.
\begin_inset space \thinspace{}
\end_inset

e.
 
\emph on
X
\emph default
, 
\emph on
Y
\emph default
 and 
\emph on
Z
\emph default
 axis shifts) set to 
\begin_inset Quotes eld
\end_inset

0
\begin_inset Quotes erd
\end_inset

 will automatically be added to it.
 The reason for this is that transformation parameters 
\emph on
must
\emph default
 be present in both input and output SRS if a datum transformation is required
 (see: 
\begin_inset Flex URL
status open

\begin_layout Plain Layout

http://proj4.org/faq.html
\backslash
#why-do-i-get-different-results-with-4-5-0-and-4-6-0
\end_layout

\end_inset

).
\end_layout

\begin_layout Standard
\begin_inset Box Boxed
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
thickness "0.4pt"
separation "3pt"
shadowsize "4pt"
framecolor "black"
backgroundcolor "none"
status open

\begin_layout Plain Layout
Important: For the reason given in 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Using-PROJ.4-strings"
plural "false"
caps "false"
noprefix "false"

\end_inset

, it is 
\emph on
not
\emph default
 possible to use decimal separators other than 
\begin_inset Quotes eld
\end_inset

.
\begin_inset Quotes erd
\end_inset

 (period) in the specification of datum transformation parameters!
\end_layout

\end_inset


\end_layout

\begin_layout Subsubsection
Grid-based reprojection
\begin_inset CommandInset label
LatexCommand label
name "subsec:Grid-based-reprojection"

\end_inset


\end_layout

\begin_layout Standard
Some application cases, such as high-precision engineering and cadastral
 mapping, may require a reprojection accuracy that cannot be achieved with
 even the best available parametric datum transformations (see 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Datum-transformations"
plural "false"
caps "false"
noprefix "false"

\end_inset

) in all scenarios.
 In such cases, the alternative is to use a dense set (
\begin_inset Quotes eld
\end_inset

grid
\begin_inset Quotes erd
\end_inset

) of local correction vectors, provided specifically for reprojection to
 the target SRS.
\end_layout

\begin_layout Standard
A file (
\begin_inset Quotes eld
\end_inset

grid file
\begin_inset Quotes erd
\end_inset

) containing such correction data can be passed to 
\emph on
Survey2GIS
\emph default
, which will in turn pass the data through to the underlying PROJ.4 library.
 The grid file's data coverage must match the extents of the (reprojected)
 data in the target SRS, otherwise it will simply have no effect.
\end_layout

\begin_layout Standard
The full path and name of a grid file can be supplied to 
\emph on
Survey2GIS
\emph default
 via the corresponding option:
\end_layout

\begin_layout LyX-Code
--proj-grid=
\end_layout

\begin_layout Standard
For more on using grid files read section 
\begin_inset Quotes eld
\end_inset

nadgrids - Grid Based Datum Adjustments
\begin_inset Quotes erd
\end_inset

 at 
\begin_inset Flex URL
status open

\begin_layout Plain Layout

http://proj.maptools.org/gen_parms.html
\end_layout

\end_inset

.
\end_layout

\begin_layout Standard
Note that PROJ.4 allows more than one grid file to be used, but only one
 can be specified using the dedicated option of 
\emph on
Survey2GIS
\emph default
.
 Alternatively, by specifying the PROJ.4 string directly (see 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Using-PROJ.4-strings"
plural "false"
caps "false"
noprefix "false"

\end_inset

) and using the 
\begin_inset Quotes eld
\end_inset

+nadgrids=
\begin_inset Quotes erd
\end_inset

 token, several grid shift files can be supplied (separated by commas).
 In the latter case, the first grid file whose extents match the input data
 will be used for the reprojection.
 When using the 
\begin_inset Quotes eld
\end_inset

+nadgrids
\begin_inset Quotes erd
\end_inset

 token in a PROJ.4 string, do not use the 
\begin_inset Quotes eld
\end_inset

--proj-grid=
\begin_inset Quotes erd
\end_inset

 option, as the latter will automatically replace the former.
\end_layout

\begin_layout Standard
\begin_inset Box Boxed
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
thickness "0.4pt"
separation "3pt"
shadowsize "4pt"
framecolor "black"
backgroundcolor "none"
status open

\begin_layout Plain Layout
Note: any relative path given in the value of the 
\begin_inset Quotes eld
\end_inset

--proj-grid=
\begin_inset Quotes erd
\end_inset

 option will be resolved to a full, absolute path automatically by 
\emph on
Survey2GIS
\emph default
, so that PROJ.4 can correctly locate the file.
 When instead using the 
\begin_inset Quotes eld
\end_inset

+nadgrids
\begin_inset Quotes erd
\end_inset

 token in a PROJ.4 string, users must take care of providing complete paths
 themselves.
\end_layout

\end_inset


\end_layout

\begin_layout Subsection
Notes on SRS and reprojection issues
\begin_inset CommandInset label
LatexCommand label
name "subsec:Notes-on-SRS"

\end_inset


\end_layout

\begin_layout Standard
Reprojection is a complex process.
 This section details some of the trickier issues that are involved in the
 process and gives advice on how to obtain the best possible results.
\end_layout

\begin_layout Description
Shape
\begin_inset space ~
\end_inset

preservation
\begin_inset space ~
\end_inset

in
\begin_inset space ~
\end_inset

large-area
\begin_inset space ~
\end_inset

surveys Some reprojection types (notable those involving a transformation
 from planimetric 
\emph on
X
\emph default
/
\emph on
Y
\emph default
 to geographic lat/lon data) can result in a significant loss of geometric
 accuracy.
 In such cases, better reprojection results may be obtained by adding more
 vertices to lines and polygon boundaries during surveying.
\end_layout

\begin_layout Description
Datum
\begin_inset space ~
\end_inset

transformation
\begin_inset space ~
\end_inset

quality Using the best possible datum transformation is key to reprojection
 accuracy where systems of different natures are involved.
 The default transformation parameters contained in EPSG codes are not always
 the best choice.
 Grid files should be used where available; Search the EPSG database at
 
\begin_inset Flex URL
status open

\begin_layout Plain Layout

http://www.epsg-registry.org/
\end_layout

\end_inset

 for alternative transformation parameters and accuracy assessments and
 read section 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Datum-transformations"
plural "false"
caps "false"
noprefix "false"

\end_inset

 of this manual.
\end_layout

\begin_layout Description
Converting
\begin_inset space ~
\end_inset

SRS
\begin_inset space ~
\end_inset

representations: The website at 
\begin_inset Flex URL
status open

\begin_layout Plain Layout

http://www.spatialreference.org/
\end_layout

\end_inset

 provides a very helpful database of global SRS in a variety of common formats,
 including EPSG, PROJ.4 and WKT (Well Known Text).
 It is also possible to download 
\begin_inset Quotes eld
\end_inset

.prj
\begin_inset Quotes erd
\end_inset

 auxillary files for adding SRS info to existing Shapefiles.
\end_layout

\begin_layout Description
Lat/lon
\begin_inset space ~
\end_inset

data: 
\emph on
Survey2GIS
\emph default
 expects all lat/lon data ito use decimal degrees.
 Sufficient locational accuracy in lat/lon coordinates may require many
 decimal places.
 Helpful information and guidance on this topic is available at 
\begin_inset Flex URL
status open

\begin_layout Plain Layout

https://en.wikipedia.org/wiki/Decimal_degrees
\end_layout

\end_inset

.
\end_layout

\begin_layout Description
Vertical
\begin_inset space ~
\end_inset

(Z)
\begin_inset space ~
\end_inset

coordinate
\begin_inset space ~
\end_inset

units: PROJ.4 automatically detects the correct 
\emph on
Z
\emph default
 units from the SRS definition before doing the reprojection.
 However, 
\emph on
Survey2GIS
\emph default
 
\emph on
always
\emph default
 assumes that 
\emph on
Z
\emph default
 is in 
\emph on
meters
\emph default
 when re-orienting coordinates (such as 
\begin_inset Quotes eld
\end_inset

Local X-Z
\begin_inset Quotes erd
\end_inset

: 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Local-X-Z-orientation"

\end_inset

) or performing any other 3D operations.
 These two assumptions may collide and produce unexpected results in rare
 circumstances.
\end_layout

\begin_layout Standard
\begin_inset Newpage newpage
\end_inset


\end_layout

\begin_layout Section
Topological quality and cleaning
\begin_inset CommandInset label
LatexCommand label
name "sec:Topologische-Säuberung"

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Box Boxed
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
thickness "0.4pt"
separation "3pt"
shadowsize "4pt"
framecolor "black"
backgroundcolor "none"
status open

\begin_layout Plain Layout
Note: The processes described here assume that there is 
\begin_inset Quotes eld
\end_inset

something wrong
\begin_inset Quotes erd
\end_inset

 with the original input data and that it needs fixing.
 More precisely, it is assumed that the input data deviates from the 
\emph on
intended
\emph default
 geometries significantly enough to warrant some automated adjustment that
 will (ideally just slightly) modify the measured points, lines and polygons
 to improve the quality of the outcome.
 Note also that 
\emph on
Survey2GIS
\emph default
 assumes that the input data represents geometries on a relatively planar
 surface, meaning that they are similar to their flat 2D counterparts (i.
\begin_inset space \thinspace{}
\end_inset

e.
 constant 
\begin_inset Formula $Z=0.0$
\end_inset

) and have little potential for overlaps and undercuts.
 If this is not the case or you wish to rather preserve the data closer
 to those originally surveyed, then set 
\begin_inset Quotes eld
\end_inset

--tolerance=
\begin_inset Quotes erd
\end_inset

, 
\begin_inset Quotes eld
\end_inset

--snapping=
\begin_inset Quotes erd
\end_inset

 and 
\begin_inset Quotes eld
\end_inset

--dangling=
\begin_inset Quotes erd
\end_inset

 options to 
\begin_inset Quotes eld
\end_inset

0.0
\begin_inset Quotes erd
\end_inset

 to reduce the 
\begin_inset Quotes eld
\end_inset

aggressiveness
\begin_inset Quotes erd
\end_inset

 of 
\emph on
most
\emph default
 topological cleaning actions.
 In addition, option 
\begin_inset Quotes eld
\end_inset

--topology=
\begin_inset Quotes erd
\end_inset

 can be used to turn specific cleaning functions on or off (see details
 below).
\end_layout

\end_inset


\end_layout

\begin_layout Standard
GIS-based data processing has specific requirements regarding data quality.
 One of the most important ones is the 
\emph on
topological correctness
\emph default
 of data.
 GIS use topological relations such as 
\begin_inset Quotes eld
\end_inset

contains
\begin_inset Quotes erd
\end_inset

, 
\begin_inset Quotes eld
\end_inset

intersects
\begin_inset Quotes erd
\end_inset

 or 
\begin_inset Quotes eld
\end_inset

overlaps
\begin_inset Quotes erd
\end_inset

 to query and filter spatial data.
 In order for such queries to return correct results, the data must be topologic
ally correct.
\end_layout

\begin_layout Standard
To improve topological quality, 
\emph on
Survey2GIS
\emph default
 subjects 
\emph on
all selected
\emph default
 
\emph on
input data
\emph default
 (by default, this means all data, but see 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:selections"

\end_inset

 for how to reduce the set of geometries to a selection) to some essential
 checks and tries to automatically fix common problems.
 It is important to note, however, that the GIS topology model is strictly
 two-dimensional, and that 
\emph on
Survey2GIS
\emph default
 is also mostly limited to two-dimensional topology checks and corrections.
 Basically, what this means is that data is treated as though all 
\emph on
Z
\emph default
 coordinates were constant 
\begin_inset Quotes eld
\end_inset

0
\begin_inset Quotes erd
\end_inset

.
 The more planar the actual input data, the better the chances that topological
 corrections will work accurately and as intended.
\end_layout

\begin_layout Standard
Even though many GIS offer there own, sometimes very powerful, topological
 cleaning tools, it is best to let 
\emph on
Survey2GIS
\emph default
 do the basic work, as it has the information available at the level of
 
\begin_inset Quotes eld
\end_inset

raw
\begin_inset Quotes erd
\end_inset

 measurements, whereas the GIS can only work on the reconstructed geometries.
 There are two stages at which topological errors can be detected: When
 each input file is being processed and after all geometries found in all
 input files have been built; and 
\emph on
Survey2GIS
\emph default
 will report topological issues for both stages separately.
\end_layout

\begin_layout Standard
Starting with version 1.5.2, 
\emph on
Survey2GIS
\emph default
 supports turning on or off specific cleaning operations.
 Because these operations run consecutively, with some of them depending
 on the effects of previous ones, there is only group level control.
 This is achieved via setting option 
\begin_inset Quotes eld
\end_inset

--topology=
\begin_inset Quotes erd
\end_inset

 to one of the following values (sections with specific explanations are
 given in brackets):
\end_layout

\begin_layout Description
none turns off all 
\begin_inset Quotes eld
\end_inset

drastic
\begin_inset Quotes erd
\end_inset

 topological cleaning.
 Some operations are still performed to ensure essential aspects of data
 quality: duplicate points (
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Doppelte-Stützpunkte"
plural "false"
caps "false"
noprefix "false"

\end_inset

), splinters (
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Splinters"
plural "false"
caps "false"
noprefix "false"

\end_inset

), multi-part geometries (
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Multi-part-geometries"
plural "false"
caps "false"
noprefix "false"

\end_inset

), self-intersections (
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Selbstüberschneidungen"
plural "false"
caps "false"
noprefix "false"

\end_inset

) and vertex ordering (
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Order-of-polygon"
plural "false"
caps "false"
noprefix "false"

\end_inset

).
\end_layout

\begin_layout Description
basic 
\emph on
additionally
\emph default
 runs operations that have no or little effect on shape: snapping to shared
 polygon boundaries (
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Gemeinsame-Grenzen"
plural "false"
caps "false"
noprefix "false"

\end_inset

), internal polygon boundaries (
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Internal-polygon-boundaries"
plural "false"
caps "false"
noprefix "false"

\end_inset

) and intersections (
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Intersections-of-lines"
plural "false"
caps "false"
noprefix "false"

\end_inset

).
\end_layout

\begin_layout Description
full 
\emph on
additionally
\emph default
 runs operations that can have a marked effect on shape, especially of polygons:
 polygon overlap removal (
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Gemeinsame-Grenzen"
plural "false"
caps "false"
noprefix "false"

\end_inset

), dangling lines (
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Dangling-line-ends"
plural "false"
caps "false"
noprefix "false"

\end_inset

).
\end_layout

\begin_layout Subsection
Problems and corrections
\begin_inset CommandInset label
LatexCommand label
name "subsec:Problems-and-corrections"

\end_inset


\end_layout

\begin_layout Standard
Typical survey data suffers from a limited set of topological error sources
 and defects, many of which can be corrected automatically by 
\emph on
Survey2GIS
\emph default
.
 This section describes the topological cleaning functions in the same sequence
 in which 
\emph on
Survey2GIS
\emph default
 carries them out.
\end_layout

\begin_layout Standard
Note that it is unlikely that the results of such automated cleaning will
 be perfect in practice.
 Real-world survey data contains erroneous and extreme measurements.
 In addition, the geometries processed by 
\emph on
Survey2GIS
\emph default
 are weakly structured (essentially, only by the order of records in the
 input file/s and the geometry types and sizes), and they have no 
\begin_inset Quotes eld
\end_inset

natural
\begin_inset Quotes erd
\end_inset

 hierarchy that would allow for perfect resolution of topological problems
 in all cases.
 Therefore, the cleaned output data should always be closely examined and
 manually improved (e.
\begin_inset space \thinspace{}
\end_inset

g.
 using flexible editing tools in GIS) as necessary.
\end_layout

\begin_layout Standard
In some cases, processing line and polygon geometries separately with selection
 commands (see 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:selections"

\end_inset

) can provide better control over the cleaning process.
 It may also be advisable to produce a version of the output with all high-level
 topological cleaning functions turned off (i.
\begin_inset space \thinspace{}
\end_inset

e setting program options 
\begin_inset Quotes eld
\end_inset

--tolerance=
\begin_inset Quotes erd
\end_inset

, 
\begin_inset Quotes eld
\end_inset

--snapping=
\begin_inset Quotes erd
\end_inset

 and 
\begin_inset Quotes eld
\end_inset

-
\begin_inset space \thinspace{}
\end_inset

-dangling=
\begin_inset Quotes eld
\end_inset

 to 
\begin_inset Quotes eld
\end_inset

0
\begin_inset Quotes erd
\end_inset

) to be able to review the effects of the cleaning process.
\end_layout

\begin_layout Subsubsection
Duplicate points (thinning)
\begin_inset CommandInset label
LatexCommand label
name "subsec:Doppelte-Stützpunkte"

\end_inset


\end_layout

\begin_layout Standard
Duplicate points result from measurements that are so close to each other
 that they should actually be considered one and the same point.
 They often represent redundant vertices and increase the likelihood that
 hard-to-spot self-intersections in complex polygon boundaries will occur
 (see 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Selbstüberschneidungen"

\end_inset

).
 But even simple point measurements can be problematic in this regard, e.
\begin_inset space \thinspace{}
\end_inset

g.
 when duplicate elevation points lead to over-representation during surface
 interpolation in GIS.
\end_layout

\begin_layout Standard
Therefore, 
\emph on
Survey2GIS
\emph default
 has the option 
\begin_inset Quotes eld
\end_inset

--tolerance=
\begin_inset Quotes erd
\end_inset

 that allows to set a distance threshold below which points will be considered
 duplicates.
 In such cases, only the first point measurement will be preserved and all
 of its duplicates discarded.
 This process is also called 
\begin_inset Quotes eld
\end_inset

thinning
\begin_inset Quotes erd
\end_inset

, and its effect depends on the geometry type:
\end_layout

\begin_layout Itemize

\emph on
Points
\emph default
 will be thinned by removing all points that are closer than the threshold
 to 
\emph on
any
\emph default
 other point within the 
\emph on
same
\emph default
 input file.
\end_layout

\begin_layout Itemize

\emph on
Lines
\emph default
 will be thinned by removing all vertices whose distance to the next (successive
) 
\emph on
vertex on the same line
\emph default
 is smaller than the threshold.
\end_layout

\begin_layout Itemize
Likewise, vertices on 
\emph on
polygon
\emph default
 boundaries will be thinned by removing all vertices whose distance to the
 next (successive) 
\emph on
vertex on the same polygon boundary
\emph default
 is smaller than the threshold.
\end_layout

\begin_layout Standard
In the case of 3D data, the distance threshold will be applied to the 3D
 straight-line distance.
 This helps preserve intentionally densified measurements along sharp terrain
 edges.
\end_layout

\begin_layout Standard
Point/vertex thinning can be turned off entirely by setting option 
\begin_inset Quotes eld
\end_inset

--tolerance=
\begin_inset Quotes erd
\end_inset

 to a value smaller than 
\begin_inset Quotes eld
\end_inset

0
\begin_inset Quotes erd
\end_inset

 to .
\end_layout

\begin_layout Standard
\begin_inset Box Boxed
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
thickness "0.4pt"
separation "3pt"
shadowsize "4pt"
framecolor "black"
backgroundcolor "none"
status open

\begin_layout Plain Layout
Warning: Large values for the thinning threshold (option 
\begin_inset Quotes eld
\end_inset

--tolerance=
\begin_inset Quotes erd
\end_inset

) can severly degrade the shapes of polygons and lines and produce unintended
 results.
 In most cases, using a threshold of a similar magnitude as the (estimated)
 accuracy of the survey is advisable.
 If point data must be thinned more aggressively, then the different geometry
 types can be processed separately using a selection command (see 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:selections"

\end_inset

).
\end_layout

\end_inset


\end_layout

\begin_layout Subsubsection
Splinters
\begin_inset CommandInset label
LatexCommand label
name "subsec:Splinters"

\end_inset


\end_layout

\begin_layout Standard
Splinters are geometries that are intended to be lines but have less than
 two vertices, and geometries intended to be polygons with less than three
 vertices.
 Such malformed geometries will simply be discarded.
\end_layout

\begin_layout Subsubsection
Multi-part geometries
\begin_inset CommandInset label
LatexCommand label
name "subsec:Multi-part-geometries"

\end_inset


\end_layout

\begin_layout Standard
While not a 
\begin_inset Quotes eld
\end_inset

topology issue
\begin_inset Quotes erd
\end_inset

 in the strict sense, the concept of multi-part geometries is an important
 aspect of data quality and consistency.
\end_layout

\begin_layout Standard
Sometimes physical constraints mean that the geometry that represents a
 single object must be recorded as separate, spatially disjunct 
\emph on
parts
\emph default
.
 E.
\begin_inset space \thinspace{}
\end_inset

g., this may be the case if the area of a polygonal object has been exposed
 in two separate locations.
 In order for such multi-part recording to work properly, all parts of the
 geometry must have the same value in 
\begin_inset Quotes eld
\end_inset

key_field
\begin_inset Quotes erd
\end_inset

 and the parser option 
\begin_inset Quotes eld
\end_inset

key_unique
\begin_inset Quotes erd
\end_inset

 must be enabled (see descriptions in 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Parser-Schemata"

\end_inset

).
 Provided that this is the case, 
\emph on
Survey2GIS
\emph default
 will then automatically assemble all parts into one 
\emph on
multi-part geometry
\emph default
 and assign it only one attribute data record in the GIS output.
\end_layout

\begin_layout Subsubsection
Self-intersections of polygon boundaries
\begin_inset CommandInset label
LatexCommand label
name "subsec:Selbstüberschneidungen"

\end_inset


\end_layout

\begin_layout Standard
A 
\emph on
self-intersection
\emph default
 occurs when a vertex 
\emph on
B
\emph default
 is placed behind its preceding vertex 
\emph on
A
\emph default
 in such a way that a straight line from 
\emph on
B
\emph default
 to its successor vertex 
\emph on
C
\emph default
 crosses over the existing polygon boundary.
 Small self-intersections can be hard to spot but will result in triangular,
 
\begin_inset Quotes eld
\end_inset

inverted
\begin_inset Quotes erd
\end_inset

 areas when visualizing the affected polygon in GIS:
\end_layout

\begin_layout Standard
\noindent
\align center
\begin_inset Graphics
	filename img/self-intersection-poly.png
	lyxscale 50
	width 40col%

\end_inset


\end_layout

\begin_layout Standard
Self-intersections are frequent topological errors that prevent many GIS
 operations from working properly.
 Currently, 
\emph on
Survey2GIS
\emph default
 cannot automatically correct this type of error.
 However, the risk of self-intersections occuring can be lowered by using
 a 
\begin_inset Quotes eld
\end_inset

--tolerance
\begin_inset Quotes erd
\end_inset

 setting equal to the minimal wanted distance between polygon boundary vertices
 (see also 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Doppelte-Stützpunkte"

\end_inset

).
\end_layout

\begin_layout Standard

\emph on
Survey2GIS
\emph default
 checks for self-intersections early on, when building lines and polygons
 from the input data.
 If this is the case, a warning will be issued.
 To facilitate manual cleaning of self-intersections, new vertices will
 be added to geometries at self-intersection points.
\end_layout

\begin_layout Standard
\begin_inset Box Boxed
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
thickness "0.4pt"
separation "3pt"
shadowsize "4pt"
framecolor "black"
backgroundcolor "none"
status open

\begin_layout Plain Layout
Some higher level topological cleaning actions will fail with self-intersections
 present.
 In such cases, 
\emph on
Survey2GIS
\emph default
 will skip further cleaning of the affected geometries and issue a warning.
 Check the status messages produced at the end of program operation for
 the total number of detected self-intersections
\end_layout

\end_inset


\end_layout

\begin_layout Subsubsection
Shared boundaries of polygons
\begin_inset CommandInset label
LatexCommand label
name "subsec:Gemeinsame-Grenzen"

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Box Boxed
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
thickness "0.4pt"
separation "3pt"
shadowsize "4pt"
framecolor "black"
backgroundcolor "none"
status open

\begin_layout Plain Layout
Note: Automatic cleaning of boundaries of adjacent polygons is a feature
 that is available starting with version 1.5.2 of 
\emph on
Survey2GIS
\emph default
.
\end_layout

\end_inset


\end_layout

\begin_layout Standard
Two adjacent polygons share a common boundary along their line of contact.
 During surveying, however, practical restrictions require that both polygons
 are recorded completely, effectively recording the shared boundary twice
 – and most likely with some discrepancies, since it will be impossible
 to re-record the shared vertices in the exact same locations.
 Therefore, two fundamental problems will be impossible to avoid:
\end_layout

\begin_layout Enumerate
Small gaps will be left between polygons, even though they are directly
 adjacent.
\end_layout

\begin_layout Enumerate
The boundaries of two adjacent polygons will overlap slightly.
\end_layout

\begin_layout Standard
From the point of view of 2D GIS topology, the second case is a topological
 error if the two polygons are part of the same GIS layer.
 For the production of topologically correct output data, 
\emph on
Survey2GIS
\emph default
 will attempt to close unintended small gaps between polygon boundaries,
 and also to remove overlapping areas of adjacent polygons.
 For these purposes, it offers two tools that complement each other well:
\end_layout

\begin_layout Enumerate
Small difference in location between vertices of shared polygons can be
 compensated by adjusting the affected vertices so that the lie exactly
 on top of each other.
\end_layout

\begin_layout Enumerate
Overlapping areas of adjacent polygons will be removed automatically and
 additional vertices will be inserted, so that the polygons will have identical
 vertices along their shared boundary.
\end_layout

\begin_layout Standard
Only the first tool's action must be controlled by the user, using the 
\begin_inset Quotes eld
\end_inset

--snapping
\begin_inset Quotes erd
\end_inset

 option, which causes a vertex that is part of the 
\emph on
outer boundary
\emph default
 of polygon 
\emph on
B 
\emph default
to
\emph on
 
\emph default
be moved exactly on top of (
\begin_inset Quotes eld
\end_inset

snapped to
\begin_inset Quotes erd
\end_inset

) the closest vertex on polygon 
\emph on
A
\emph default
 (which is assumed to be its 
\begin_inset Quotes eld
\end_inset

sibling
\begin_inset Quotes erd
\end_inset

 vertex).
 The value set for this snapping distance threshold should reflect the locationa
l error margin of attempting to measure the same point location more than
 once in practice.
\end_layout

\begin_layout Standard
\noindent
\align center
\begin_inset Graphics
	filename img/snapping.png
	lyxscale 50
	width 40col%

\end_inset


\end_layout

\begin_layout Standard
The illustration above shows a (grey) polygon with four neighbouring (white)
 polygons.
 Snapping causes the vertices of the boundaries of the three nearest polygons
 to be moved, enlarging the polygons' areas by the amounts shown in black.
\end_layout

\begin_layout Standard
The snapping threshold should be chosen to lie well below the typical distance
 of separate point measurements, but above the accuracy with which an already
 measured point can be measured again.
\end_layout

\begin_layout Standard
The section function for cleaning the boundaries of adjacent polygons is
 fully automated: If (after snapping), there is still an area of overlap
 between two adjacent polygons, then the affected area will automatically
 be removed from the polygon that occurs 
\emph on
later
\emph default
 in the input data.
 Additional vertices will be inserted on the shared boundary where necessary:
\end_layout

\begin_layout Standard
\noindent
\align center
\begin_inset Graphics
	filename img/overlap-clean.png
	lyxscale 25
	width 60col%

\end_inset


\end_layout

\begin_layout Standard
Best results can be achieved, if:
\end_layout

\begin_layout Itemize
Larger (base) objects are surveyed first.
\end_layout

\begin_layout Itemize
Smaller, adjacent objects are surveyed later, and a small number of surveyed
 points are chosen intentionally so that lie a good distance (further than
 the threshold value for snapping, above!) 
\emph on
within
\emph default
 the area of the base object.
\end_layout

\begin_layout Standard
In practice, the effectiveness of automatic cleaning of shared polygon boundarie
s will be limited, depending on the complexity of overlaps, and the following
 should be taken into consideration:
\end_layout

\begin_layout Itemize
Relatively small overlap areas have the highest probability of getting fixed
 automatically.
\end_layout

\begin_layout Itemize
The operation is 2D only.
\end_layout

\begin_layout Itemize
Polygons with inner boundaries (
\begin_inset Quotes eld
\end_inset

holes
\begin_inset Quotes erd
\end_inset

: see 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Internal-polygon-boundaries"
plural "false"
caps "false"
noprefix "false"

\end_inset

) cannot be adjusted, if this means that the number of holes would change
 (otherwise however, polygons with holes will be adjusted correctly).
\end_layout

\begin_layout Itemize
When checking for overlap, each part of a multi-part polygon (see 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Multi-part-geometries"
plural "false"
caps "false"
noprefix "false"

\end_inset

) will be treated like an individual polygon, to ensure correct results.
\end_layout

\begin_layout Itemize
If the program option 
\begin_inset Quotes eld
\end_inset

-
\begin_inset space \thinspace{}
\end_inset

-force-2d
\begin_inset Quotes erd
\end_inset

 (reduce all output to 2D coordinates) is 
\emph on
not
\emph default
 provided: Overlap cleaning will commonly create new vertices at boundary
 intersections for which 
\emph on
Z
\emph default
 coordinates will be interpolated linearly from neighbouring 3D vertices
 on the other polygon.
\end_layout

\begin_layout Standard
Also note, that the operations described above will likely fail for polygons
 that have other topological defects, notably self-intersctions (see 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Selbstüberschneidungen"
plural "false"
caps "false"
noprefix "false"

\end_inset

).
\end_layout

\begin_layout Subsubsection
Internal polygon boundaries (holes)
\begin_inset CommandInset label
LatexCommand label
name "subsec:Internal-polygon-boundaries"

\end_inset


\end_layout

\begin_layout Standard
\noindent
\align center
\begin_inset Graphics
	filename img/polygons-holes-01.png
	lyxscale 25
	width 30col%

\end_inset


\begin_inset Graphics
	filename img/polygons-holes-02.png
	lyxscale 25
	width 30col%

\end_inset


\begin_inset Graphics
	filename img/polygons-holes-03.png
	lyxscale 25
	width 30col%

\end_inset


\end_layout

\begin_layout Standard
The 2D topology model of GIS demands that polygons in one and the same layer
 may not overlap each other.
 However, what if polygon 
\emph on
B
\emph default
 lies completely within the area of/is embedded in larger polygon 
\emph on
A
\emph default
? In this case, 
\emph on
B
\emph default
 must be modelled as an internal boundary (hole) of 
\emph on
A
\emph default
.
 In practice, this can be done in two different ways:
\end_layout

\begin_layout Enumerate
The polygon is recorded as a multi-part (at least two parts) geometry (see
 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Multi-part-geometries"
plural "false"
caps "false"
noprefix "false"

\end_inset

): First the base polygon and then any number of smaller polygons within
 its area.
 The latter will be converted to holes automatically.
 In order for this to work, the base polygon and every one of its parts
 must have the same value in 
\begin_inset Quotes eld
\end_inset

key_field
\begin_inset Quotes erd
\end_inset

 and the parser option 
\begin_inset Quotes eld
\end_inset

key_unique
\begin_inset Quotes erd
\end_inset

 must be turned 
\begin_inset Quotes eld
\end_inset

on
\begin_inset Quotes erd
\end_inset

 (see 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Parser-Schemata"

\end_inset

).
\end_layout

\begin_layout Enumerate
If the embedded polygon is a separate object, then it can be modelled as
 such by assigning it its own unique key value.
 In this case, 
\emph on
Survey2GIS
\emph default
 will automatically 
\begin_inset Quotes eld
\end_inset

punch
\begin_inset Quotes erd
\end_inset

 holes into the larger polygon and 
\begin_inset Quotes eld
\end_inset

fit
\begin_inset Quotes erd
\end_inset

 all embedded polygons into them without overlap (see illustration above).
\end_layout

\begin_layout Standard
In order to get good results from this cleaning process, it is important
 to record the polygons in a well-defined order (see 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Hinweise-zur-Vermessungspraxis"

\end_inset

).
 Also note that the corrections described above are likely to fail when
 applied to polygons that have topological errors, such as intersecting
 boundaries (cf.
 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Intersections-of-lines"

\end_inset

).
\end_layout

\begin_layout Subsubsection
Intersections of lines and polygon boundaries
\begin_inset CommandInset label
LatexCommand label
name "subsec:Intersections-of-lines"

\end_inset


\end_layout

\begin_layout Standard
Complex surveys are likely to produce geometries that criss-cross and intersect
 each other.
 Such intersection points are often of critical importance for cleaning
 geometries manually, and intersecting lines are only considered to be topologic
ally valid if they both have a vertex at the exact point of intersection.
 Intersection vertices also allow for the automated removal of 
\begin_inset Quotes eld
\end_inset

dangles
\begin_inset Quotes erd
\end_inset

 (see 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Dangling-line-ends"

\end_inset

).
\end_layout

\begin_layout Standard
Therefore, 
\emph on
Survey2GIS
\emph default
 marks intersection points by adding additional vertices to the output data,
 so that it will be easier to clean the data.
 There are three cases that lead to additional vertices being added at intersect
ion points:
\end_layout

\begin_layout Enumerate
Lines crossing other lines (intersection vertices will be added to all crossed/c
rossing lines).
\end_layout

\begin_layout Enumerate
Lines crossing polygon boundaries (intersection vertices will only be added
 to crossing line segments, 
\emph on
not
\emph default
 to polygon boundaries).
\end_layout

\begin_layout Enumerate
Polygon boundaries crossing other polygon boundaries (intersection vertices
 will be added to all crossed/crossing boundaries).
\end_layout

\begin_layout Standard
(Note that the last case should rarely occur if boundary vertex snapping
 is effective: 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Gemeinsame-Grenzen"

\end_inset

.)
\end_layout

\begin_layout Standard
\noindent
\align center
\begin_inset Graphics
	filename img/intersections.png
	lyxscale 50
	width 40col%

\end_inset


\end_layout

\begin_layout Standard
The program will print two different intersection metrics once the data
 has been processed:
\end_layout

\begin_layout LyX-Code
Detected line/polygon boundary intersections: 12
\end_layout

\begin_layout LyX-Code
Added vertices at line/polygon boundary intersections: 8
\end_layout

\begin_layout Standard
In some cases, the number of intersection vertices added will be lower than
 the number of detected intersections.
 This happens, e.
\begin_inset space \thinspace{}
\end_inset

g., if a geometry is intersected by more than one other geometry in the exact
 same location.
 Such redundant intersection vertices are automatically identified and removed.
\end_layout

\begin_layout Standard
\begin_inset Box Boxed
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
thickness "0.4pt"
separation "3pt"
shadowsize "4pt"
framecolor "black"
backgroundcolor "none"
status open

\begin_layout Plain Layout
Note: Since 
\emph on
Survey2GIS
\emph default
 cannot know which geometry the user may want to correct manually later,
 an intersection vertex is added to all intersecting geometries of the same
 type.
\end_layout

\end_inset


\end_layout

\begin_layout Standard
Self-intersections of lines are not considered topological errors by 
\emph on
Survey2GIS
\emph default
, but will lead to an intersection vertex being placed on the location of
 the self-intersection.
 By contrast, self-intersecting polygon boundaries are 
\emph on
topological errors
\emph default
 (see also 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Selbstüberschneidungen"

\end_inset

), as are intersections between polygon boundaries (see 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Gemeinsame-Grenzen"

\end_inset

).
 If the latter are detected, warnings will be issued and topological errors
 will be logged, but no intersection vertices will be added.
\end_layout

\begin_layout Subsubsection
Dangles (overshoots and undershoots)
\begin_inset CommandInset label
LatexCommand label
name "subsec:Dangling-line-ends"

\end_inset


\end_layout

\begin_layout Standard
In many cases, the start and end vertices of lines (also referred to as
 
\begin_inset Quotes eld
\end_inset

nodes
\begin_inset Quotes erd
\end_inset

) are 
\emph on
intended
\emph default
 to be located exactly on another line or polygon boundary, but due to the
 limited accuracy of the survey, they actually lie at a small distance from
 their intended locations.
 Such line vertices are collectively called 
\begin_inset Quotes eld
\end_inset

dangles
\begin_inset Quotes erd
\end_inset

, and fall into two categories:
\end_layout

\begin_layout Enumerate
Line nodes that lie before their intended locations are 
\begin_inset Quotes eld
\end_inset

undershoots
\begin_inset Quotes erd
\end_inset

.
\end_layout

\begin_layout Enumerate
Line nodes that lie beyond their intended locations are 
\begin_inset Quotes eld
\end_inset

overshoots
\begin_inset Quotes erd
\end_inset

.
\end_layout

\begin_layout Standard
The illustration below shows a line that has both an undershoot (vertex
 
\begin_inset Quotes eld
\end_inset

0
\begin_inset Quotes erd
\end_inset

) and an overshoot (vertex 
\begin_inset Quotes eld
\end_inset

2
\begin_inset Quotes erd
\end_inset

).
\end_layout

\begin_layout Standard
\noindent
\align center
\begin_inset Graphics
	filename img/dangles.png
	lyxscale 50
	width 40col%

\end_inset


\end_layout

\begin_layout Standard
There is a separate threshold option, 
\begin_inset Quotes eld
\end_inset

--dangling=
\begin_inset Quotes erd
\end_inset

, to control the snapping of dangles to the nearest line/boundary segment.
 This is needed, because polygon boundary snapping (option 
\begin_inset Quotes eld
\end_inset

--snapping=
\begin_inset Quotes erd
\end_inset

; see 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Gemeinsame-Grenzen"

\end_inset

) is run first and it can move the vertices of polygon boundaries so much
 that dangles will no longer snap.
 Therefore, the dangle snapping threshold should be set larger than the
 polygon boundary snapping threshold.
\end_layout

\begin_layout Standard
Only the first and last segments of a line qualify as dangles, and only
 if they are succeeded/preceded (respectively) by an 
\emph on
intersection vertex
\emph default
 (see 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Intersections-of-lines"

\end_inset

).
 If these criteria lead to unsatisfactory cleaning results, and short chains
 of tiny line segments should also be removed, then consider increasing
 the 
\begin_inset Quotes eld
\end_inset

--threshold
\begin_inset Quotes erd
\end_inset

 option value (see 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Doppelte-Stützpunkte"

\end_inset

) to reduce such chains to single vertices (note that this may introduce
 slight inaccuracies into the dangle snapping, as the original line bearing
 may be modified), or use the intersection vertices added by 
\emph on
Survey2GIS
\emph default
 (see 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Intersections-of-lines"

\end_inset

) to manually remove all excess line segments.
\end_layout

\begin_layout Standard
Both overshoot and undershoot corrections will modify original line lengths
 and both operations can lead to counter-intuitive results if the first
 or last 
\emph on
n
\emph default
 vertices are all intersection vertices inserted by 
\emph on
Survey2GIS
\emph default
 (see 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Intersections-of-lines"

\end_inset

).
 This can happen if e.
\begin_inset space \thinspace{}
\end_inset

g.
 a line segment crosses both another line segment and a polygon boundary
 segment.
 In such case, the dangling node will be cut back to the closest intersection
 point, which may or may not be the ideal/intended snapping position.
 The image below shows a line that has been snapped to a polygon boundary
 in the upper part and to a line segment in the lower part during dangle
 correction:
\end_layout

\begin_layout Standard
\noindent
\align center
\begin_inset Graphics
	filename img/dangles-problem-01.png
	lyxscale 50
	width 40col%

\end_inset


\end_layout

\begin_layout Standard
Sometimes, a dangle might occur to be an overshoot in relation to one geometry
 and an undershoot in relation to another.
 In such cases, 
\emph on
Survey2GIS
\emph default
 picks whichever dangle type is shortest (there is also an extremely small
 chance that both dangle types will have the exact same length, in which
 case the dangle will be considered an overshoot by default).
\end_layout

\begin_layout Standard
There are some limitations to the performance of automatic dangle cleaning
 by 
\emph on
Survey2GIS
\emph default
:
\end_layout

\begin_layout Itemize
Undershoots within the same geometry 
\emph on
part
\emph default
 (in multi-part geometries: 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Multi-part-geometries"
plural "false"
caps "false"
noprefix "false"

\end_inset

) will not be detected.
\end_layout

\begin_layout Itemize
Undershooting dangles are extruded by a 2D distance, so that they snap perfectly
 to the nearest line segment in a 2D GIS layer.
 For very long dangles and line segments with a steep 
\emph on
Z
\emph default
 gradient, this can introduce significant inaccuracies in the 
\emph on
Z
\emph default
 coordinates of snapped nodes.
\end_layout

\begin_layout Itemize
Overshoot correction of short lines that consist of only two segments can
 also lead to an extreme case where the entire line (part) would be deleted.
 In such cases, the geometry will 
\emph on
not
\emph default
 be modified.
 Instead, a warning message will be issued and a topological error logged.
\end_layout

\begin_layout Standard
Therefore, the results of automated dangle cleaning should always be checked
 carefully and manual corrections applied where necessary (
\emph on
Survey2GIS
\emph default
 automatically inserts vertices at crossing points to aid this: see 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Intersections-of-lines"

\end_inset

).
 Use a small threshold for dangle cleaning to avoid overlay aggressive modificat
ion of line geometries.
\end_layout

\begin_layout Standard
A particularly hard problem is posed by 
\begin_inset Quotes eld
\end_inset

double undershoots
\begin_inset Quotes erd
\end_inset

 that frequently occure at the corners of line geometries and cannot be
 detected automatically.
 Since they do not yield intersection vertices, they are also difficult
 to fix manually:
\end_layout

\begin_layout Standard
\noindent
\align center
\begin_inset Graphics
	filename img/double-undershoot.png
	lyxscale 50
	width 40col%

\end_inset


\end_layout

\begin_layout Standard
There are two options for avoiding 
\begin_inset Quotes eld
\end_inset

double undershoots
\begin_inset Quotes erd
\end_inset

 while surveying:
\end_layout

\begin_layout Itemize
Code the geometry as a polygon instead of a line, so that it will be automatical
ly closed.
\end_layout

\begin_layout Itemize
Cross the first segment with the last one while surveying, so that an intersecti
on vertex will be generated and the two dangles can be removed as overshoots:
\end_layout

\begin_layout Standard
\noindent
\align center
\begin_inset Graphics
	filename img/double-undershoot-crossed.png
	lyxscale 50
	width 40col%

\end_inset


\end_layout

\begin_layout Subsubsection
Order of polygon vertices
\begin_inset CommandInset label
LatexCommand label
name "subsec:Order-of-polygon"

\end_inset


\end_layout

\begin_layout Standard
GIS data has a directional component that needs to be considered when digitizing
 polygonal data.
 In general, GIS attempt to correct the vertex order (also called 
\begin_inset Quotes eld
\end_inset

winding order
\begin_inset Quotes erd
\end_inset

) of polygons automatically, but it is safer to prevent problems from the
 ground up.
\end_layout

\begin_layout Standard
Visualization of 3D data, in particular, can suffer defects when data with
 inconsistent vertex ordering is rendered to the screen.
\end_layout

\begin_layout Standard
The following rules should be respected when surveying the vertices of polygons
 (see enumeration of vertices in illustration, below):
\end_layout

\begin_layout Enumerate
Record the vertices of 
\emph on
outer
\emph default
 polygon boundaries (also disjunct boundaries of multi-part geometries)
 in 
\emph on
clockwise
\emph default
 order.
\end_layout

\begin_layout Enumerate
Record the vertices of 
\emph on
inner
\emph default
 polygon boundaries (
\begin_inset Quotes eld
\end_inset

holes
\begin_inset Quotes erd
\end_inset

) in 
\emph on
counter-clockwise
\emph default
 order.
\end_layout

\begin_layout Standard
\noindent
\align center
\begin_inset Graphics
	filename img/vertex-order-poly.png
	lyxscale 50
	width 40col%

\end_inset


\end_layout

\begin_layout Standard
When reconstructing polygons from survey data, 
\emph on
Survey2GIS
\emph default
 will attempt to enforce the above rules automatically and re-order vertices
 if necessary.
 In order to avoid problems, however, it is recommended to respect these
 rules during field work, when recording polygon outlines.
\end_layout

\begin_layout Subsection
Practical considerations and limitations
\end_layout

\begin_layout Standard
Essentially all common GIS use a 2D topology model based on the concept
 of a bird's eye data view.
 This may cause topological errors to arise, even though the original 3D
 data is theoretically free of such errors.
 Polygon boundaries are especially problematic in GIS analysis, because
 from a 2D top-down perspectives, boundaries may seem to overlap even though
 they are free of overlap in 3D space.
 There is no way to automatically correct for such effects.
\end_layout

\begin_layout Standard
An alternative is to reduce the 3D input data to 2D data by dropping the
 definition of the 
\emph on
Z
\emph default
 coordinate field from the parser schema (
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Geometriemarkierungenl"

\end_inset

).
 In this case, 
\emph on
Survey2GIS
\emph default
 will assume all 
\emph on
Z
\emph default
 coordinates to be uniformly 
\begin_inset Quotes eld
\end_inset

0
\begin_inset Quotes erd
\end_inset

 and all topological cleaning operations are reduced to 2D operations.
\end_layout

\begin_layout Standard
In any case, complex polygons, at least, should always be inspected carefully
 and cleaned as needed, using the available GIS tools.
\end_layout

\begin_layout Standard
The topological cleaning functions available in 
\emph on
Survey2GIS
\emph default
 are not suitable for correcting very large or complex topological errors
 (e.
\begin_inset space \thinspace{}
\end_inset

g.
 multiple overlaps or 
\begin_inset Quotes eld
\end_inset

holes within holes
\begin_inset Quotes erd
\end_inset

).
 The best prevention of topological errors is rigid self-control and good
 practice during the survey.
\end_layout

\begin_layout Standard
All functions for topological cleaning are run 
\emph on
after
\emph default
 a reprojection (if any: see 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Reprojections using PROJ.4"
plural "false"
caps "false"
noprefix "false"

\end_inset

), in order to avoid introducing further inaccuracies into the reprojected
 result.
 However, they run 
\emph on
before
\emph default
 a coordinate transformation to change axes orientations (if any: see 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Planum-and-profile"
plural "false"
caps "false"
noprefix "false"

\end_inset

), so that the result will be unaffected by a change of orientation in the
 coordinate system.
\end_layout

\begin_layout Standard
Topological processing of input data that is provided as latitude and longitude
 coordinates has severe limitations.
 Only the following cleaning actions will be performed:
\end_layout

\begin_layout Itemize
Removal of redundant vertices (see 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Doppelte-Stützpunkte"
plural "false"
caps "false"
noprefix "false"

\end_inset

) and 
\begin_inset Quotes eld
\end_inset

splinters
\begin_inset Quotes erd
\end_inset

 (see 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Splinters"
plural "false"
caps "false"
noprefix "false"

\end_inset

).
\end_layout

\begin_layout Itemize
Check for self-intersections (see 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Selbstüberschneidungen"
plural "false"
caps "false"
noprefix "false"

\end_inset

).
\end_layout

\begin_layout Itemize
Snapping for adjacent polygon boundaries (see 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Gemeinsame-Grenzen"
plural "false"
caps "false"
noprefix "false"

\end_inset

).
\end_layout

\begin_layout Itemize
Re-ordering of polygon vertices (see 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Order-of-polygon"
plural "false"
caps "false"
noprefix "false"

\end_inset

).
\end_layout

\begin_layout Standard
The removal of redundant vertices and snapping actions use a planar distance
 measure (to be specified as decimal degrees in this case!), which reduces
 accuracy.
 The program will issue a warning message, accordingly.
\end_layout

\begin_layout Standard
There are limits to what automated topological cleaning can achieve for
 complex, real-world survey data, and it may produce unexpected or even
 erroneous results.
 This can be avoided by taking these limits into account during field work.
 
\end_layout

\begin_layout Standard
The illustrations below show one of the few extreme cases that will cause
 the topological cleaning performed by 
\emph on
Survey2GIS
\emph default
 to fail.
 In this case an (elongated) polygon completely crosses another (round)
 polygon.
 Automated clean will reduce the crossing (elongated) polygon to only its
 western part.
 The reason for this is, that the software does not support the splitting
 of overlapping polygons into multiple parts during cleaning.
 The solution is to record the overlapped (round) polygon as two separate
 geometries in the field, surveying only those areas that are actually visible
 (see also discussion of multi-part geometries in 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Multi-part-geometries"
plural "false"
caps "false"
noprefix "false"

\end_inset

).
\end_layout

\begin_layout Standard
\noindent
\align center
\begin_inset Graphics
	filename img/poly-crossing-01.png
	lyxscale 50
	width 40col%

\end_inset


\end_layout

\begin_layout Standard
\noindent
\align center
\begin_inset Graphics
	filename img/poly-crossing-02.png
	lyxscale 50
	width 40col%

\end_inset


\end_layout

\begin_layout Standard
Some tricky cases might require using of option 
\begin_inset Quotes eld
\end_inset

topology=
\begin_inset Quotes erd
\end_inset

 to reduce the aggressiveness of automatic cleaning (see 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Topologische-Säuberung"
plural "false"
caps "false"
noprefix "false"

\end_inset

), and resolving issues manually in GIS.
\end_layout

\begin_layout Standard
\begin_inset Box Boxed
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
thickness "0.4pt"
separation "3pt"
shadowsize "4pt"
framecolor "black"
backgroundcolor "none"
status open

\begin_layout Plain Layout
Important: When combining a data selection (see 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:selections"
plural "false"
caps "false"
noprefix "false"

\end_inset

) with topological cleaning, the result can vary from that obtained by processin
g the complete input data! The reason for this is that geometries not included
 in the selection no longer have an effect on topological operations in
 
\emph on
Survey2GIS
\emph default
.
 For example, polygon boundaries will not be adjusted if the overlap with
 boundaries of polygons that are part of the data selection.
 If this behaviour is not desirable, then it might be better to process
 the data in full and use e.
\begin_inset space \thinspace{}
\end_inset

g.
 a GIS to select data afterwards.
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Newpage newpage
\end_inset


\end_layout

\begin_layout Section
Output formats
\begin_inset CommandInset label
LatexCommand label
name "sec:Ausgabeformate"

\end_inset


\end_layout

\begin_layout Standard
In order to support further data processing with different applications,
 
\emph on
Survey2GIS
\emph default
 can produce a variety of output formats.
\end_layout

\begin_layout Standard
\begin_inset Box Boxed
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
thickness "0.4pt"
separation "3pt"
shadowsize "4pt"
framecolor "black"
backgroundcolor "none"
status open

\begin_layout Plain Layout
For archival purposes, it is recommended to always store copies of the original
 raw input data files.
\end_layout

\end_inset


\end_layout

\begin_layout Subsection
ESRI Shapefile
\begin_inset CommandInset label
LatexCommand label
name "subsec:ESRI-Shapefile-(SHP/SHX/DBF)"

\end_inset


\end_layout

\begin_layout Standard
Option:
\end_layout

\begin_layout LyX-Code
-f shp
\end_layout

\begin_layout Standard
The 
\begin_inset Quotes pld
\end_inset

ESRI Shapefile
\begin_inset Quotes prd
\end_inset

 format is the default output format for 
\emph on
Survey2GIS
\emph default
.
 Although it is not a real standard in the sense that it has been openly
 developed and documented by an independent organisation, it is the most
 widely used vectorial data format in the GIS world, due to the fact that
 its inventor ESRI has released a detailed specification (
\begin_inset Flex URL
status open

\begin_layout Plain Layout

https://www.esri.com/library/whitepapers/pdfs/shapefile.pdf
\end_layout

\end_inset

).
\end_layout

\begin_layout Standard
Technically speaking, a 
\begin_inset Quotes eld
\end_inset

Shapefile
\begin_inset Quotes erd
\end_inset

 is not a single file but a set of files (three or more) with the same base
 name and different extensions.
 The files generated by 
\emph on
Survey2GIS
\emph default
 will have the extensions 
\begin_inset Quotes pld
\end_inset

.shp
\begin_inset Quotes prd
\end_inset

, 
\begin_inset Quotes pld
\end_inset

.shx
\begin_inset Quotes prd
\end_inset

 and 
\begin_inset Quotes pld
\end_inset

.dbf
\begin_inset Quotes prd
\end_inset

.
 The latter is a file in DBase format that holds the table of attribute
 data for each geometry stored in the 
\begin_inset Quotes eld
\end_inset

.shp
\begin_inset Quotes erd
\end_inset

 file.
\end_layout

\begin_layout Standard
The Shapefile format is subject to a number of limitations, many of which
 arise from the use of DBase as attribute table format:
\end_layout

\begin_layout Enumerate
The maximum file size is limited by the size of the (32 bit integer) index
 in the 
\begin_inset Quotes eld
\end_inset

.shx
\begin_inset Quotes erd
\end_inset

 file.
 Typical limits are 2 or 4
\begin_inset space \thinspace{}
\end_inset

GB, depending on the GIS' capabilities.
\end_layout

\begin_layout Enumerate
Field names can not be longer than 10 characters (DBase limit).
\end_layout

\begin_layout Enumerate
A stored decimal attribute value can have a maximal total length of 18 places.
 When storing values from very large numerical ranges, the decimal precision
 may have to be limited (DBase limit).
\end_layout

\begin_layout Enumerate
A stored text attribute value can not be longer than 254 characters (DBase
 limit).
\end_layout

\begin_layout Enumerate
The attribute table in DBase format does not store any information about
 the text encoding.
 If text fields use special characters that are not part of the ASCII set,
 then the user must take care that all software used to process the data
 uses the right encoding.
\end_layout

\begin_layout Enumerate
A single Shapefile datasaet can only store either points, lines or polygons.
 For this reason, 
\emph on
Survey2GIS
\emph default
 will automatically split the otuput into separate Shapefiles as required.
\end_layout

\begin_layout Subsubsection
ESRI Shapefile label layers
\end_layout

\begin_layout Standard
When exporting a label layer (see 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Labels"

\end_inset

) for Shapefile output, an additional points Shapefile will be produced
 with the following attributes:
\end_layout

\begin_layout Description
labeltext This is a 
\emph on
string
\emph default
 (text) type field that contains the text to be used as a label at each
 point.
\end_layout

\begin_layout Description
fonttype A 
\emph on
text
\emph default
 type field that contains the name of the font to be used for the labels.
 This is set to 
\begin_inset Quotes eld
\end_inset

Arial
\begin_inset Quotes erd
\end_inset

 by 
\emph on
Survey2GIS
\emph default
.
\end_layout

\begin_layout Description
fontstyle This field contains the font style as an 
\emph on
integer
\emph default
 code.
 It is set to 
\begin_inset Quotes eld
\end_inset

0
\begin_inset Quotes erd
\end_inset

 (plain) by 
\emph on
Survey2GIS
\emph default
.
 Commonly used values are: 
\begin_inset Quotes eld
\end_inset

0
\begin_inset Quotes erd
\end_inset

 (plain), 
\begin_inset Quotes eld
\end_inset

1
\begin_inset Quotes erd
\end_inset

 (bold) and 
\begin_inset Quotes eld
\end_inset

2
\begin_inset Quotes erd
\end_inset

 (italics).
\end_layout

\begin_layout Description
fontcolor The font color to use for labels is encoded using an 
\emph on
integer
\emph default
 value.
 The coding follow the rules of the Java class 
\emph on
java.awt.Color
\emph default
 (see 
\begin_inset Flex URL
status collapsed

\begin_layout Plain Layout

https://docs.oracle.com/javase/7/docs/api/java/awt/Color.html
\backslash
#getRGB()
\end_layout

\end_inset

 for details).
 The value exported by 
\emph on
survey2gis
\emph default
 is 
\begin_inset Quotes eld
\end_inset

-16777216
\begin_inset Quotes erd
\end_inset

 (black).
\end_layout

\begin_layout Description
fontsize This is a 
\emph on
double
\emph default
 type field that contains the font size for the label text (
\begin_inset Quotes eld
\end_inset

10.0
\begin_inset Quotes erd
\end_inset

 as set by 
\emph on
Survey2GIS
\emph default
).
\end_layout

\begin_layout Description
fontrotate This is a 
\emph on
double
\emph default
 type field that contains clockwise rotation of the font size (
\begin_inset Quotes eld
\end_inset

0.0
\begin_inset Quotes erd
\end_inset

 as set by 
\emph on
Survey2GIS
\emph default
).
\end_layout

\begin_layout Description
geomtype This 
\emph on
integer
\emph default
 type field encodes the geometry type for which a label has been generated.
 Possible values are: 
\begin_inset Quotes eld
\end_inset

0
\begin_inset Quotes erd
\end_inset

 (point), 
\begin_inset Quotes eld
\end_inset

1
\begin_inset Quotes erd
\end_inset

 (line) and 
\begin_inset Quotes eld
\end_inset

2
\begin_inset Quotes erd
\end_inset

 (polygon).
\end_layout

\begin_layout Standard
Note that this attribute field structure has been chosen for compatibility
 with the 
\begin_inset Quotes eld
\end_inset

Annotations
\begin_inset Quotes erd
\end_inset

 functionality of 
\emph on
gvSIG CE
\emph default
 (
\begin_inset Flex URL
status open

\begin_layout Plain Layout

http://gvsigce.org
\end_layout

\end_inset

).
 In addition, a 
\begin_inset Quotes eld
\end_inset

.gva
\begin_inset Quotes erd
\end_inset

 label settings file will be produced (this can be ignored by users of other
 GIS).
 Label layers produced by 
\emph on
Survey2GIS
\emph default
 can be loaded as 
\emph on
annotation layers
\emph default
 into 
\emph on
gvSIG CE
\emph default
 and modified using that GIS' special annotation tools.
\end_layout

\begin_layout Subsubsection
Null (
\begin_inset Quotes eld
\end_inset

no data
\begin_inset Quotes erd
\end_inset

) in DBF attribute tables
\end_layout

\begin_layout Standard
The following is the default behavior if the user has 
\emph on
not
\emph default
 specified a 
\begin_inset Quotes eld
\end_inset

no data
\begin_inset Quotes erd
\end_inset

 value as part of the parser description (see option 
\begin_inset Quotes eld
\end_inset

no_data
\begin_inset Quotes erd
\end_inset

 in 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Einstellungen-für-[Field]"
plural "false"
caps "false"
noprefix "false"

\end_inset

):
\end_layout

\begin_layout Standard
Attribute values that are 
\begin_inset Quotes eld
\end_inset

null
\begin_inset Quotes erd
\end_inset

 (no data) will be represented by setting all characters of the corresponding
 field to spaces in the DBF attribute table.
 The interpretation of this depends on the GIS.
 Commonly, text attributes will be read as empty strings, numeric attributes
 as 
\begin_inset Quotes eld
\end_inset

0
\begin_inset Quotes erd
\end_inset

.
\end_layout

\begin_layout Subsection
Drawing Exchange Format (DXF)
\end_layout

\begin_layout Standard
\begin_inset Box Boxed
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
thickness "0.4pt"
separation "3pt"
shadowsize "4pt"
framecolor "black"
backgroundcolor "none"
status open

\begin_layout Plain Layout
Warning 1: Do 
\emph on
not
\emph default
 rely on DXF as exclusive output format for long-term data storage and archiving
! For details, see the discussion below.
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Box Boxed
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
thickness "0.4pt"
separation "3pt"
shadowsize "4pt"
framecolor "black"
backgroundcolor "none"
status open

\begin_layout Plain Layout
Warning 2: Data in DXF files is not suitable for spatial analysis that relies
 on the topological correctness of data! For details, see the discussion
 below.
\end_layout

\end_inset


\end_layout

\begin_layout Standard
Option:
\end_layout

\begin_layout LyX-Code
-f dxf
\end_layout

\begin_layout Standard
DXF (Drawing Exchange Format) is a file format that can be processed by
 most CAD applications and (as opposed to e.
\begin_inset space \thinspace{}
\end_inset

g.
 DWG) is 
\emph on
relatively
\emph default
 simple in structure, with format documentation being available from AutoDesk
 (
\begin_inset Flex URL
status open

\begin_layout Plain Layout

https://www.autodesk.com/techpubs/autocad/acad2000/dxf/
\end_layout

\end_inset

).
 It allows storage of all geometry types as separate layers in a single
 file.
 However, it is not suitable for storing attribute data, since it does not
 support relational data structures.
 The DXF file itself can be used to store a handle for each drawing object
 (point, line or polygon) which can act as a 
\begin_inset Quotes eld
\end_inset

primary key
\begin_inset Quotes erd
\end_inset

 to join additional attribute data to the geometries in a GIS (see also
 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:DXF-and-attribute"
plural "false"
caps "false"
noprefix "false"

\end_inset

).
\end_layout

\begin_layout Standard
The DXF output of 
\emph on
Survey2GIS
\emph default
 has the following characteristics:
\end_layout

\begin_layout Itemize
The file format version used is 
\begin_inset Quotes eld
\end_inset

AC1015
\begin_inset Quotes erd
\end_inset

 (AutoCAD Release 15/AutoCAD 2000).
\end_layout

\begin_layout Itemize
Points, 
\begin_inset Quotes eld
\end_inset

raw
\begin_inset Quotes erd
\end_inset

 points, lines and polygons are each stored in a separate layer.
 Raw points are labeled with their original coordinates.
\end_layout

\begin_layout Itemize
Each drawing object (except for 
\begin_inset Quotes eld
\end_inset

raw
\begin_inset Quotes erd
\end_inset

 points) has an integer type handle that corresponds to the 
\begin_inset Quotes eld
\end_inset

geometry ID
\begin_inset Quotes erd
\end_inset

 assigned to each object by 
\emph on
Survey2GIS
\emph default
 and is also stored in a separate DXF layer.
\end_layout

\begin_layout Itemize
In addition, each attribute field is written to a separate DXF layer.
\end_layout

\begin_layout Itemize
Handles and field values are plotted at point coordinates, at the centres
 of areas/polygons, and at the central vertices of lines (one for each part).
\end_layout

\begin_layout Itemize
Most of these layers are switched to 
\begin_inset Quotes eld
\end_inset

invisible
\begin_inset Quotes erd
\end_inset

 by default.
 However, not all CAD interpret this correctly and as a result switch all
 layers to 
\begin_inset Quotes eld
\end_inset

visible
\begin_inset Quotes erd
\end_inset

, regardless.
\end_layout

\begin_layout Itemize
Polygons are degraded to polylines, unless 2D output (option 
\begin_inset Quotes eld
\end_inset

-z
\begin_inset Quotes erd
\end_inset

) is produced (see 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:DXF-and-planar"

\end_inset

).
\end_layout

\begin_layout Itemize
The topological quality aspects 
\begin_inset Quotes eld
\end_inset

correct order of boundary vertices
\begin_inset Quotes erd
\end_inset

 and 
\begin_inset Quotes eld
\end_inset

holes
\begin_inset Quotes erd
\end_inset

 are not supported (see 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Topologische-Säuberung"
plural "false"
caps "false"
noprefix "false"

\end_inset

).
\end_layout

\begin_layout Itemize
Full attribute data is written to a separate, simple text file (see 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:DXF-and-attribute"

\end_inset

).
 The values in the first column (
\begin_inset Quotes eld
\end_inset

geom_id
\begin_inset Quotes erd
\end_inset

) correspond to the DXF object handles.
\end_layout

\begin_layout Standard
The DXF output option in 
\emph on
Survey2GIS
\emph default
 exists solely for the purpose of allowing CAD-based publishing workflows.
 The use of DXF for storing and/or processing topographical data is subject
 to severe limitations.
\end_layout

\begin_layout Standard
\begin_inset Box Boxed
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
thickness "0.4pt"
separation "3pt"
shadowsize "4pt"
framecolor "black"
backgroundcolor "none"
status open

\begin_layout Plain Layout
The DXF file produced by 
\emph on
Survey2GIS
\emph default
 always uses a simple point (
\begin_inset Quotes eld
\end_inset

.
\begin_inset Quotes erd
\end_inset

) as decimal separator for coordinate values, ignoring the 
\begin_inset Quotes eld
\end_inset

--decimal-point=
\begin_inset Quotes erd
\end_inset

 option, as well as any operating system settings.
\end_layout

\end_inset


\end_layout

\begin_layout Subsubsection
DXF and data archiving
\end_layout

\begin_layout Standard
Regarding long-term storage/archival of data, it must be noted that DXF
 is (like all proprietary CAD formats) not independently standardized and
 is in constant flux.
 DXF is a registered trademark of AutoCAD producer AutoDesk.
 New versions of the DXF specification are released alongside each new version
 of AutoCAD (this is necessarily so, as DXF is a file-based, sequential
 representation of AutoCAD's internal, hierarchical object database).
 Most problematically, the format specification explicitely encourages a
 proprietary use of some of its elements.
 Programmers of 
\begin_inset Quotes eld
\end_inset

add-ons
\begin_inset Quotes erd
\end_inset

 or 
\begin_inset Quotes eld
\end_inset

plug-ins
\begin_inset Quotes erd
\end_inset

 are free to invent new classes and decide whether or not to include them
 into the DXF output, or even document them.
 All of this means that compatibility of this format with current software
 cannot be sustained in the long term and that DXF is not suitable for long
 term data archival.
 However, 
\emph on
Survey2GIS
\emph default
 uses only a small subset of the format and produces a relatively simple
 DXF 
\emph on
ASCII
\emph default
 file that allows reconstruction of the original data.
\end_layout

\begin_layout Standard
For long-term data storage, make sure to archive the original raw data and
 use a simple, well-documented GIS format, such as Shapefile (s.
 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:ESRI-Shapefile-(SHP/SHX/DBF)"

\end_inset

).
\end_layout

\begin_layout Subsubsection
DXF and topological data
\end_layout

\begin_layout Standard
The import of DXF-stored data into a GIS for subsequent spatial data analysis
 is a common practice that must nevertheless be strongly discouraged.
 DXF is ignorant of topological data quality (s.
 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Topologische-Säuberung"

\end_inset

) and, most importantly, does not have a simple and useful (in a GIS context)
 representation for areal objects (polygons).
 There is no reasonable way to represent properties such as holes and multi-part
s in DXF-stored polygon.
 This will inevitably result in difficulties when attempting to link spatial
 data (geometries) with attribute data.
\end_layout

\begin_layout Standard
For GIS-based processing, let 
\emph on
Survey2GIS
\emph default
 create its output in a GIS format, such as Shapefile (s.
 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:ESRI-Shapefile-(SHP/SHX/DBF)"

\end_inset

).
\end_layout

\begin_layout Subsubsection
DXF and planar polygons vs.
 polylines
\begin_inset CommandInset label
LatexCommand label
name "subsec:DXF-and-planar"

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Box Boxed
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
thickness "0.4pt"
separation "3pt"
shadowsize "4pt"
framecolor "black"
backgroundcolor "none"
status open

\begin_layout Plain Layout
Note: Planarization methods are not yet implemented in 
\emph on
Survey2GIS
\emph default
!
\end_layout

\end_inset


\end_layout

\begin_layout Standard
As mentioned above, AutoCAD (and thus DXF) does not have a simple representation
 of an areal object, i.
\begin_inset space \thinspace{}
\end_inset

e.
 a polygon.
 Instead, such objects are modelled as hatch patterns that are set into
 the boundaries of polyline objects.
 
\emph on
However
\emph default
, the AutoCAD/DXF hatch pattern is defined to be a 
\emph on
planar
\emph default
 object.
 What this means is that all vertices on the boundary of the hatch pattern
 (i.
\begin_inset space \thinspace{}
\end_inset

e.
 the polyline) have to lie within the same 
\emph on
X-Y
\emph default
 plane.
 This restriction cannot be met by real-world surveying data, which will
 have variation in the 
\emph on
Z
\emph default
 coordinates, due to the geometry of the underlying natural surface.
 As a result, the following options are possible for DXF output:
\end_layout

\begin_layout Enumerate
Export all polygons as polylines (default behaviour).
\end_layout

\begin_layout Enumerate
Produce 2D output on export, thus flatting all 
\emph on
Z
\emph default
 coordinate values to 
\begin_inset Quotes eld
\end_inset

0.0
\begin_inset Quotes erd
\end_inset

.
\end_layout

\begin_layout Enumerate
Planarize the vertices of each polygon so that they lie in the same 
\emph on
X-Y
\emph default
 plane 
\emph on
and
\emph default
 the object's plane is parallel to the 
\emph on
X-Y
\emph default
 plane of the world coordinate system.
 The latter restriction is to make sure that AutoCAD will actually draw
 the hatched area when looking onto the objects from a top-down perspective.
\end_layout

\begin_layout Standard
Note that, in theory, the same problem exists for GIS and polygons with
 
\emph on
Z
\emph default
 data (the mathematical definition of a polygon being that all of its vertices
 lie one the same plane).
 In practice however, non-planarity of polygons is simply ignored by 2D
 GIS.
\end_layout

\begin_layout Standard
More information on the subject of planarization of polygons can be found
 in 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Planarität-von-Polygonenl"

\end_inset

.
\end_layout

\begin_layout Subsubsection
DXF and attribute data
\begin_inset CommandInset label
LatexCommand label
name "subsec:DXF-and-attribute"

\end_inset


\end_layout

\begin_layout Standard
There is no perfect way of associating attribute data records with drawing
 objects in a DXF file.
 
\emph on
Survey2GIS
\emph default
 offers a simple work-around: An additional text file (with extension 
\begin_inset Quotes eld
\end_inset

.txt
\begin_inset Quotes erd
\end_inset

) is produced that stores one attribute table record per line.
\end_layout

\begin_layout Standard
The lines below are an example of what an attribute table text file might
 look like (excerpt):
\end_layout

\begin_layout LyX-Code
geom_id;const1;idx;planum;type;extra;number;coorx;coory;coorz
\end_layout

\begin_layout LyX-Code
0;123.450000;67;1;"GR";"W";0;3513037.664000;5279881.392000;399.563000
\end_layout

\begin_layout LyX-Code
1;123.450000;1;1;"LO";"W";0;3513041.874000;5279875.482000;399.025000 2;123.450000;15;
1;"LO";"W";100;3513042.399000;5279876.155000;399.074000
\end_layout

\begin_layout LyX-Code
\SpecialChar ldots

\end_layout

\begin_layout Standard
There are only a few formatting conventions that apply:
\end_layout

\begin_layout Itemize
Fields are separated by 
\begin_inset Quotes eld
\end_inset

;
\begin_inset Quotes erd
\end_inset

 (semicolon).
\end_layout

\begin_layout Itemize
The first line contains the names of the fields.
\end_layout

\begin_layout Itemize
The contents of text fields are surrounded by quotes (
\begin_inset Quotes eld
\end_inset

).
\end_layout

\begin_layout Standard
The first field is always the integer type field 
\emph on
geom_id
\emph default
.
 This field contains a primary key that matches the handles for all drawing
 objects in the exported DXF file and can be used to associate CAD objects
 and table records.
\end_layout

\begin_layout Standard
No attribute data is written for 
\begin_inset Quotes eld
\end_inset

raw point
\begin_inset Quotes erd
\end_inset

 geometries (vertices).
\end_layout

\begin_layout Standard
\begin_inset Box Boxed
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
thickness "0.4pt"
separation "3pt"
shadowsize "4pt"
framecolor "black"
backgroundcolor "none"
status open

\begin_layout Plain Layout
The attribute text file produced by 
\emph on
Survey2GIS
\emph default
 always uses a point (
\begin_inset Quotes eld
\end_inset

.
\begin_inset Quotes erd
\end_inset

) as decimal separator for coordinate values, ignoring the 
\begin_inset Quotes eld
\end_inset

--decimal-point=
\begin_inset Quotes erd
\end_inset

 option, as well as any operating system settings.
\end_layout

\end_inset


\end_layout

\begin_layout Subsubsection
Null (
\begin_inset Quotes eld
\end_inset

no data
\begin_inset Quotes erd
\end_inset

) in DXF attributes
\end_layout

\begin_layout Standard
The following is the default behavior if the user has 
\emph on
not
\emph default
 specified a 
\begin_inset Quotes eld
\end_inset

no_data
\begin_inset Quotes erd
\end_inset

 option value as part of the parser description (see 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Einstellungen-für-[Field]"
plural "false"
caps "false"
noprefix "false"

\end_inset

):
\end_layout

\begin_layout Standard
The representation of attribute values that are 
\begin_inset Quotes eld
\end_inset

null
\begin_inset Quotes erd
\end_inset

 (no data) depends on the attribute type: text fields will be written as
 empty strings, numeric fields as 
\begin_inset Quotes eld
\end_inset

0
\begin_inset Quotes erd
\end_inset

.
\end_layout

\begin_layout Subsubsection
DXF label layers
\end_layout

\begin_layout Standard
Labels (see 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Labels"

\end_inset

) are stored as a separate layer inside the DXF.
\end_layout

\begin_layout Subsection
GeoJSON
\end_layout

\begin_layout Standard
The GeoJSON output is a single plain text file that contains a 
\emph on
JavaScript
\emph default
 style object representation of all features produced by 
\emph on
Survey2GIS
\emph default
.
 GeoJSON is not very space-efficient and not a typical end-user format.
 It is more commonly used for exchanging data between spatial databases
 and WebGIS applications.
 The GeoJSON file produced by 
\emph on
Survey2GIS
\emph default
 follows the official specification at 
\begin_inset Flex URL
status open

\begin_layout Plain Layout

http://geojson.org
\end_layout

\end_inset

 closely (but mind the note on coordinate references, below!) and uses human-rea
dable formatting.
\end_layout

\begin_layout Standard
\begin_inset Box Boxed
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
thickness "0.4pt"
separation "3pt"
shadowsize "4pt"
framecolor "black"
backgroundcolor "none"
status open

\begin_layout Plain Layout
Note: Similar to KML (see 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Keyhole-Markup-Languagel"
plural "false"
caps "false"
noprefix "false"

\end_inset

), GeoJSON was designed for large-area data coverage with geographic (latitude/l
ongitude) coordinates.
 In fact, since its RFC 7946 revision, the GeoJSON standard no longer supports
 any coordinate reference system other than lat/lon data with WGS 84 datum
 (equivalent to EPSG 4326).
 However, since GeoJSON is useful for direct integration of 
\emph on
Survey2GIS
\emph default
 into a survey data processing pipeline or database backend, this software
 will continue to allow output of non-conforming GeoJSON with other coordinate
 system types, unless running in 
\begin_inset Quotes eld
\end_inset

strict
\begin_inset Quotes erd
\end_inset

 mode (see 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:List-of-options"
plural "false"
caps "false"
noprefix "false"

\end_inset

).
 Be aware that there is no way of storing SRS information in GeoJSON output
 and that strictly standard-conforming software might not be able to process
 such output correctly.
\end_layout

\end_inset


\end_layout

\begin_layout Standard
Features are sorted by geometry type (to minimize occlusions when importing
 the data as a multi-geometry GIS layer): first raw vertices, then points,
 then lines and finally polygons, and stored in a comma-separated list that
 contains plain, human-readable entries.
 Feature geometries are stored in the 
\begin_inset Quotes eld
\end_inset

geometry
\begin_inset Quotes erd
\end_inset

 part and attributes in 
\begin_inset Quotes eld
\end_inset

properties
\begin_inset Quotes erd
\end_inset

:
\end_layout

\begin_layout LyX-Code
{ "type": "FeatureCollection",
\end_layout

\begin_layout LyX-Code
  "features": [
\end_layout

\begin_layout LyX-Code
    { "type": "Feature", "id": 0,
\end_layout

\begin_layout LyX-Code
      "geometry": {
\end_layout

\begin_layout LyX-Code
        "type": "Point",
\end_layout

\begin_layout LyX-Code
        "coordinates": [3513040.585000, 5279881.854000, 399.102000]
\end_layout

\begin_layout LyX-Code
      },
\end_layout

\begin_layout LyX-Code
      "properties": {
\end_layout

\begin_layout LyX-Code
        "geom_id": 0,
\end_layout

\begin_layout LyX-Code
        "const1": 123.450000,
\end_layout

\begin_layout LyX-Code
        "idx": 256,
\end_layout

\begin_layout LyX-Code
        "level": 1,
\end_layout

\begin_layout LyX-Code
        "type": "Gold",
\end_layout

\begin_layout LyX-Code
        "aux": "FZ",
\end_layout

\begin_layout LyX-Code
        "_id": 0,
\end_layout

\begin_layout LyX-Code
        "coorx": 3513040.585000,
\end_layout

\begin_layout LyX-Code
        "coory": 5279881.854000,
\end_layout

\begin_layout LyX-Code
        "coorz": 399.102000
\end_layout

\begin_layout LyX-Code
      }
\end_layout

\begin_layout LyX-Code
    },
\end_layout

\begin_layout LyX-Code
\SpecialChar ldots

\end_layout

\begin_layout Standard
A "geom_id" property of type integer is always added and represents a key
 value that is unique within the scope of the GeoJSON object file.
\end_layout

\begin_layout Standard
Note that there is no explicit attribute type description.
 Whether a field is of type 
\begin_inset Quotes eld
\end_inset

text
\begin_inset Quotes erd
\end_inset

 (e.
\begin_inset space \thinspace{}
\end_inset

g.
 
\begin_inset Quotes eld
\end_inset

type
\begin_inset Quotes erd
\end_inset

 in the example output above), 
\begin_inset Quotes eld
\end_inset

double
\begin_inset Quotes erd
\end_inset

 (e.
\begin_inset space \thinspace{}
\end_inset

g.
 
\begin_inset Quotes eld
\end_inset

coorx
\begin_inset Quotes erd
\end_inset

) or 
\begin_inset Quotes eld
\end_inset

integer
\begin_inset Quotes erd
\end_inset

 (e.
\begin_inset space \thinspace{}
\end_inset

g.
 
\begin_inset Quotes eld
\end_inset

level
\begin_inset Quotes erd
\end_inset

) is simply determined by the format of the value.
\end_layout

\begin_layout Standard
\begin_inset Box Boxed
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
thickness "0.4pt"
separation "3pt"
shadowsize "4pt"
framecolor "black"
backgroundcolor "none"
status open

\begin_layout Plain Layout
The GeoJSON file produced by 
\emph on
Survey2GIS
\emph default
 always uses a simple point (
\begin_inset Quotes eld
\end_inset

.
\begin_inset Quotes erd
\end_inset

) as decimal separator for coordinate values and numeric attribute values,
 ignoring the 
\begin_inset Quotes eld
\end_inset

--decimal-point
\begin_inset Quotes erd
\end_inset

 option, as well as any operating system settings.
\end_layout

\end_inset


\end_layout

\begin_layout Subsubsection
GeoJSON geometry types
\end_layout

\begin_layout Standard
The GeoJSON output produced by 
\emph on
Survey2GIS
\emph default
 uses strongly typed GeoJSON geometries.
 What this means is that the most simple type is chosen which is capable
 of representing the feature produced by 
\emph on
Survey2GIS
\emph default
:
\end_layout

\begin_layout Itemize
Points are stored as GeoJSON type 
\begin_inset Quotes eld
\end_inset

Point
\begin_inset Quotes erd
\end_inset

.
\end_layout

\begin_layout Itemize
Polygons are stored as GeoJSON type 
\begin_inset Quotes eld
\end_inset

Polygon
\begin_inset Quotes erd
\end_inset

 if the consist of only one part; they are stored as type 
\begin_inset Quotes eld
\end_inset

MultiPolygon
\begin_inset Quotes erd
\end_inset

 if they consists of more than one part.
\end_layout

\begin_layout Itemize
Lines are stored as GeoJSON type 
\begin_inset Quotes eld
\end_inset

LineString
\begin_inset Quotes erd
\end_inset

 if the consist of only one part; they are stored as type 
\begin_inset Quotes eld
\end_inset

MultiLineString
\begin_inset Quotes erd
\end_inset

 if they consists of more than one part.
\end_layout

\begin_layout Standard
\begin_inset Box Boxed
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
thickness "0.4pt"
separation "3pt"
shadowsize "4pt"
framecolor "black"
backgroundcolor "none"
status open

\begin_layout Plain Layout
Note: Since features of 
\emph on
Survey2GIS
\emph default
 types 
\begin_inset Quotes eld
\end_inset

point
\begin_inset Quotes erd
\end_inset

 and 
\begin_inset Quotes eld
\end_inset

raw point
\begin_inset Quotes erd
\end_inset

 share the same GeoJSON geometry type (
\begin_inset Quotes eld
\end_inset

Point
\begin_inset Quotes erd
\end_inset

), it will not be possible to differentiate between the two in the GeoJSON
 output file! If the latter is an issue for your workflow, then consider
 using a geometry type selection (see 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:selections"

\end_inset

) and exporting to separate output files.
\end_layout

\end_inset


\end_layout

\begin_layout Subsubsection
GeoJSON primary keys (field 
\begin_inset Quotes eld
\end_inset

id
\begin_inset Quotes erd
\end_inset

)
\end_layout

\begin_layout Standard
The GeoJSON standards reserves a field named 
\begin_inset Quotes eld
\end_inset

id
\begin_inset Quotes erd
\end_inset

 for use as primary key.
 If the input data already contains a field of that name, then it cannot
 be written to the GeoJSON 
\begin_inset Quotes eld
\end_inset

properties
\begin_inset Quotes erd
\end_inset

 member without clashing with the primary key.
\end_layout

\begin_layout Standard
In such case, 
\emph on
Survey2GIS
\emph default
 will attempt to resolve the problem by renaming the user-defined 
\begin_inset Quotes eld
\end_inset

id
\begin_inset Quotes erd
\end_inset

 field to 
\begin_inset Quotes eld
\end_inset

_id
\begin_inset Quotes erd
\end_inset

 (underscore plus original field name).
 In case a user-defined 
\begin_inset Quotes eld
\end_inset

_id
\begin_inset Quotes erd
\end_inset

 field also exists, this resolution will fail and the program will abort
 with an error message.
\end_layout

\begin_layout Standard
Note that, theoretically, the above should not be an issue, since the GeoJSON
 specification states that 
\begin_inset Quotes eld
\end_inset

id
\begin_inset Quotes erd
\end_inset

 should be part of the feature object itself, not its 
\begin_inset Quotes eld
\end_inset

properties
\begin_inset Quotes erd
\end_inset

 member.
 However, it seems that some GeoJSON drivers (notably 
\begin_inset Flex URL
status collapsed

\begin_layout Plain Layout

http://www.gdal.org
\end_layout

\end_inset

, which is used in most open source GIS) do not make this destinction (
\emph on
Survey2GIS
\emph default
 does place 
\begin_inset Quotes eld
\end_inset

id
\begin_inset Quotes erd
\end_inset

 into the 
\begin_inset Quotes eld
\end_inset

type
\begin_inset Quotes erd
\end_inset

 member of each feature).
\end_layout

\begin_layout Subsubsection
Null (
\begin_inset Quotes eld
\end_inset

no data
\begin_inset Quotes erd
\end_inset

) in GeoJSON objects
\end_layout

\begin_layout Standard
The following is the default behavior if the user has 
\emph on
not
\emph default
 specified a 
\begin_inset Quotes eld
\end_inset

no data
\begin_inset Quotes erd
\end_inset

 value as part of the parser description (see 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Einstellungen-fuer-Parser]"

\end_inset

):
\end_layout

\begin_layout Standard
The representation of attribute values that are 
\begin_inset Quotes eld
\end_inset

null
\begin_inset Quotes erd
\end_inset

 (no data) depends on the attribute type: text fields will be written as
 empty strings, numeric fields as 
\begin_inset Quotes eld
\end_inset

0
\begin_inset Quotes erd
\end_inset

 (integer) or 
\begin_inset Quotes eld
\end_inset

0.0
\begin_inset Quotes erd
\end_inset

 (double).
\end_layout

\begin_layout Subsubsection
Label layers in GeoJSON
\end_layout

\begin_layout Standard
There is only limited support for labels in GeoJSON output.
\end_layout

\begin_layout Standard
Label properties (location, font settings, etc.: see 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Labels"

\end_inset

) are stored as part of the 
\begin_inset Quotes eld
\end_inset

properties
\begin_inset Quotes erd
\end_inset

 (see above) section of the labelled features; labels are 
\emph on
not
\emph default
 stored as separate point features (as opposed to e.
\begin_inset space \thinspace{}
\end_inset

g.
 Shapefile output: see 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:ESRI-Shapefile-(SHP/SHX/DBF)"

\end_inset

).
\end_layout

\begin_layout Standard
Since GeoJSON allows only one 
\begin_inset Quotes eld
\end_inset

properties
\begin_inset Quotes erd
\end_inset

 member per feature, there will also only be 
\emph on
one
\emph default
 set of label 
\emph on
X
\emph default
 and 
\emph on
Y
\emph default
 coordinates per feature.
 These coordinates will represent the label position of the 
\emph on
first
\emph default
 part of multi-part line and polygon geometries.
\end_layout

\begin_layout Subsection
Keyhole Markup Language (Google KML)
\begin_inset CommandInset label
LatexCommand label
name "subsec:Keyhole-Markup-Languagel"

\end_inset


\end_layout

\begin_layout Standard
The Keyhole Markup Language (Google KML) is an XML-based format that was
 popularized for use with Google Earth (
\begin_inset Flex URL
status open

\begin_layout Plain Layout

https://www.google.com/earth/
\end_layout

\end_inset

).
 Accordingly, the 
\emph on
sole
\emph default
 purpose of KML is to provide data for flexible 3D visualization in Google
 Earth.
 KML sacrificies accuracy for speed and simplicity and is therefore not
 a suitable format for subsequent data processing and archival.
\end_layout

\begin_layout Standard
\begin_inset Box Boxed
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
thickness "0.4pt"
separation "3pt"
shadowsize "4pt"
framecolor "black"
backgroundcolor "none"
status open

\begin_layout Plain Layout
Note: The most relevant limitation of KML is that it supports (or rather:
 assumes) strictly latitude/longitude coordinate data (in decimal notation)
 with an 
\emph on
assumed
\emph default
 WGS 84 datum (which is really Web Mercator: see 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Web-Mercator"

\end_inset

 for details).
 Therefore, KML is only available for survey data that uses lat/lon coordinates
 (e.
\begin_inset space \thinspace{}
\end_inset

g.
 GPS data) or data that can be reprojected to lat/lon coordinates, such
 as UTM data (see 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Setting-input-and"

\end_inset

).
 In the latter case, a suitable output SRS must be set (see 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Setting-input-and"

\end_inset

).
\end_layout

\end_inset


\end_layout

\begin_layout Standard
The KML produced by 
\emph on
Survey2GIS
\emph default
 has been designed to keep large 
\emph on
survey
\emph default
 datasets manageable in Google Earth.
\end_layout

\begin_layout Standard
KML uses 
\begin_inset Quotes eld
\end_inset

Placemarks
\begin_inset Quotes erd
\end_inset

 to represent features (points, lines and polygons plus attributes) and
 these can in turn be grouped into 
\begin_inset Quotes eld
\end_inset

Folders
\begin_inset Quotes erd
\end_inset

 which can be used to collectively turn Placemarks on or off in Google Earth.
 The KML produced by 
\emph on
Survey2GIS
\emph default
 contains the following Folders:
\end_layout

\begin_layout Enumerate
Points
\end_layout

\begin_layout Enumerate
Lines
\end_layout

\begin_layout Enumerate
Polygons
\end_layout

\begin_layout Enumerate
Vertices
\end_layout

\begin_layout Enumerate
Labels
\end_layout

\begin_layout Standard
Most of the above should be self-explanatory.
 The folder 
\begin_inset Quotes eld
\end_inset

Vertices
\begin_inset Quotes erd
\end_inset

 contains the raw measurements for each point, line or polygon vertex, and
 exists only if raw data output is chosen (option 
\begin_inset Quotes eld
\end_inset

--raw-data
\begin_inset Quotes erd
\end_inset

, see 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:List-of-options"

\end_inset

); the contents of this folder will not be visible by default.
 The folder 
\begin_inset Quotes eld
\end_inset

Labels
\begin_inset Quotes erd
\end_inset

 contains user-defined labels (if chosen, see 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Labels"

\end_inset

, also 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Label-layers-in"

\end_inset

).
 The drawing order is determined by Google Earth.
\end_layout

\begin_layout Standard
Attribute data is stored using the 
\begin_inset Quotes eld
\end_inset

Extended data
\begin_inset Quotes erd
\end_inset

 feature of KML.
 This allows 
\emph on
Survey2GIS
\emph default
 to define a data schema and store exact representations of the attribute
 data.
 All attribute fields and their types will be visible when clicking on a
 Placemark in Google Earth.
\end_layout

\begin_layout Standard
Note that Google Earth has a reputation for producing display problems with
 complex polygons.
 Presumably, the reason for this is that its 3D tesselation algorithms are
 not sufficiently accurate and over-optimized for display speed.
\end_layout

\begin_layout Standard
\begin_inset Box Boxed
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
thickness "0.4pt"
separation "3pt"
shadowsize "4pt"
framecolor "black"
backgroundcolor "none"
status open

\begin_layout Plain Layout
The KML file produced by 
\emph on
Survey2GIS
\emph default
 always uses a simple point (
\begin_inset Quotes eld
\end_inset

.
\begin_inset Quotes erd
\end_inset

) as decimal separator for coordinate values and numeric attribute values,
 ignoring the 
\begin_inset Quotes eld
\end_inset

--decimal-point=
\begin_inset Quotes erd
\end_inset

 option, as well as any operating system settings.
\end_layout

\end_inset


\end_layout

\begin_layout Subsubsection
KML geometry types and encoding
\end_layout

\begin_layout Standard
Coordinates are written into the KML file in this order: longitude (decimal
 degrees), latitude (decimal degrees), elevation (always assumed to be in
 meters).
\end_layout

\begin_layout Standard
The geometry types supported by KML Placemarks are:
\end_layout

\begin_layout Itemize
Polygon
\end_layout

\begin_layout Itemize
LineString
\end_layout

\begin_layout Itemize
Point
\end_layout

\begin_layout Standard
Multi-part geometries are represented by storing more than one Polygon or
 LineString per Placemark element.
\end_layout

\begin_layout Standard
Google Earth expects the vertices of polygons (outer boundaries as well
 as holes) to be written in 
\emph on
counter clockwise
\emph default
 order (GoogleEarth uses this to determine the direction of 3D faces for
 its artificial lighting).
 This order is automatically enforced by 
\emph on
Survey2GIS
\emph default
 when exporting the vertex data.
 Elevation (
\emph on
Z
\emph default
) data can be interpreted in various ways by Google Earth, but 
\emph on
Survey2GIS
\emph default
 always sets the KML element 
\emph on
<altitudeMode>
\emph default
 to 
\begin_inset Quotes eld
\end_inset

absolute
\begin_inset Quotes erd
\end_inset

, meaning that elevation data is taken to be in meters above sea level.
\end_layout

\begin_layout Standard
Note that there may well be local mismatches in the accuracy between the
 Google Earth elevation model (DEM) and the measured 
\emph on
Z
\emph default
 coordinates in the survey data, which can lead to some visual artefacts
 in Google Earth.
\end_layout

\begin_layout Subsubsection
Label layers in KML
\begin_inset CommandInset label
LatexCommand label
name "subsec:Label-layers-in"

\end_inset


\end_layout

\begin_layout Standard
The KML output will contain a dedicated folder 
\begin_inset Quotes eld
\end_inset

Labels
\begin_inset Quotes erd
\end_inset

 which contains the labelled Placemarks for all features, with label locations
 and contents defined by the user (see 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Labels"

\end_inset

 for details).
\end_layout

\begin_layout Standard
\begin_inset Newpage newpage
\end_inset


\end_layout

\begin_layout Section
Handling special (accent) characters
\begin_inset CommandInset label
LatexCommand label
name "sec:Handling-special-(accent)"

\end_inset


\end_layout

\begin_layout Standard
Support for the use of special or accented characters (i.
\begin_inset space \thinspace{}
\end_inset

e.
 those not included in the standard ASCII code table, such as German umlauts)
 for international text is limited to 
\emph on
only the following
\emph default
 
\emph on
contexts
\emph default
 in 
\emph on
Survey2GIS
\emph default
:
\end_layout

\begin_layout Enumerate
Names of files and folder,
\end_layout

\begin_layout Enumerate
program messages and user interface,
\end_layout

\begin_layout Enumerate
selection commands that include replacement text with special characters
 (cf.
 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:selections"

\end_inset

)
\end_layout

\begin_layout Enumerate
and a small subset of parser schema elements (cf.
 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Parser-Schemata"

\end_inset

):
\end_layout

\begin_deeper
\begin_layout Enumerate
the content of 
\begin_inset Quotes eld
\end_inset

info
\begin_inset Quotes erd
\end_inset

 in the 
\begin_inset Quotes eld
\end_inset

[Parser]
\begin_inset Quotes erd
\end_inset

 section,
\end_layout

\begin_layout Enumerate
the content of 
\begin_inset Quotes eld
\end_inset

name
\begin_inset Quotes erd
\end_inset

 in the 
\begin_inset Quotes eld
\end_inset

[Parser]
\begin_inset Quotes erd
\end_inset

 section,
\end_layout

\begin_layout Enumerate
the content of 
\begin_inset Quotes eld
\end_inset

info
\begin_inset Quotes erd
\end_inset

 in a 
\begin_inset Quotes eld
\end_inset

[Field]
\begin_inset Quotes erd
\end_inset

 section,
\end_layout

\begin_layout Enumerate
and replacement text that follows an 
\begin_inset Quotes eld
\end_inset

@
\begin_inset Quotes erd
\end_inset

 in a 
\begin_inset Quotes eld
\end_inset

[Field]
\begin_inset Quotes erd
\end_inset

 section.
\end_layout

\end_deeper
\begin_layout Standard
In all other contexts (e.
\begin_inset space \thinspace{}
\end_inset

g.
 option names passed on the command line, parser options, names of attribute
 fields, \SpecialChar ldots
) the use of non-ASCII characters is 
\emph on
not
\emph default
 supported.
\end_layout

\begin_layout Standard
Internally, 
\emph on
Survey2GIS
\emph default
 handles all international character encoding as 
\emph on
Unicode
\emph default
 version UTF-8.
 All ASCII characters have identical codes in UTF-8, which means that a
 conversion is not necessary and that pure ASCII data will always be processed
 correctly by 
\emph on
Survey2GIS
\emph default
.
\end_layout

\begin_layout Standard
UTF-8 ist the most widely used encoding on the Internet and the default
 for many operating systems (in the rare case that a Linux or Mac OS X system
 does not use UTF-8, it can be adjusted to do so).
 The most notable exception to this is the Windows operating system, which
 (due to historical reasons) still handles character encoding via a number
 of 
\begin_inset Quotes eld
\end_inset

code pages
\begin_inset Quotes erd
\end_inset

 (the Windows code page that is closest to UTF-8 has ID 65001).
 Starting with version 1.3.1, 
\emph on
Survey2GIS
\emph default
 is capable of correctly processing the multi-byte encoding used by Windows
 for file and folder names.
 To correctly display the UTF-8 encoded program messages issued when running
 
\emph on
Survey2GIS
\emph default
 from the Windows command line (
\emph on
cmd.exe
\emph default
), set the font used by 
\emph on
cmd.exe
\emph default
 to one that covers the Unicode character range, such as 
\begin_inset Quotes eld
\end_inset

Lucida Console
\begin_inset Quotes erd
\end_inset

.
\end_layout

\begin_layout Standard
When using special characters in a parser schema (where supported: see above),
 make sure that the text file containing the schema is produced with a program
 (text editor) that generates UTF-8 encoded files.
\end_layout

\begin_layout Standard
All attribute table field contents produced by 
\emph on
Survey2GIS
\emph default
 will also be encoded in UTF-8.
 This means that e.
\begin_inset space \thinspace{}
\end_inset

g.
 special characters used in the DBF attribute table of a Shapefile will
 only be displayed correctly by a GIS that supports UTF-8.
\end_layout

\begin_layout Standard
\begin_inset Box Boxed
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
thickness "0.4pt"
separation "3pt"
shadowsize "4pt"
framecolor "black"
backgroundcolor "none"
status open

\begin_layout Plain Layout
The use of special characters (as well as whitespace) in file and folder
 names should always be avoided, as this is very likely to cause problems
 at some stage (e.
\begin_inset space \thinspace{}
\end_inset

g.
 when processing the files with another software or exchanging files across
 different operating systems).
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Newpage newpage
\end_inset


\end_layout

\begin_layout Section
Hints on survey practice
\begin_inset CommandInset label
LatexCommand label
name "sec:Hinweise-zur-Vermessungspraxis"

\end_inset


\end_layout

\begin_layout Standard
The quality of the data produced by 
\emph on
Survey2GIS
\emph default
 is in large part determined by the design of the survey workflow.
 The tools for error correction built into 
\emph on
Survey2GIS
\emph default
 can only fix some of the problems that arise during field work.
 This section contains some important hints for a field workflow that ensures
 good quality result data.
\end_layout

\begin_layout Standard
The order of measurements, i.
\begin_inset space \thinspace{}
\end_inset

e.
 the order in which the records will be stored in the input data files,
 is of great importance:
\end_layout

\begin_layout Enumerate
The directions of lines are determined by the order of their vertices.
\end_layout

\begin_layout Enumerate
The the outher boundaries of polygons should be recorded in clockwise direction,
 inner boundaries counter-clockwise, (use the south to north axis of the
 spatial reference system for orientation).
 See 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Order-of-polygon"
plural "false"
caps "false"
noprefix "false"

\end_inset

 for details.
\end_layout

\begin_layout Enumerate
Input files should be forwarded to 
\emph on
Survey2GIS
\emph default
 in the same order in which they were produced during the survey.
\end_layout

\begin_layout Enumerate
Topological cleaning functions such as snapping and 
\begin_inset Quotes eld
\end_inset

hole punching
\begin_inset Quotes erd
\end_inset

 (
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Problems-and-corrections"
plural "false"
caps "false"
noprefix "false"

\end_inset

) will work best if larger 
\begin_inset Quotes eld
\end_inset

base objects
\begin_inset Quotes erd
\end_inset

 are recorded before smaller objects.
\end_layout

\begin_layout Standard
\begin_inset Box Boxed
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
thickness "0.4pt"
separation "3pt"
shadowsize "4pt"
framecolor "black"
backgroundcolor "none"
status open

\begin_layout Plain Layout
The most important principle is that of 
\emph on
hierarchical
\emph default
 surveying: first the base lines and largest objects, then adjacent smaller
 objects, embedded objects etc.
\end_layout

\end_inset


\end_layout

\begin_layout Standard
When recording polygons, it is not necessary to record the first vertice
 again to close the geometry.
 In so far as the output formats demands this, 
\emph on
Survey2GIS
\emph default
 will take care of closing polygons by exactly duplicating the first vertex.
\end_layout

\begin_layout Standard
An important consideration regards the encoding of point measurements.
 In parser modes 
\begin_inset Quotes eld
\end_inset

End
\begin_inset Quotes erd
\end_inset

 and 
\begin_inset Quotes eld
\end_inset

Min
\begin_inset Quotes erd
\end_inset

, geometry tags for points may be left out (no declaration of 
\begin_inset Quotes eld
\end_inset

geom_tag_point
\begin_inset Quotes erd
\end_inset

 has to be made in the parser schema).
 In this case, 
\emph on
Survey2GIS
\emph default
 will attempt to separate single point measurements automatically from vertices
 of lines and polygons.
 However, this will only work reliably if the primary key values (i.
\begin_inset space \thinspace{}
\end_inset

e.
 the contents of the field 
\begin_inset Quotes eld
\end_inset

key_field
\begin_inset Quotes erd
\end_inset

) are unique 
\emph on
across all geometries
\emph default
.
 If this is not the case, the following problems may occur:
\end_layout

\begin_layout Itemize
Parser mode 
\begin_inset Quotes eld
\end_inset

End
\begin_inset Quotes erd
\end_inset

: If a point occurs directly 
\emph on
before
\emph default
 a line or polygon record, and if that point has the same key value as the
 vertices of the 
\emph on
following
\emph default
 line or polygon object, then it will be erroneously merged as a vertex
 into that object.
\end_layout

\begin_layout Itemize
Parser mode 
\begin_inset Quotes eld
\end_inset

Min
\begin_inset Quotes erd
\end_inset

: If a point follows directly 
\emph on
after
\emph default
 a line or polygon object and if that point has the same key value as the
 vertices of the 
\emph on
preceding
\emph default
 line or polygon object, then it will be erroneously merged as a vertex
 into that object.
\end_layout

\begin_layout Standard
In order to avoid these problems, the following alternative solutions are
 recommended:
\end_layout

\begin_layout Enumerate
The 
\begin_inset Quotes pld
\end_inset

geom_tag_point
\begin_inset Quotes prd
\end_inset

 option is declared in the parser schema and all point measurements are
 explicitely tagged as such during recording.
\end_layout

\begin_layout Enumerate
Separate, non-overlapping key value ranges are used for the different geometry
 types, e.
\begin_inset space \thinspace{}
\end_inset

g.
 0-9999 for points, 10000-19999 for lines, 20000-29999 for polygons.
\end_layout

\begin_layout Standard
\begin_inset Newpage newpage
\end_inset


\end_layout

\begin_layout Section
\start_of_appendix
Known problems
\end_layout

\begin_layout Standard
The following problems are known to exist in the current version of 
\emph on
Survey2GIS
\emph default
:
\end_layout

\begin_layout Itemize
When run from Windows' 
\emph on
cmd.exe
\emph default
, 
\emph on
Survey2GIS
\emph default
 cannot be used in GUI mode and display text on the console at the same
 time.
 Separate versions of 
\begin_inset Quotes eld
\end_inset

Survey2GIS.exe
\begin_inset Quotes erd
\end_inset

 must be run for each interface mode.
\end_layout

\begin_layout Itemize
The exchange of settings files (extension 
\begin_inset Quotes eld
\end_inset

.s2g
\begin_inset Quotes erd
\end_inset

) is subject to the following restriction: Numeric settings are saved using
 the current number format.
 If they are loaded into another instance of 
\emph on
Survey2GIS
\emph default
 that uses different language settings, then they may not be processed correctly.
 In such cases, please check the number formats of all numeric options and
 correct them if necessary.
\end_layout

\begin_layout Itemize
Support for latitude/longitude input coordinate data is currently limited.
 Most significantly, some topological cleaning functions will be inaccurate
 or unavailable.
 The software will issue appropriate warnings when processing lat/lon input
 data.
\end_layout

\begin_layout Itemize
Point records that have the same value in 
\begin_inset Quotes eld
\end_inset

key_field
\begin_inset Quotes erd
\end_inset

 as any subsequent line or polygon records will be merged with these subsequent
 geometries, causing e.
\begin_inset space \thinspace{}
\end_inset

g.
 selections to return wrong results.
 This problem only occurs if geometry markers are stored in the key field
 (i.
\begin_inset space \thinspace{}
\end_inset

e.
 
\begin_inset Quotes eld
\end_inset

tag_field
\begin_inset Quotes erd
\end_inset

 and 
\begin_inset Quotes eld
\end_inset

key_field
\begin_inset Quotes erd
\end_inset

 refer to one and the same field: 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Einstellungen-fuer-Parser]"
plural "false"
caps "false"
noprefix "false"

\end_inset

) and the key values are not globally unique (i.
\begin_inset space \thinspace{}
\end_inset

e.
 if a point geometry has the same key value as a line or polygon geometry).
 To avoid this problem, define 
\begin_inset Quotes eld
\end_inset

tag_field
\begin_inset Quotes erd
\end_inset

 and 
\begin_inset Quotes eld
\end_inset

key_field
\begin_inset Quotes erd
\end_inset

 to refer to different fields in the input data.
\end_layout

\begin_layout Standard
\begin_inset Newpage newpage
\end_inset


\end_layout

\begin_layout Section
License
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
copyright
\end_layout

\end_inset

 2015-2019 by the 
\emph on
survey-tools.org
\emph default
 development team (
\begin_inset Flex URL
status collapsed

\begin_layout Plain Layout

http://www.survey-tools.org
\end_layout

\end_inset

).
\end_layout

\begin_layout Standard
This software (
\emph on
Survey2GIS
\emph default
) is licensed under the 
\emph on
GNU General Public License
\emph default
 (version 2).
\end_layout

\begin_layout Standard
The full license text can be found in the text file 
\begin_inset Quotes eld
\end_inset

LICENSE
\begin_inset Quotes prd
\end_inset

 that came with this software.
\end_layout

\begin_layout Standard
It can also be found online at 
\begin_inset Flex URL
status open

\begin_layout Plain Layout

https://www.gnu.org/licenses/old-licenses/gpl-2.0.en.html
\end_layout

\end_inset

.
\end_layout

\end_body
\end_document
